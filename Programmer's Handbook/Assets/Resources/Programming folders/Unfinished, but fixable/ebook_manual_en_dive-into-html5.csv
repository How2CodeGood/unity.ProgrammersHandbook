Larger Text,Smaller Text,Symbol
DIVE INTO HTML5 ,NA,NA
BY,NA,NA
MARK PILGRIM,NA,NA
WITH ILLUSTRATIONS FROM THE PUBLIC DOMAIN,NA,NA
❧,NA,NA
ive Into HTML5 seeks to elaborate on a hand-pied Selection of features ,NA,NA
from the ,NA,NA
HTML5,NA,NA
 specification and other fine Standards. e final manuscript ,NA,NA
"has been published on paper by O’Reilly, under the Google Press imprint. ",NA,NA
Buy the printed Work,NA,NA
 — artfully titled “HTML5: Up ,NA,NA
&,NA,NA
 Running” — and be ,NA,NA
the first in,NA,NA
your Community to receive it. Your kind and sincere ,NA,NA
Feedba,NA,NA
 is always welcome. e Work,NA,NA
shall remain online under the ,NA,NA
CC-BY-3.0,NA,NA
 License.,"diveintohtml5.org 
  
 DIVE INTO HTML5",NA
TABLE OF CONTENTS,NA,NA
Introduction: Five ings You Should Know About HTML5,NA,NA
0,NA,NA
A ite Biased History of HTML5 ,NA,NA
"Detecting HTML5 Features: It’s Elementary, My Dear ",NA,NA
Watson What Does It All Mean?,NA,NA
Let’s Call It a Draw(ing Surface) ,NA,NA
Video in a Flash (Without at Other ing) ,NA,NA
You Are Here (And So Is Everybody Else) ,NA,NA
A Place To Put Your Stuff ,NA,NA
Let’s Take is Offline ,NA,NA
A Form of Madness,NA,NA
"“Distributed,” “Extensibility,” And Other Fancy Words",NA,NA
e All-In-One Almost-Alphabetical No-Bullshit Guide to Detecting ,NA,NA
Everything,NA,NA
1,NA,NA
 ,NA,NA
2,NA,NA
 ,NA,NA
3,NA,NA
 ,NA,NA
4,NA,NA
 ,NA,NA
5,NA,NA
6 ,NA,NA
7,NA,NA
8 ,NA,NA
9 ,NA,NA
10,NA,NA
11,NA,NA
"HTML5 Peeks, Pokes and Pointers",NA,NA
12,NA,NA
❧,NA,NA
"“If you’re good at something, never do it for free.” ",NA,NA
—,NA,NA
e Joker,NA,NA
(but that doesn’t mean you should keep it to yourself),NA,NA
Copyright MMIX–MMX Mark Pilgrim,"diveintohtml5.org 
  
 DIVE INTO HTML5",NA
powered by Google™,NA,NA
Search,DIVE INTO HTML5,NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
 Dive Into HTML5 ,NA,NA
‣,NA,NA
TABLE OF CONTENTS,NA,NA
Introduction: Five ings You Should Know About HTML5,NA,NA
1. It’s not one big thing ,NA,NA
2. You don’t need to throw anything ,NA,NA
away,NA,NA
i ,NA,NA
ii,NA,NA
3. It’s easy to get ,NA,NA
started 4. It already ,NA,NA
works ,NA,NA
5. It’s here to stay,NA,NA
iii ,NA,NA
iv ,NA,NA
v,NA,NA
A ite Biased History of HTML5,NA,NA
Diving In ,NA,NA
MIME types ,NA,NA
A long digression into how standards are made ,NA,NA
An unbroken line ,NA,NA
A timeline of HTML development from 1997 to ,NA,NA
2004,NA,NA
i ,NA,NA
ii ,NA,NA
iii,NA,NA
iv,NA,NA
v,NA,NA
Everything you know about XHTML is wrong ,NA,NA
A competing vision ,NA,NA
WHAT Working Group?,NA,NA
Ba to the W3C ,NA,NA
Postscript ,diveintohtml5.org,NA
vi,NA,NA
vii ,NA,NA
viii ,NA,NA
ix,NA,NA
x ,TABLE OF CONTENTS,NA
Further Reading ,NA,NA
xi,NA,NA
"Detecting HTML5 Features: It’s Elementary, My Dear Watson",NA,NA
Diving In ,NA,NA
Detection Teniques ,NA,NA
"Modernizr, an HTML5 Detection ",NA,NA
Library,NA,NA
i ,NA,NA
ii,NA,NA
iii,NA,NA
Canvas ,NA,NA
Canvas Text ,NA,NA
Video ,NA,NA
Video Formats ,NA,NA
Local Storage ,NA,NA
Web Workers ,NA,NA
Offline Web ,NA,NA
Applications ,NA,NA
Geolocation ,NA,NA
Input Types ,NA,NA
Placeholder Text ,NA,NA
Form Autofocus ,NA,NA
Microdata ,NA,NA
Further Reading,NA,NA
iv ,NA,NA
v ,NA,NA
vi ,NA,NA
vii ,NA,NA
viii ,NA,NA
ix ,NA,NA
x ,NA,NA
xi ,NA,NA
xii,NA,NA
xiii,NA,NA
xiv ,NA,NA
xv ,NA,NA
xvi,NA,NA
What Does It All Mean?,NA,NA
Diving In,NA,NA
e Doctype,NA,NA
e Root Element ,diveintohtml5.org,NA
i ,NA,NA
ii ,NA,NA
iii ,TABLE OF CONTENTS,NA
e <head> Element ,NA,NA
Character Encoding ,NA,NA
Friends & (Link) Relations ,NA,NA
New Semantic Elements in HTML5 ,NA,NA
A long digression into how browsers handle unknown ,NA,NA
elements,NA,NA
iv ,NA,NA
v ,NA,NA
vi ,NA,NA
vii,NA,NA
viii,NA,NA
Headers ,NA,NA
Articles ,NA,NA
Dates and ,NA,NA
Times ,NA,NA
Navigation ,NA,NA
Footers ,NA,NA
Further Reading,NA,NA
ix ,NA,NA
x ,NA,NA
xi ,NA,NA
xii ,NA,NA
xiii ,NA,NA
xiv,NA,NA
Let’s Call It a Draw(ing Surface),NA,NA
Diving In ,NA,NA
Simple Shapes ,NA,NA
Canvas Coordinates ,NA,NA
Paths ,NA,NA
Text ,NA,NA
Gradients ,NA,NA
Images ,NA,NA
What About IE?,NA,NA
"A Complete, Live Example ",NA,NA
Further Reading,diveintohtml5.org,NA
i ,NA,NA
ii ,NA,NA
iii ,NA,NA
iv ,NA,NA
v ,NA,NA
vi ,NA,NA
vii ,NA,NA
viii ,NA,NA
ix ,NA,NA
x,TABLE OF CONTENTS,NA
Video in a Flash (Without at Other ing),NA,NA
Diving In ,NA,NA
Video Containers ,NA,NA
Video Codecs ,NA,NA
Audio Codecs ,NA,NA
What Works on the Web ,NA,NA
Licensing Issues with H.264 Video ,NA,NA
Encoding Ogg Video with Firefogg ,NA,NA
Bat Encoding Ogg Video with ,NA,NA
ffmpeg2theora,NA,NA
i ,NA,NA
ii ,NA,NA
iii ,NA,NA
iv ,NA,NA
v,NA,NA
vi,NA,NA
vii,NA,NA
viii,NA,NA
Encoding H.264 Video with HandBrake ,NA,NA
Bat Encoding H.264 Video with ,NA,NA
HandBrake Encoding WebM Video with ,NA,NA
ffmpeg ,NA,NA
"At Last, e Markup ",NA,NA
What About IE?,NA,NA
Issues on iPhones and ,NA,NA
iPads Issues on Android ,NA,NA
"devices A Complete, Live ",NA,NA
Example Further Reading,NA,NA
ix,NA,NA
x,NA,NA
xi,NA,NA
xii ,NA,NA
xiii ,NA,NA
xiv ,NA,NA
xv ,NA,NA
xvi ,NA,NA
xvii,NA,NA
You Are Here (And So Is Everybody Else),NA,NA
Diving In,NA,NA
e Geolocation API ,NA,NA
Show Me e Code,diveintohtml5.org,NA
i ,NA,NA
ii ,NA,NA
iii,TABLE OF CONTENTS,NA
Handling Errors ,NA,NA
Choices! I Demand ,NA,NA
Choices! ,NA,NA
What About IE?,NA,NA
geo.js to the Rescue ,NA,NA
"A Complete, Live Example ",NA,NA
Further Reading,NA,NA
iv ,NA,NA
v ,NA,NA
vi ,NA,NA
vii ,NA,NA
viii ,NA,NA
ix,NA,NA
A Place To Put Your Stuff,NA,NA
Diving In ,NA,NA
A Brief History of Local Storage Has Before HTML5,NA,NA
i ,NA,NA
ii,NA,NA
Introducing HTML5 Storage ,NA,NA
Using HTML5 Storage ,NA,NA
HTML5 Storage in Action ,NA,NA
Beyond Named Key-Value Pairs: Competing ,NA,NA
Visions Further Reading,NA,NA
iii ,NA,NA
iv ,NA,NA
v ,NA,NA
vi,NA,NA
vii,NA,NA
Let’s Take is Offline,NA,NA
Diving In,NA,NA
e Cae Manifest,NA,NA
e Flow of Events,NA,NA
"e fine art of debugging, a.k.a. “Kill me! Kill me now!”",NA,NA
i ,NA,NA
ii ,NA,NA
iii,NA,NA
iv,NA,NA
Let’s Build One! ,NA,NA
Further ,NA,NA
Reading,NA,NA
v ,NA,NA
vi,NA,NA
A Form of Madness,"diveintohtml5.org 
  
 TABLE OF CONTENTS",NA
Diving In ,NA,NA
Placeholder Text ,NA,NA
Autofocus Fields ,NA,NA
Email Addresses ,NA,NA
Web Addresses ,NA,NA
Numbers as ,NA,NA
Spinboxes ,NA,NA
Numbers as Sliders ,NA,NA
Date Piers ,NA,NA
Sear Boxes ,NA,NA
Color Piers ,NA,NA
Form Validation ,NA,NA
Required Fields ,NA,NA
Further Reading,NA,NA
i ,NA,NA
ii,NA,NA
iii ,NA,NA
iv ,NA,NA
v ,NA,NA
vi ,NA,NA
vii ,NA,NA
viii ,NA,NA
ix ,NA,NA
x ,NA,NA
xi ,NA,NA
xii ,NA,NA
xiii,NA,NA
"“Distributed,” “Extensibility,” And Other Fancy Words",NA,NA
Diving In ,NA,NA
What is Microdata?,NA,NA
e Microdata Data Model,NA,NA
i ,NA,NA
ii ,NA,NA
iii,NA,NA
Marking Up People ,NA,NA
Marking Up ,NA,NA
Organizations Marking ,NA,NA
Up Events ,NA,NA
Marking Up Reviews ,NA,NA
Further Reading,NA,NA
iv ,NA,NA
v ,NA,NA
vi ,NA,NA
vii ,NA,NA
viii,TABLE OF CONTENTS,NA
e All-In-One Almost-Alphabetical No-Bullshit Guide to Detecting Everything,NA,NA
Further Reading,NA,NA
i,NA,NA
"HTML5 Peeks, Pokes and Pointers",NA,NA
❧,NA,NA
"“If you’re good at something, never do it for free.” ",NA,NA
—,NA,NA
e Joker ,NA,NA
(but that doesn’t mean you should keep it to yourself),NA,NA
Copyright MMIX–MMX Mark Pilgrim,diveintohtml5.org,NA
powered by Google™,NA,NA
Search,TABLE OF CONTENTS,NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
INTRODUCTION: ,NA,NA
FIVE THINGS YOU SHOULD ,NA,NA
KNOW ABOUT HTML5,NA,NA
show table of contents,NA,NA
❧,NA,NA
1. It’s not one big thing,NA,NA
You may well ask: “How can I start using HTML5 if older ,NA,NA
browsers don’t support it?” But the question itself is ,NA,NA
misleading. HTML5 is not one big thing; it is a collection of ,NA,NA
individual features. So you can’t detect “HTML5 ,NA,NA
"support,” because that doesn’t make any sense. But you ",NA,NA
can ,NA,NA
"detect support for individual features, like canvas, ",NA,NA
"video, or",NA,NA
geolocation.,NA,NA
"You may think of HTML as tags and angle braets. at’s an important part of it, but it’s not ",NA,NA
the whole story. e HTML5 specification also defines how those angle braets interact with ,NA,NA
"JavaScript, through the Document Object Model (DOM). HTML5 doesn’t just define a ",NA,NA
<video>,NA,NA
 tag; there is also a corresponding DOM API for video objects in the DOM. You can ,NA,NA
"use this API to detect support for different video formats, play a video, pause, mute audio, ",NA,NA
"tra how mu of the video has been downloaded, and everything else you need to build a ",NA,NA
ri user experience around the ,NA,NA
<video>,NA,NA
 tag itself.,NA,NA
Chapter 2,NA,NA
 and ,NA,NA
Appendix A,NA,NA
 will tea you how to properly detect support for ea new ,NA,NA
HTML5 feature.,NA,NA
2. You don’t need to throw anything away,NA,NA
"Love it or hate it, you can’t deny that HTML 4 is the most successful ",NA,NA
markup format ever. HTML5 builds on that success. You don’t need to ,NA,NA
throw away your existing markup. You don’t need to relearn things ,NA,NA
you already know. If your web application worked yesterday in ,NA,NA
"HTML 4, it will still work today in HTML5. Period.",NA,NA
"Now, if you want to ",NA,NA
improve,NA,NA
" your web applications, you’ve come to",NA,NA
the right place. Here’s a concrete example: HTML5 supports all the ,NA,NA
"form controls from HTML 4, but it also includes new input ",NA,NA
controls.,NA,NA
Some of these are long-overdue additions like sliders and date piers; others are more ,NA,NA
subtle.,NA,NA
"For example, the ",NA,NA
email,NA,NA
" input type looks just like a text box, but mobile browsers will ",NA,NA
customize their onscreen keyboard to make it easier to type email addresses. Older ,NA,NA
browsers that don’t support the ,NA,NA
email,NA,NA
" input type will treat it as a regular text field, and ",NA,NA
the form still works with no markup anges or scripting has. is means you can start ,NA,NA
improving your web forms ,NA,NA
today,NA,NA
", even if some of your visitors are stu on IE 6.",NA,NA
Read all the gory details about HTML5 forms in ,NA,NA
Chapter 9,NA,NA
.,NA,NA
3. It’s easy to get started,NA,NA
“Upgrading” to HTML5 can be as simple as anging your ,NA,NA
doctype,NA,NA
. e doctype should already be on the first line of ,NA,NA
every HTML page. Previous versions of HTML defined a ,NA,NA
"lot of doctypes, and oosing the right one could be triy.","diveintohtml5.org
  
  FIVE THINGS YOU SHOULD KNOW ABOUT HTML5",NA
"In HTML5, there is only one doctype:",NA,NA
<!DOCTYPE html>,NA,NA
Upgrading to the HTML5 doctype won’t break your ,NA,NA
"existing markup, because all the tags defined in HTML 4 are still supported in HTML5. But ",NA,NA
it will allow you to use — and validate — new semantic elements like ,NA,NA
<article>,NA,NA
", ",NA,NA
<section>,NA,NA
", ",NA,NA
<header>,NA,NA
", and ",NA,NA
<footer>,NA,NA
. You’ll learn all about these new elements in ,NA,NA
Chapter ,NA,NA
3,NA,NA
.,NA,NA
4. It already works,NA,NA
"Whether you want to draw on a canvas, play video, ",NA,NA
"design beer forms, or build web applications that work ",NA,NA
"offline, you’ll find that HTML5 is already well-supported. ",NA,NA
"Firefox, Safari, Chrome, Opera, and mobile browsers ",NA,NA
already ,NA,NA
support canvas (,NA,NA
Chapter 4,NA,NA
"), video (",NA,NA
Chapter 5,NA,NA
"), ",NA,NA
geolocation (,NA,NA
Chapter 6,NA,NA
"), local storage (",NA,NA
Chapter 7,NA,NA
"), and ",NA,NA
more. Google already supports microdata annotations ,NA,NA
(,NA,NA
Chapter 10,NA,NA
). Even,NA,NA
Microso — rarely known for blazing the trail of ,NA,NA
standards ,NA,NA
support — will be supporting most HTML5 features in ,NA,NA
the upcoming Internet Explorer 9.,NA,NA
Ea apter of this book includes the all-too-familiar browser ,NA,NA
"compatibility arts. But more importantly, ea apter includes a ",NA,NA
frank discussion of your options if you need to support older ,NA,NA
browsers.,NA,NA
HTML5 features like geolocation (,NA,NA
Chapter 6,NA,NA
) and video (,NA,NA
Chapter 5,NA,NA
) were ,NA,NA
"first provided by browser plugins like Gears or Flash. Other features, ",NA,NA
like canvas (,NA,NA
Chapter 4,NA,NA
"), can be emulated entirely in JavaScript. is book will tea you how ",NA,NA
"to target the native features of modern browsers, without leaving older browsers behind.",NA,NA
5. It’s here to stay,"diveintohtml5.org
  
  FIVE THINGS YOU SHOULD KNOW ABOUT HTML5",NA
Tim Berners-Lee invented the world wide web in the early 1990s. He later founded the ,NA,NA
"W3C to act as a steward of web standards, whi the organization has done for more than ",NA,NA
15 years.,NA,NA
"Here is what the W3C had to say about the future of web standards, in July 2009:",NA,NA
Today the Director announces that when the XHTML 2 Working Group arter ,NA,NA
"expires as seduled at the end of 2009, the arter will not be renewed. By ",NA,NA
"doing so, and by increasing resources in the HTML Working Group, W3C hopes ",NA,NA
to accelerate the progress of HTML5 and clarify W3C’s position regarding the ,NA,NA
future of HTML.,NA,NA
HTML5 is here to stay. ,NA,NA
Let’s dive in,NA,NA
.,NA,NA
❧,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now.,NA,NA
If you liked this introduction and want to show your,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition,NA,NA
directly from O’Reilly,NA,NA
. You’ll get a ,NA,NA
"book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,NA,NA
powered by Google™,NA,NA
Search,"diveintohtml5.org
  
  FIVE THINGS YOU SHOULD KNOW ABOUT HTML5",NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
1. ,NA,NA
. ,NA,NA
HOW DID WE GET HERE?,NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
"ecently, I stumbled across a quote from a Mozilla developer ",NA,NA
about the ,NA,NA
tension inherent in creating standards,NA,NA
:,NA,NA
Implementations and specifications have to do a delicate dance together.,NA,NA
"You don’t want implementations to happen before the specification is finished, ",NA,NA
because people start depending on the details of implementations and that ,NA,NA
"constrains the specification. However, you also don’t want the specification to be ",NA,NA
finished before there are implementations and author experience with those ,NA,NA
"implementations, because you need the feedba. ere is unavoidable tension ",NA,NA
"here, but we just have to muddle on through.",NA,NA
"Keep this quote in the ba of your mind, and let me explain how HTML5 came to be.","diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
❧,NA,NA
MIME TYPES,NA,NA
"is book is about HTML5, not previous versions of HTML, and not any version of XHTML. ",NA,NA
"But to understand the history of HTML5 and the motivations behind it, you need to ",NA,NA
"understand a few tenical details first. Specifically, MIME types.",NA,NA
"Every time your web browser requests a page, the web server sends “headers” before it ",NA,NA
"sends the actual page markup. ese headers are normally invisible, although there are web ",NA,NA
development tools that will make them visible if you’re interested. But the headers are ,NA,NA
"important, because they tell your browser how to interpret the page markup that follows. ",NA,NA
e most important header is called ,Content-Type,NA
", and it looks like this:",Content-Type: text/html,NA
“,text/html,NA
” is called the “content type” or “ MIME type” of the page. is header is the ,NA,NA
only ,NA,NA
"thing that determines what a particular resource truly is, and therefore how it should be ",NA,NA
rendered. Images have their own MIME types (,image/jpeg,NA
" for JPEG images, ",image/png,NA
for ,NA,NA
"PNG images, and so on). JavaScript files have their own MIME type. CSS stylesheets have ",NA,NA
their own MIME type. Everything has its own MIME type. e web runs on MIME types.,NA,NA
"Of course, reality is more complicated than that. e first generation of web servers (and ",NA,NA
I’m talking web servers from 1993) didn’t send the ,Content-Type,NA
 header because it didn’t ,NA,NA
exist yet. (It wasn’t invented until 1994.) For compatibility reasons that date all the way ,NA,NA
"ba to 1993, some popular web browsers will ignore the ",Content-Type,NA
 header under ,NA,NA
"certain circumstances. (is is called “content sniffing.”) But as a general rule of thumb, ",NA,NA
"everything you’ve ever looked at on the web — HTML pages, images, scripts, videos, PDFs, ",NA,NA
anything,NA,NA
with a URL — has been served to you with a specific MIME type in the ,Content-Type,NA
header.,NA,NA
Tu that under your hat. We’ll come ba to it.,NA,NA
❧,NA,NA
A LONG DIGRESSION INTO HOW ,NA,NA
STANDARDS ARE MADE,NA,NA
Why do we have an ,<img>,NA
 element?,NA,NA
at’s not a question you hear every ,NA,NA
day. Obviously ,NA,NA
someone,NA,NA
 must have ,NA,NA
created it. ese things don’t just appear ,NA,NA
"out of nowhere. Every element, every ",NA,NA
"aribute, every feature of HTML that ",NA,NA
you’ve ever used — someone created ,NA,NA
"them, decided how they should work, ",NA,NA
and wrote it all down. ese people are ,NA,NA
"not gods, nor are they flawless. ey’re ",NA,NA
"just people. Smart people, to be sure. ",NA,NA
But just people.,NA,NA
One of the great things about ,NA,NA
standards that are developed “out in ,NA,NA
the open” is,NA,NA
that you can go ba in time and answer ,NA,NA
"these kinds of questions. Discussions occur on mailing lists, whi are usually arived and ",NA,NA
publicly searable. So I decided to do a bit of “email araeology” to try to answer the ,NA,NA
"question, “Why do we have an ",<img>,NA
 element?” I had to go ba to before there was an ,NA,NA
organization called the World Wide Web Consortium (W3C). I went ba to the earliest ,NA,NA
"days of the web, when you could count the number of web servers with both hands and ",NA,NA
maybe a couple of toes.,"diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
(ere are a number of typographical errors in the following quotes. I have decided to leave ,NA,NA
them intact for historical accuracy.),NA,NA
"On February 25, 1993, ",NA,NA
Marc Andreessen wrote,NA,NA
:,NA,NA
"I’d like to propose a new, optional HTML tag:",NA,NA
IMG,NA,NA
Required argument is ,"SRC=""url""",NA
.,NA,NA
is names a bitmap or pixmap file for the browser to aempt to pull over the ,NA,NA
"network and interpret as an image, to be embedded in the text at the point of ",NA,NA
the tag’s occurrence.,NA,NA
An example is:,"<IMG SRC=""file://foobar.com/foo/bar/blargh.xbm"">",NA
(ere is no closing tag; this is just a standalone tag.),NA,NA
"is tag can be embedded in an anor like anything else; when that happens, it ",NA,NA
becomes an icon that’s sensitive to activation just like a regular text anor.,NA,NA
Browsers should be afforded flexibility as to whi image formats they support. ,NA,NA
"Xbm and Xpm are good ones to support, for example. If a browser cannot ",NA,NA
"interpret a given format, it can do whatever it wants instead (X Mosaic will pop ",NA,NA
up a default bitmap as a placeholder).,NA,NA
"is is required functionality for X Mosaic; we have this working, and we’ll at ",NA,NA
least be using it internally. I’m certainly open to suggestions as to how this ,NA,NA
should be handled within HTML; if you have a beer idea than what I’m ,NA,NA
"presenting now, please let me know. I know this is hazy wrt image format, but I ",NA,NA
don’t see an alternative than to just say “let the browser do what it can” and ,NA,NA
"wait for the perfect solution to come along (MIME, someday, maybe).","diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
Xbm,NA,NA
 and ,NA,NA
Xpm,NA,NA
 were popular graphics formats on Unix systems.,NA,NA
“Mosaic” was one of the earliest web browsers. (“X Mosaic” was the version that ran on ,NA,NA
"Unix systems.) When he wrote this message in early 1993, ",NA,NA
Marc Andreessen,NA,NA
 had not yet ,NA,NA
"founded the company that made him famous, ",NA,NA
Mosaic Communications Corporation,NA,NA
", nor ",NA,NA
"had he started work on that company’s flagship product, “Mosaic Netscape.” (You may ",NA,NA
"know them beer by their later names, “Netscape Corporation” and “Netscape Navigator.”)",NA,NA
"“MIME, someday, maybe” is a reference to ",NA,NA
content negotiation,NA,NA
", a feature of HTTP where ",NA,NA
a client (like a web browser) tells the server (like a web server) what types of resources ,NA,NA
it supports (like ,image/jpeg,NA
) so the server can return something in the client’s ,NA,NA
preferred format. ,NA,NA
e Original HTTP as defined in 1991,NA,NA
 (the only version that was ,NA,NA
implemented in February 1993) did not have a way for clients to tell servers what kinds ,NA,NA
"of images they supported, thus the design dilemma that Marc faced.",NA,NA
"A few hours later, ",NA,NA
Tony Johnson replied,NA,NA
:,NA,NA
"I have something very similar in Midas 2.0 (in use here at SLAC, and due for ",NA,NA
"public release any week now), except that all the names are different, and it has ",NA,NA
an extra argument ,"NAME=""name""",NA
. It has almost exactly the same functionality as ,NA,NA
your proposed ,IMG,NA
 tag. e.g.,"<ICON name=""NoEntry"" href=""http://note/foo/bar/NoEntry.xbm"">",NA
e idea of the name parameter was to allow the browser to have a set of “built ,NA,NA
in” images. If the name mates a “built in” image it would use that instead of ,NA,NA
having to go out and fet the image. e name could also act as a hint for “line ,NA,NA
mode” browsers as to what kind of a symbol to put in place of the image.,NA,NA
"I don’t mu care about the parameter or tag names, but it would be sensible if ",NA,NA
"we used the same things. I don’t mu care for abbreviations, ie why not ",IMAGE=,NA
 ,NA,NA
and ,SOURCE=,NA
. I somewhat prefer ,ICON,NA
 since it imlies that the ,IMAGE,NA
 should be ,NA,NA
"smallish, but maybe ",ICON,NA
 is an overloaded word?,NA,NA
Midas,NA,NA
" was another early web browser, a contemporary of X Mosaic. It was cross-platform; ",NA,NA
it ran on both Unix and VMS. “SLAC” refers to the ,NA,NA
Stanford Linear Accelerator Center,NA,NA
", now ",NA,NA
the,NA,NA
"SLAC National Accelerator Laboratory, that hosted the first web server in the United States ",NA,NA
(in fact ,NA,NA
the first web server outside Europe,NA,NA
). When ,NA,NA
Tony,NA,NA
" wrote this message, SLAC was an ",NA,NA
"old-timer on the WWW, having hosted ",NA,NA
five pages,NA,NA
 on its web server for a whopping 441 ,NA,NA
days.,NA,NA
Tony continued:,NA,NA
"While we are on the subject of new tags, I have another, somewhat similar ",NA,NA
"tag, whi I would like to support in Midas 2.0. In principle it is:","<INCLUDE HREF=""..."">",NA
e intention here would be that the second document is to be included into the ,NA,NA
first document at the place where the tag occured. In principle the referenced ,NA,NA
"document could be anything, but the main purpose was to allow images (in this ",NA,NA
case arbitrary sized) to be embedded into documents. Again the intention would ,NA,NA
be that when HTTP2 comes along the format of the included document would be ,NA,NA
up for separate negotiation.,NA,NA
“HTTP2” is a reference to ,NA,NA
Basic HTTP as defined in 1992,NA,NA
". At this point, in early 1993, it was ",NA,NA
still largely unimplemented. e dra known as “HTTP2” evolved and was eventually ,NA,NA
standardized as “HTTP 1.0” (albeit ,NA,NA
not for another three years,NA,NA
 ). HTTP 1.0 did include ,NA,NA
request headers for content negotiation,NA,NA
", a.k.a. “MIME, someday, maybe.”",NA,NA
Tony continued:,NA,NA
An alternative I was considering was:,"<A HREF=""..."" INCLUDE>See photo</A>",NA
I don’t mu like adding more functionality to the ,<A>,NA
" tag, but the idea here is to ",NA,NA
maintain compatibility with browsers that can not honour the ,INCLUDE,NA
 ,NA,NA
parameter.e intention is that browsers whi do understand ,INCLUDE,NA
", replace ",NA,NA
"the anor text (in this case “See photo”) with the included document (picture), ",NA,NA
while older or dumber browsers ignore the ,INCLUDE,NA
 tag completely.,NA,NA
"is proposal was never implemented, although the idea of providing text if an image is",NA,NA
missing is ,NA,NA
an important accessibility tenique,NA,NA
  that was missing from Marc’s initial ,<IMG>,NA
"proposal. Years later, this feature was bolted on as the ",<img alt>,NA
 aribute,NA,NA
", whi Netscape",NA,NA
promptly broke by ,NA,NA
erroneously treating it as a tooltip,NA,NA
.,NA,NA
"A few hours aer Tony posted his message, ",NA,NA
Tim Berners-Lee responded,NA,NA
:,NA,NA
I had imagined that figues would be reprented as,"<a name=fig1 href=""fghjkdfghj"" REL=""EMBED, PRESENT"">Figure
  
 </a>",NA
where the relation ship values mean,"EMBED Embed this here when presenting it
  
 PRESENT Present this whenever the source document is
  
 presented",NA
"Note that you can have various combinations of these, and if the browser doesn’t",NA,NA
"support either one, it doesn’t break.",NA,NA
[I] see that using this as a method for selectable icons means nesting anors.,NA,NA
Hmmm. But I hadn’t wanted a special tag.,NA,NA
"is proposal was never implemented, but the ",rel,NA
 aribute is ,NA,NA
still around,NA,NA
.,NA,NA
Jim Davis added,NA,NA
:,NA,NA
"It would be nice if there was a way to specify the content type, e.g.","<IMG HREF=""http://nsa.gov/pub/sounds/gorby.au"" CONTENT-
  
 TYPE=audio/basic>",NA
But I am completely willing to live with the requirement that I specify the content,NA,NA
type by file extension.,NA,NA
"is proposal was never implemented, but Netscape did later add support for embedding of","diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
media objects with the ,<embed>,NA
 element.,NA,NA
Jay C. Weber asked,NA,NA
:,NA,NA
While images are at the top of my list of desired medium types in a WWW ,NA,NA
"browser, I don’t think we should add idiosyncratic hooks for media one at a ",NA,NA
time.,NA,NA
Whatever happened to the enthusiasm for using the MIME typing meanism?,NA,NA
Marc Andreessen replied,NA,NA
:,NA,NA
is isn’t a substitute for the upcoming use of MIME as a standard document ,NA,NA
meanism; this provides a necessary and simple implementation of ,NA,NA
functionality that’s needed independently from MIME.,NA,NA
Jay C. Weber responded,NA,NA
:,NA,NA
"Let’s temporarily forget about MIME, if it clouds the issue. My objection was ",NA,NA
to the discussion of “how are we going to support embedded images” rather ,NA,NA
than“how are we going to support embedded objections in various media”.,NA,NA
"Otherwise, next week someone is going to suggest ‘lets put in a new tag ","<AUD 
 SRC=""file://foobar.com/foo/bar/blargh.snd"">",NA
‘ for audio.,NA,NA
ere shouldn’t be mu cost in going with something that generalizes.,NA,NA
"With the benefit of hindsight, it appears that Jay’s concerns were well founded. It took a ",NA,NA
"lile more than a week, but HTML5 did finally add new ",<video>,NA
 and ,<audio>,NA
 elements.,NA,NA
"Responding to Jay’s original message, ",NA,NA
Dave Ragge said,NA,NA
:,NA,NA
"True indeed! I want to consider a whole range of possible image/line art types, ",NA,NA
along with the possibility of format negotiation. Tim’s note on supporting ,NA,NA
cliable areas within images is also important.,NA,NA
"Later in 1993, ",NA,NA
Dave Ragge,NA,NA
 proposed ,NA,NA
HTML+,NA,NA
 as an evolution of the HTML standard. ,NA,NA
"e proposal was never implemented, and it was superseded by ",NA,NA
HTML 2.0,NA,NA
. HTML 2.0 ,NA,NA
was a,"diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
"“retro-spec,” whi means it formalized features already in common use. “",NA,NA
is ,NA,NA
"specification brings together, clarifies, and formalizes a set of features",NA,NA
 that roughly ,NA,NA
corresponds to the capabilities of HTML in common use prior to June 1994.”,NA,NA
Dave later wrote ,NA,NA
HTML 3.0,NA,NA
", based on his earlier HTML+ dra. Outside of the W3C’s own ",NA,NA
"reference implementation, ",NA,NA
Arena,NA,NA
"), HTML 3.0 was never implemented, and it was ",NA,NA
superseded by ,NA,NA
HTML 3.2,NA,NA
", another “retro-spec”: “",NA,NA
 HTML 3.2 adds widely deployed features,NA,NA
 ,NA,NA
"su as tables, applets and text flow around images, while providing full bawards ",NA,NA
compatibility with the existing standard HTML 2.0.”,NA,NA
Dave later co-authored ,NA,NA
HTML 4.0,NA,NA
", developed ",NA,NA
HTML Tidy,NA,NA
", and went on to help with XHTML, ",NA,NA
"XForms, MathML, and other modern W3C specifications.",NA,NA
"Geing ba to 1993, ",NA,NA
Marc replied to Dave,NA,NA
:,NA,NA
"Actually, maybe we should think about a general-purpose procedural ",NA,NA
graphics language within whi we can embed arbitrary hyperlinks aaed ,NA,NA
"to icons, images, or text, or anything. Has anyone else seen Intermedia’s ",NA,NA
capabilities wrt this?,NA,NA
Intermedia,NA,NA
 was a hypertext project from Brown University. It was developed from ,NA,NA
1985 to 1991 and ran on ,NA,NA
A/UX,NA,NA
", a Unix-like operating system for early Macintosh ",NA,NA
computers.,NA,NA
e idea of a “general-purpose procedural graphics language” did eventually cat on. ,NA,NA
Modern browsers support both ,NA,NA
SVG,NA,NA
 (declarative markup with embedded scripting) and ,<canvas>,NA
" (a procedural direct-mode graphics API), although the laer ",NA,NA
started as a ,NA,NA
proprietary extension ,NA,NA
before being “retro-specced” by the ,NA,NA
WHATWG,NA,NA
.,NA,NA
Bill Janssen replied,NA,NA
:,NA,NA
Other systems to look at whi have this (fairly valuable) notion are Andrew and ,NA,NA
"Slate. Andrew is built with _insets_, ea of whi has some interesting type, suas ",NA,NA
"text, bitmap, drawing, animation, message, spreadsheet, etc. e notion of ",NA,NA
"arbitrary recursive embedding is present, so that an inset of any kind can be ",NA,NA
"embedded in any other kind whi supports embedding. For example, an inset ",NA,NA
"can be embedded at any point in the text of the text widget, or in any rectangular ",NA,NA
area,"diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
"in the drawing widget, or in any cell of the spreadsheet.",NA,NA
“Andrew” is a reference to the ,NA,NA
Andrew User Interface System,NA,NA
  (although at that time it ,NA,NA
was simply known as the ,NA,NA
Andrew Project,NA,NA
).,NA,NA
"Meanwhile, ",NA,NA
omas Fine had a different idea,NA,NA
:,NA,NA
Here’s my opinion. e best way to do images in WWW is by using MIME. I’m ,NA,NA
"sure postscript is already a supported subtype in MIME, and it deals very ",NA,NA
nicely with mixing text and graphics.,NA,NA
"But it isn’t cliable, you say? Yes your right. I suspect there is already an answer ",NA,NA
to this in display postscript. Even if there isn’t the addition to standard ,NA,NA
postscript is trivial. Define an anor command whi specifies the URL and uses ,NA,NA
the current path as a closed region for the buon. Since postscript deals so well ,NA,NA
"with paths, this makes arbitrary buon shapes trivial.",NA,NA
Display Postscript,NA,NA
 was an on-screen rendering tenology co-developed by Adobe and NeXT.,NA,NA
"is proposal was never implemented, but the idea that the best way to fix HTML is to ",NA,NA
replace it with something else altogether ,NA,NA
still pops up from time to time,NA,NA
.,NA,NA
"Tim Berners-Lee, Mar 2, 1993",NA,NA
:,NA,NA
HTTP2 allows a document to contain any type whi the user has said he can ,NA,NA
"handle, not just registered MIME types. So one can experiment. Yes I think ",NA,NA
there is a case for postscript with hypertext. I don’t know whether display ,NA,NA
postcript has enough. I know Adobe are trying to establish their own ,NA,NA
"postscript-based “PDF”whi will have links, and be readable by their ",NA,NA
proprietory brand of viewers.,NA,NA
I thought that a generic overlaying language for anors (Hytime based?) ,NA,NA
would allow the hypertext and the graphics/video standards to evolve ,NA,NA
"separately, whiwould help both.",NA,NA
Let the ,IMG,NA
 tag be ,INCLUDE,NA
 and let it refer to an arbitrary document type. Or ,EMBED,NA
 if ,INCLUDE,NA
 sounds like a cpp include whi people will expect to provide,NA,NA
SGML source code to be parsed inline — not what was intended.,NA,NA
HyTime,NA,NA
" was an early, SGML-based hypertext document system. It loomed large in ",NA,NA
"early discussions of HTML, and later XML.",NA,NA
Tim’s proposal for an ,<INCLUDE>,NA
" tag was never implemented, although you can see eoes ",NA,NA
of it in ,<object>,NA
", ",<embed>,NA
", and the ",<iframe>,NA
 element.,NA,NA
"Finally, on Mar 12, 1993, ",NA,NA
Marc Andreessen revisited the thread,NA,NA
:,NA,NA
Ba to the inlined image thread again — I’m geing close to releasing ,NA,NA
"Mosaic v0.10, whi will support inlined GIF and XBM images/bitmaps, as ",NA,NA
mentioned previously. …,NA,NA
We’re not prepared to support ,INCLUDE,NA
/,EMBED,NA
 at this point. … So we’re ,NA,NA
probably going to go with ,"<IMG SRC=""url"">",NA
 (not ,ICON,NA
", since not all inlined ",NA,NA
"images can be meaningfully called icons). For the time being, inlined images ",NA,NA
won’t be ,NA,NA
"explicitly content-type’d; down the road, we plan to support that (along with the ",NA,NA
"general adaptation of MIME). Actually, the image reading routines we’re ",NA,NA
"currently using figure out the image format on the fly, so the filename extension ",NA,NA
won’t even be significant.,NA,NA
❧,NA,NA
AN UNBROKEN LINE,NA,NA
I am extraordinarily fascinated with all aspects of this almost-17-year-old conversation that ,NA,NA
led to the creation of an HTML element that has been used on virtually every web page ever ,NA,NA
published. Consider:,NA,NA
HTTP still exists. HTTP successfully evolved from 0.9 ,NA,NA
into 1.0 and later 1.1. ,NA,NA
And still it evolves,NA,NA
.,NA,NA
HTML still exists. at rudimentary data format — it ,NA,NA
didn’t even support inline images! — successfully ,NA,NA
"evolved into 2.0, 3.2, 4.0. HTML is an unbroken line. A ",NA,NA
"twisted, knoed, snarled line, to be sure. ere were ",NA,NA
"plenty of “dead branes” in the evolutionary tree, places ",NA,NA
where standards-minded people got ahead of ,NA,NA
themselves (and ahead of authors and implementors).,NA,NA
"But still. Here we are, in 2010, and ",NA,NA
web pages from ,NA,NA
1990,NA,NA
 still render in modern browsers. I just loaded ,NA,NA
one up in the browser of my state-of-the-art Android ,NA,NA
"mobile phone, and I didn’t even get prompted to",NA,NA
“please wait while importing legacy format…”,NA,NA
HTML has always been a conversation between,NA,NA
"browser makers, authors, standards wonks, and other ",NA,NA
people who just showed up and liked to talk about angle braets. Most of the ,NA,NA
"successful versions of HTML have been “retro-specs,” cating up to the world while ",NA,NA
simultaneously trying to nudge it in the right direction. Anyone who tells you that ,NA,NA
"HTML should be kept “pure” (presumably by ignoring browser makers, or ignoring ",NA,NA
"authors, or both) is simply misinformed. HTML has never been pure, and all aempts ",NA,NA
"to purify it have been spectacular failures, mated only by the aempts to replace it.",NA,NA
None of the browsers from 1993 still exist in any recognizable form. Netscape Navigator ,NA,NA
was ,NA,NA
abandoned in 1998,NA,NA
 and ,NA,NA
rewrien from scrat,NA,NA
" to create the Mozilla Suite, whi was ",NA,NA
then ,NA,NA
forked to create Firefox,NA,NA
. Internet Explorer had its humble “beginnings” in ,NA,NA
"“MicrosoPlus! for Windows 95,” where it was bundled with some desktop themes and a ",NA,NA
pinball game. (But of course that browser ,NA,NA
can be traced ba further too,NA,NA
 .),NA,NA
"Some of the operating systems from 1993 still exist, but none of them are relevant to ",NA,NA
the modern web. Most people today who “experience” the web do so on a PC running ,NA,NA
"Windows 2000 or later, a Mac running Mac OS X, a PC running some flavor of Linux, or a ",NA,NA
"handheld device like an iPhone. In 1993, Windows was at version 3.1 (and ",NA,NA
"competing with OS/2), Macs were running System 7, and Linux was distributed via ",NA,NA
Usenet. (Want to have some fun? Find a graybeard and whisper “Trumpet Winso” ,NA,NA
or“MacPPP.”),NA,NA
Some of the same ,NA,NA
people,NA,NA
 are still around and still involved in what we now simply ,NA,NA
call“web standards.” at’s aer almost 20 years. And some were involved in ,NA,NA
predecessors,"diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
"of HTML, going ba into the 1980s and before.",NA,NA
"Speaking of predecessors… With the eventual popularity of HTML and the web, it is easy ",NA,NA
to forget the contemporary formats and systems that informed its design. Andrew? ,NA,NA
Intermedia? HyTime? And HyTime was not some rinky-dink academic resear project; ,NA,NA
it ,NA,NA
was an ISO standard,NA,NA
. It was approved for military use. It was Big Business. And you can ,NA,NA
read about it yourself… ,NA,NA
"on this HTML page, in your web browser",NA,NA
 .,NA,NA
But none of this answers the original question: why do we have an ,<img>,NA
 element? Why not ,NA,NA
an ,<icon>,NA
 element? Or an ,<include>,NA
 element? Why not a hyperlink with an ,include,NA
"aribute, or some combination of ",rel,NA
 values? Why an ,<img>,NA
" element? ite simply, because ",NA,NA
"Marc Andreessen shipped one, and shipping code wins.",NA,NA
at’s not to say that ,NA,NA
all,NA,NA
" shipping code wins; aer all, Andrew and Intermedia and HyTime ",NA,NA
shipped code too. Code is necessary but not sufficient for success. And I ,NA,NA
certainly,NA,NA
 don’t ,NA,NA
mean to say that shipping code before a standard will produce the best solution. Marc’s ,<img>,NA
element didn’t mandate a common graphics format; it didn’t define how text flowed ,NA,NA
around it; it didn’t support text alternatives or fallba content for older browsers. And 17 ,NA,NA
"years later, ",NA,NA
we’re still struggling with content sniffing,NA,NA
", and it’s still ",NA,NA
a source of crazy ,NA,NA
security ,NA,NA
vulnerabilities,NA,NA
". And you can trace that all the way ba, 17 years, through the ",NA,NA
Great ,NA,NA
Browser Wars,NA,NA
", all the way ba to February 25, 1993, when Marc Andreessen oandedly ",NA,NA
"remarked,“MIME, someday, maybe,” and then shipped his code anyway.",NA,NA
e ones that win are the ones that ship.,NA,NA
❧,NA,NA
A TIMELINE OF HTML DEVELOPMENT ,NA,NA
FROM 1997 TO 2004,NA,NA
"In December 1997, the World Wide Web Consortium (W3C) published ",NA,NA
HTML 4.0,NA,NA
 and ,NA,NA
"promptly shut down the HTML Working Group. Less than two months later, a separate W3C ",NA,NA
Working Group published ,NA,NA
XML 1.0,NA,NA
". A mere three months aer that, the people who ran the ",NA,NA
W3C held a workshop called “,NA,NA
Shaping the Future of HTML,NA,NA
"” to answer the question, “Has ","diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
W3C given up on HTML?” is was their answer:,NA,NA
"In discussions, it was agreed that further extending HTML 4.0 would be difficult, ",NA,NA
as would converting 4.0 to be an XML application. e proposed way to break free ,NA,NA
of these restrictions is to make a fresh start with the next generation of HTML ,NA,NA
based upon a suite of XML tag-sets.,NA,NA
e W3C re-artered the HTML Working Group to create this “suite of XML tag-sets.” eir ,NA,NA
"first step, in December 1998, was a dra of an interim specification that simply ",NA,NA
reformulated HTML in XML,NA,NA
 without adding any new elements or aributes. is ,NA,NA
specification later became known as “,NA,NA
XHTML 1.0,NA,NA
.” It defined a new MIME type for XHTML ,NA,NA
"documents, ",application/xhtml+xml,NA
". However, to ease the migration of existing HTML 4 pages, it also ",NA,NA
included ,NA,NA
Appendix C,NA,NA
", that “summarizes design guidelines for authors who wish their ",NA,NA
XHTML documents to render on existing HTML user agents.” Appendix C said you were ,NA,NA
allowed to author so-called “XHTML” pages but still serve them with the ,text/html,NA
 MIME ,NA,NA
type.,NA,NA
"eir next target was web forms. In August 1999, the same HTML Working Group published ",NA,NA
a first dra of ,NA,NA
XHTML Extended Forms,NA,NA
. ey set the expectations ,NA,NA
in the first paragraph,NA,NA
:,NA,NA
"Aer careful consideration, the HTML Working Group has decided that the goals ",NA,NA
for the next generation of forms are incompatible with preserving bawards ,NA,NA
compatibility with browsers designed for earlier versions of HTML. It is our ,NA,NA
objective to provide a clean new forms model (“XHTML Extended Forms”) based ,NA,NA
on a set of well-defined requirements. e requirements described in this ,NA,NA
document are based on experience with a very broad spectrum of form ,NA,NA
applications.,NA,NA
"A few months later, “ XHTML Extended Forms” was renamed “XForms” and ",NA,NA
moved to its ,NA,NA
own Working Group,NA,NA
. at group worked in parallel with the HTML Working Group and ,NA,NA
finally published ,NA,NA
the first edition of XForms 1.0,NA,NA
  in October 2003.,NA,NA
"Meanwhile, with the transition to XML complete, the HTML Working Group set their sights ",NA,NA
"on creating “the next generation of HTML.” In May 2001, they published ",NA,NA
the first edition of ,NA,NA
XHTML 1.1,NA,NA
", that added ",NA,NA
only a few minor features,NA,NA
"  on top of XHTML 1.0, but also eliminated ",NA,NA
"the “Appendix C” loophole. Starting with version 1.1, all XHTML documents were to be ",NA,NA
served with a MIME type of ,application/xhtml+xml,NA
.,"diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
❧,NA,NA
EVERYTHING YOU KNOW ABOUT ,NA,NA
XHTML IS WRONG,NA,NA
Why are MIME types important? Why do I keep coming ba to them? ree words: ,NA,NA
draconian error handling,NA,NA
. Browsers have always been “forgiving” with HTML. If you create ,NA,NA
an HTML page but forget the ,</head>,NA
" tag, browsers will display the page anyway. (Certain ",NA,NA
tags implicitly trigger the end of the ,<head>,NA
 and the start of the ,<body>,NA
.) You are supposed ,NA,NA
to nest tags hierarically — closing them in last-in-first-out order — but if you create ,NA,NA
markup like ,<b><i></b></i>,NA
", browsers will just deal with it (somehow) and move on ",NA,NA
without displaying an error message.,NA,NA
"As you might expect, the fact that “broken” HTML markup still",NA,NA
worked in web browsers led authors to create broken HTML ,NA,NA
"pages. A lot of broken pages. By some estimates, over 99% of ",NA,NA
HTML pages on the web today have at least one error in ,NA,NA
them. But because these errors don’t cause browsers to ,NA,NA
"display visible error messages, nobody ever fixes them.",NA,NA
"e W3C saw this as a fundamental problem with the web, and ",NA,NA
"they set out to correct it. XML, published in 1997, broke from ",NA,NA
the tradition of forgiving clients and mandated that all ,NA,NA
programs that consumed XML must treat so-called “well-,NA,NA
formedness”errors as fatal. is concept of failing on the first ,NA,NA
"error became known as “draconian error handling,” aer the ",NA,NA
Greek leader ,NA,NA
Draco,NA,NA
 who instituted the death penalty for ,NA,NA
relatively minor,NA,NA
infractions of his laws. When the W3C reformulated HTML as ,NA,NA
"an XML vocabulary, they mandated that all documents ",NA,NA
served with the new ,application/xhtml+xml,NA
 MIME type would be subject to draconian ,NA,NA
error handling. If there was even a single well-formedness error in your XHTML page — ,NA,NA
su as forgeing the ,</head>,NA
 tag or improperly nesting start and end tags — web ,NA,NA
browsers would,NA,NA
have no oice but to stop processing and display an error message to the end user.,NA,NA
is idea was not universally popular. With an estimated error rate of 99% on existing ,NA,NA
"pages, the ever-present possibility of displaying errors to the end user, and the dearth of ",NA,NA
"new features in XHTML 1.0 and 1.1 to justify the cost, web authors basically ignored ",application/xhtml+xml,NA
". But that doesn’t mean they ignored XHTML altogether. Oh, most ",NA,NA
definitely not. Appendix C of the XHTML 1.0 specification gave the web authors of the ,NA,NA
"world a loophole: “Use something that looks kind of like XHTML syntax, but keep serving it ",NA,NA
with the ,text/html,NA
 MIME type.” And that’s exactly what thousands of web developers did: ,NA,NA
they “upgraded” to XHTML syntax but kept serving it with a ,text/html,NA
 MIME type.,NA,NA
"Even today, millions of web pages claim to be XHTML. ey start with the XHTML doctype ",NA,NA
"on the first line, use lowercase tag names, use quotes around aribute values, and add a ",NA,NA
trailing slash aer empty elements like ,<br />,NA
 and ,<hr />,NA
. But only a tiny fraction of ,NA,NA
these pages are served with the ,application/xhtml+xml,NA
 MIME type that would trigger ,NA,NA
XML’s draconian error handling. Any page served with a MIME type of ,text/html,NA
 —,NA,NA
"regardless of doctype, syntax, or coding style — will be parsed using a “forgiving” HTML ",NA,NA
"parser, silently ignoring any markup errors, and never alerting end users (or anyone else) ",NA,NA
even if the page is tenically broken.,NA,NA
"XHTML 1.0 included this loophole, but XHTML 1.1 closed it, and the never-finalized XHTML ",NA,NA
2.0 continued the tradition of requiring draconian error handling. And that’s why there are ,NA,NA
"billions of pages that claim to be XHTML 1.0, and only a handful that claim to be XHTML 1.1 ",NA,NA
"(or XHTML 2.0). So are you really using XHTML? Che your MIME type. (Actually, if you ",NA,NA
"don’t know what MIME type you’re using, I can prey mu guarantee that you’re still using ",text/html,NA
.) Unless you’re serving your pages with a MIME type of ,application/xhtml+xml,NA
", your so-called “ XHTML” is XML in name only.",NA,NA
❧,NA,NA
A COMPETING VISION,NA,NA
"In June 2004, the W3C held the ",NA,NA
Workshop on Web Applications and Compound Documents,NA,NA
.,NA,NA
"Present at this workshop were representatives of three browser vendors, web development ","diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
"companies, and other W3C members. A group of interested parties, including the Mozilla ",NA,NA
"Foundation and Opera Soware, gave a presentation on their competing vision of the future ",NA,NA
of the web: ,NA,NA
an evolution of the existing HTML 4 standard to include new features for ,NA,NA
modern web application developers,NA,NA
.,NA,NA
e following seven principles represent what we believe to be the most ,NA,NA
critical requirements for this work.,NA,NA
"Bawards compatibility, clear migration path ",NA,NA
Web application tenologies should be based on tenologies authors ,NA,NA
"are familiar with, including HTML, CSS, DOM, and JavaScript.",NA,NA
"Basic Web application features should be implementable using behaviors, ",NA,NA
"scripting, and style sheets in IE6 today so that authors have a clear ",NA,NA
migration path. Any solution that cannot be used with the current high-,NA,NA
market-share user agent without the need for binary plug-ins is highly ,NA,NA
unlikely to be successful.,NA,NA
Well-defined error handling ,NA,NA
Error handling in Web applications must be defined to a level of detail ,NA,NA
where User Agents do not have to invent their own error handling ,NA,NA
meanisms or reverse engineer other User Agents’.,NA,NA
Users should not be exposed to authoring errors ,NA,NA
Specifications must specify exact error recovery behaviour for ea ,NA,NA
possible error scenario. Error handling should for the most part be ,NA,NA
"defined in terms of graceful error recovery (as in CSS), rather than ",NA,NA
obvious and catastrophic failure (as in XML).,NA,NA
Practical use ,NA,NA
Every feature that goes into the Web Applications specifications must be ,NA,NA
justified by a practical use case. e reverse is not necessarily true: every ,NA,NA
use case does not necessarily warrant a new feature.,NA,NA
Use cases should preferably be based on real sites where the ,NA,NA
authors previously used a poor solution to work around the ,NA,NA
limitation.,NA,NA
Scripting is here to stay ,NA,NA
But should be avoided where more convenient declarative markup can ,NA,NA
be used.,NA,NA
Scripting should be device and presentation neutral unless scoped in a ,NA,NA
device-specific way (e.g. unless included in XBL).,NA,NA
Device-specific profiling should be avoided ,NA,NA
Authors should be able to depend on the same features being implemented ,NA,NA
in desktop and mobile versions of the same UA.,NA,NA
Open process,NA,NA
e Web has benefited from being developed in an open environment. ,NA,NA
"Web Applications will be core to the web, and its development should ",NA,NA
"also take place in the open. Mailing lists, arives and dra specifications ",NA,NA
should continuously be visible to the public.,NA,NA
"In a straw poll, the workshop participants were asked, “Should the W3C develop ",NA,NA
"declarative extension to HTML and CSS and imperative extensions to DOM, to address ",NA,NA
"medium level Web Application requirements, as opposed to sophisticated, fully-fledged ",NA,NA
"OS-level APIs? (proposed by Ian Hison, Opera Soware)” e vote was 11 to 8 against. In ",NA,NA
their ,NA,NA
summary of the workshop,NA,NA
", the W3C wrote, “At present, W3C does not intend to put ",NA,NA
any resources into the third straw-poll topic: extensions to HTML and CSS for Web ,NA,NA
"Applications, other than tenologies being developed under the arter of current W3C ",NA,NA
Working Groups.”,NA,NA
"Faced with this decision, the people who had proposed evolving HTML and HTML forms had ",NA,NA
"only two oices: give up, or continue their work outside of the W3C. ey ose the laer and ",NA,NA
registered the ,whatwg.org,NA
" domain, and in June 2004, ",NA,NA
the WHAT Working Group was born,NA,NA
.,NA,NA
❧,NA,NA
WHAT WORKING GROUP?,"diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
What the he is the WHAT Working Group? I’ll let them ,NA,NA
explain it for themselves,NA,NA
 :,NA,NA
e Web Hypertext Applications Tenology Working Group ,NA,NA
"is a loose, unofficial, and open collaboration of Web ",NA,NA
browser manufacturers and interested parties. e group ,NA,NA
aims to develop specifications based on HTML and related ,NA,NA
tenologies to ease the deployment of interoperable Web ,NA,NA
"Applications, with the intention of submiing the results to ",NA,NA
a standards organisation. is submission would then form ,NA,NA
the basis of work on formally extending HTML in the ,NA,NA
standards tra.,NA,NA
e creation of this forum follows from several months of ,NA,NA
work by private e-mail on specifications for su,NA,NA
tenologies. e main focus up to this point has been ,NA,NA
extending HTML4 Forms to support features requested by ,NA,NA
"authors, without breaking bawards compatibility with ",NA,NA
existing content. is group was created to ensure that ,NA,NA
future,NA,NA
development of these specifications will be completely ,NA,NA
"open, through a publicly-arived, open mailing list.",NA,NA
e key phrase here is “without breaking baward compatibility.” XHTML (minus the ,NA,NA
Appendix C loophole) is not bawardly compatible with HTML. It requires an entirely new ,NA,NA
"MIME type, and it mandates draconian error handling for all content served with that ",NA,NA
"MIME type. XForms is not bawardly compatible with HTML forms, because it can only be ",NA,NA
"used in documents that are served with the new XHTML MIME type, whi means that ",NA,NA
XForms also mandates draconian error handling. All roads lead to MIME.,NA,NA
Instead of scrapping over a decade’s worth of investment in HTML and making 99% of ,NA,NA
"existing web pages unusable, the WHAT Working Group decided to take a different ",NA,NA
approa: documenting the “forgiving” error-handling algorithms that browsers actually ,NA,NA
"used. Web browsers have always been forgiving of HTML errors, but nobody had ever ",NA,NA
bothered to write down exactly how they did it. NCSA Mosaic had its own algorithms for ,NA,NA
"dealing with broken pages, and Netscape tried to mat them. en Internet Explorer tried to ",NA,NA
mat Netscape. en Opera and Firefox tried to mat Internet Explorer. en Safari tried to ,NA,NA
mat Firefox. And so,NA,NA
"on, right up to the present day. Along the way, developers burned thousands and ",NA,NA
thousands of hours trying to make their products compatible with their competitors’.,NA,NA
"If that sounds like an insane amount of work, that’s because it is. Or rather, it was. It took ",NA,NA
"five years, but (modulo a few obscure edge cases) the WHAT Working Group successfully ",NA,NA
documented ,NA,NA
how to parse HTML,NA,NA
 in a way that is compatible with existing web content. ,NA,NA
Nowhere in the final algorithm is there a step that mandates that the HTML consumer ,NA,NA
should stop processing and display an error message to the end user.,NA,NA
"While all that reverse-engineering was going on, the WHAT working group was quietly ",NA,NA
"working on a few other things, too. One of them was a specification, initially dubbed ",NA,NA
Web ,NA,NA
Forms 2.0,NA,NA
", that added new types of controls to HTML forms. (You’ll learn more about web ",NA,NA
forms in ,NA,NA
A Form of Madness,NA,NA
.) Another was a dra specification called “Web Applications ,NA,NA
"1.0,” that included major new features like ",NA,NA
a direct-mode drawing canvas,NA,NA
 and native ,NA,NA
support for ,NA,NA
audio and video without plugins,NA,NA
.,NA,NA
❧,NA,NA
BACK TO THE W3C,NA,NA
"For two and a half years, the W3C and the ",NA,NA
WHAT Working Group largely ,NA,NA
ignored ea other. While the WHAT ,NA,NA
Working Group focused on web forms ,NA,NA
"and new HTML features, the W3C HTML ",NA,NA
Working Group was busy with version ,NA,NA
"2.0 of XHTML. But by October 2006, it ",NA,NA
was clear that the WHAT Working Group ,NA,NA
"had pied up serious momentum, while ",NA,NA
XHTML 2 was still languishing in ,NA,NA
"draform, unimplemented by any major ",NA,NA
"browser. In October 2006, Tim Berners-",NA,NA
"Lee, the founder of the W3C itself, ",NA,NA
announced that the W3C would work together with the WHAT Working Group,NA,NA
  to evolve ,"diveintohtml5.org
  
  HOW DID WE GET HERE?",NA
HTML.,NA,NA
Some things are clearer with hindsight of several years. It is necessary to evolve ,NA,NA
"HTML incrementally. e aempt to get the world to swit to XML, including ",NA,NA
quotes around aribute values and slashes in empty tags and namespaces all at ,NA,NA
"once didn’t work. e large HTML-generating public did not move, largely ",NA,NA
because the browsers didn’t complain. Some large communities did shi and are ,NA,NA
"enjoying the fruits of well-formed systems, but not all. It is important to maintain ",NA,NA
"HTML incrementally, as well as continuing a transition to well-formed world, ",NA,NA
and ,NA,NA
developing more power in that world.,NA,NA
"e plan is to arter a completely new HTML group. Unlike the previous one, this ",NA,NA
"one will be artered to do incremental improvements to HTML, as also in ",NA,NA
parallel xHTML. It will have a different air and staff contact. It will work on ,NA,NA
"HTML and xHTML together. We have strong support for this group, from many ",NA,NA
"people we have talked to, including browser makers.",NA,NA
"ere will also be work on forms. is is a complex area, as existing HTML forms ",NA,NA
"and XForms are both form languages. HTML forms are ubiquitously deployed, ",NA,NA
"and there are many implementations and users of XForms. Meanwhile, the ",NA,NA
Webforms submission has suggested sensible extensions to HTML forms. e ,NA,NA
"plan is, ",NA,NA
"informed by Webforms, to extend HTML forms.",NA,NA
One of the first things the newly re-artered W3C HTML Working Group decided was ,NA,NA
"to rename “Web Applications 1.0” to “HTML5.” And here we are, diving into HTML5.",NA,NA
❧,NA,NA
POSTSCRIPT,NA,NA
"In October 2009, the W3C ",NA,NA
shut down the XHTML 2 Working Group,NA,NA
  and ,NA,NA
issued this ,NA,NA
statement to explain their decision,NA,NA
:,NA,NA
"When W3C announced the HTML and XHTML 2 Working Groups in Mar 2007, ",NA,NA
we indicated that we would continue to monitor the market for XHTML 2. W3C ,NA,NA
recognizes the importance of a clear signal to the community about the future ,NA,NA
of HTML.,NA,NA
While we recognize the value of the XHTML 2 Working Group’s contributions ,NA,NA
"over the years, aer discussion with the participants, W3C management has ",NA,NA
decided to allow the Working Group’s arter to expire at the end of 2009 and ,NA,NA
not to renew it.,NA,NA
e ones that win are the ones that ship.,NA,NA
❧,NA,NA
FURTHER READING,NA,NA
e History of the Web,NA,NA
", an old dra by Ian Hison",NA,NA
HTML/History,NA,NA
", by Miael Smith, Henri Sivonen, and others",NA,NA
A Brief History of HTML,NA,NA
", by Sco Reynen",NA,NA
❧,NA,NA
is has been “How Did We Get Here?” e ,NA,NA
full table of contents,NA,NA
 has more if you’d like to ,NA,NA
keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid,NA,NA
edition.,"diveintohtml5.org
  
  
  HOW DID WE GET HERE?",NA
If you liked this apter and want to show your ,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & ,NA,NA
Running”with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic ,NA,NA
edition directly from O’Reilly,NA,NA
". You’ll get a book, and ",NA,NA
I’ll get a bu. I do not currently accept direct ,NA,NA
donations.,"Copyright MMIX–MMX Mark Pilgrim
  
 diveintohtml5.org",NA
powered by Google™,NA,NA
Search,HOW DID WE GET HERE?,NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
2. ,NA,NA
. ,NA,NA
DETECTING ,NA,NA
HTML5 ,NA,NA
FEATURES,NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
ou may well ask: “How can I start using HTML5 if older browsers don’t ,NA,NA
support it?” But the question itself is misleading. HTML5 is not one big ,NA,NA
thing; it is a collection of individual features. So you can’t detect “HTML5 ,NA,NA
"support,”because that doesn’t make any sense. But you ",NA,NA
can,NA,NA
 detect support ,NA,NA
for,NA,NA
"individual features, like canvas, video, or geolocation.",NA,NA
❧,NA,NA
DETECTION TECHNIQUES,NA,NA
"When your browser renders a web page, it constructs a Document Object Model ( DOM), a",NA,NA
collection of objects that represent the HTML elements on the page. Every element — every,NA,NA
<p>,NA,NA
", every ",NA,NA
<div>,NA,NA
", every ",NA,NA
<span>,NA,NA
 — is represented in the DOM by a different object. (ere,NA,NA
"are also global objects, like ",NA,NA
window,NA,NA
 and ,NA,NA
document,NA,NA
", that aren’t tied to specific elements.)",NA,NA
"All DOM objects share a set of common properties, but ",NA,NA
some objects have more than others. In browsers that ,NA,NA
"support HTML5 features, certain objects will have ",NA,NA
unique properties. A qui peek at the DOM will tell ,NA,NA
you whi features are supported.,NA,NA
ere are four basic teniques for detecting whether ,NA,NA
a browser supports a particular feature. From ,NA,NA
simplest to most complex:,NA,NA
1. Che if a certain property exists on a global ,NA,NA
object (su as ,NA,NA
window,NA,NA
 or ,NA,NA
navigator,NA,NA
).,NA,NA
Example: ,NA,NA
testing for geolocation support,NA,NA
"2. Create an element, then e if a certain",NA,NA
property exists on that element.,NA,NA
Example: ,NA,NA
testing for canvas support,NA,NA
"3. Create an element, e if a certain method exists on that element, then call the",NA,NA
method and e the value it returns.,NA,NA
Example: ,NA,NA
testing whi video formats are supported,NA,NA
"4. Create an element, set a property to a certain value, then e if the property has",NA,NA
retained its value.,NA,NA
Example: ,NA,NA
testing whi ,NA,NA
<input>,NA,NA
 types are supported,NA,NA
❧,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
"MODERNIZR, AN HTML5 DETECTION ",NA,NA
LIBRARY,NA,NA
Modernizr,NA,NA
" is an open source, MIT-licensed JavaScript library that detects support for ",NA,NA
many HTML5 ,NA,NA
&,NA,NA
" CSS3 features. At the time of writing, the latest version is 1.5. You should ",NA,NA
"always use the latest version. To use it, include the following ",NA,NA
<script>,NA,NA
 element at the top ,NA,NA
of your page.,NA,NA
<!DOCTYPE html> ,NA,NA
<html> ,NA,NA
<head> ,NA,NA
"<meta charset=""utf-8"">",NA,NA
<title>Dive Into HTML5</title>,NA,NA
"<script src=""modernizr.min.js""></script>",NA,NA
</head>,NA,NA
↜,NA,NA
 It goes to ,NA,NA
your <head>,NA,NA
<body> ,NA,NA
...,NA,NA
</body> ,NA,NA
</html>,NA,NA
Modernizr runs automatically. ere is no ,NA,NA
modernizr_init(),NA,NA
" function to call. When it runs, ",NA,NA
it creates a global object called ,NA,NA
Modernizr,NA,NA
", that contains a set of Boolean properties for ea ",NA,NA
"feature it can detect. For example, if your browser supports the ",NA,NA
canvas API,NA,NA
", the ",NA,NA
Modernizr.canvas,NA,NA
 property will be ,NA,NA
true,NA,NA
". If your browser does not support the canvas API, ",NA,NA
the ,NA,NA
Modernizr.canvas,NA,NA
 property will be ,NA,NA
false,NA,NA
.,NA,NA
if (Modernizr.canvas) { ,NA,NA
// let's draw some shapes!,NA,NA
} else { ,NA,NA
// no native canvas support available :( },NA,NA
❧,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
CANVAS,NA,NA
HTML5 defines ,NA,NA
the <canvas> element,NA,NA
 as “a ,NA,NA
resolution-dependent bitmap canvas that can be ,NA,NA
"used for rendering graphs, game graphics, or ",NA,NA
other visual images on the fly.” A canvas is a ,NA,NA
rectangle in your page where you can use ,NA,NA
JavaScript to draw anything you want. HTML5 ,NA,NA
defines a set of functions (“the canvas API”) for ,NA,NA
"drawing shapes, defning paths, creating ",NA,NA
"gradients,",NA,NA
and applying transformations.,NA,NA
Your browser supports the canvas API.,NA,NA
Cheing for the canvas API uses ,NA,NA
detection tenique #2,NA,NA
. If your browser supports the ,NA,NA
"canvas API, the DOM object it creates to represent a ",NA,NA
<canvas>,NA,NA
 element will have a ,NA,NA
getContext(),NA,NA
 method,NA,NA
". If your browser doesn’t support the canvas API, the DOM object it ",NA,NA
creates for a ,NA,NA
<canvas>,NA,NA
" element will only have the set of common properties, but not ",NA,NA
anything canvas-specific.,NA,NA
function supports_canvas() {,NA,NA
return !!document.createElement('canvas').getContext;,NA,NA
},NA,NA
is function starts by creating a dummy ,NA,NA
<canvas>,NA,NA
 element. But the element is never ,NA,NA
"aaed to your page, so no one will ever see it. It’s just floating in memory, going nowhere ",NA,NA
"and doing nothing, like a canoe on a lazy river.",NA,NA
return !!document.createElement('canvas').getContext;,NA,NA
As soon as you create the dummy ,NA,NA
<canvas>,NA,NA
" element, you test for the presence of a ",NA,NA
getContext(),NA,NA
 method. is method will only exist if your browser supports the canvas ,NA,NA
API.,NA,NA
return !!document.createElement('canvas').getContext;,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
"Finally, you use the double-negative tri to force the result to a Boolean value (",NA,NA
 true,NA,NA
 ,NA,NA
or ,NA,NA
false,NA,NA
).,NA,NA
return !!document.createElement('canvas').getContext;,NA,NA
"is function will detect support for most of the canvas API, including ",NA,NA
shapes,NA,NA
", ",NA,NA
paths,NA,NA
", ",NA,NA
gradients ,NA,NA
&,NA,NA
 paerns,NA,NA
. It will not detect the third-party ,NA,NA
explorercanvas,NA,NA
 ,NA,NA
library,NA,NA
 that implements the canvas API in Microso Internet Explorer.,NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 to detect support for ,NA,NA
the canvas API.,NA,NA
↶,NA,NA
 check for canvas support,NA,NA
if (Modernizr.canvas) {,NA,NA
// let's draw some shapes!,NA,NA
} else {,NA,NA
// no native canvas support available :(,NA,NA
},NA,NA
"ere is a separate test for the canvas text API, whi I will demonstrate next.",NA,NA
❧,NA,NA
CANVAS TEXT,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
Even if your browser supports ,NA,NA
the ,NA,NA
canvas API,NA,NA
", it might not ",NA,NA
support the canvas text API. e ,NA,NA
"canvas API grew over time, and ",NA,NA
the text functions were added ,NA,NA
late in the game. Some browsers ,NA,NA
shipped ,NA,NA
with canvas support before the ,NA,NA
text API was complete.,NA,NA
Cheing for the canvas text API ,NA,NA
uses ,NA,NA
detection tenique #2,NA,NA
. If,NA,NA
Your browser supports the canvas text API.,NA,NA
your browser supports the canvas ,NA,NA
"API, the DOM object it creates to represent a ",NA,NA
<canvas>,NA,NA
 element will have the ,NA,NA
getContext(),NA,NA
 method,NA,NA
". If your browser doesn’t support the canvas API, the DOM object it ",NA,NA
creates for a ,NA,NA
<canvas>,NA,NA
" element will only have the set of common properties, but not ",NA,NA
anything canvas-specific.,NA,NA
function supports_canvas_text() {,NA,NA
if (!supports_canvas()) { return false; },NA,NA
var dummy_canvas = document.createElement('canvas');,NA,NA
var context = dummy_canvas.getContext('2d');,NA,NA
return typeof context.fillText == 'function';,NA,NA
},NA,NA
e function starts by ,NA,NA
eing for canvas support,NA,NA
", using the ",NA,NA
supports_canvas(),NA,NA
 function ,NA,NA
"you just saw in the previous section. If your browser doesn’t support the canvas API, it ",NA,NA
certainly won’t support the canvas text API!,NA,NA
if (!supports_canvas()) { return false; },NA,NA
"Next, you create a dummy ",NA,NA
<canvas>,NA,NA
 element and get its drawing context. is is guaranteed ,NA,NA
"to work, because the ",NA,NA
supports_canvas(),NA,NA
 function already eed that the ,NA,NA
getContext(),NA,NA
 method exists on all canvas objects.,NA,NA
var dummy_canvas = document.createElement('canvas');,NA,NA
var context = dummy_canvas.getContext('2d');,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
"Finally, you e whether the drawing context has a ",NA,NA
fillText(),NA,NA
" function. If it does, the ",NA,NA
canvas text API is available. Hooray!,NA,NA
return typeof context.fillText == 'function';,NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 to detect support for ,NA,NA
the canvas text API.,NA,NA
↶,NA,NA
 check for canvas text support,NA,NA
if (Modernizr.canvastext) {,NA,NA
// let's draw some text!,NA,NA
} else {,NA,NA
// no native canvas text support available :(,NA,NA
},NA,NA
❧,NA,NA
VIDEO,NA,NA
HTML5 defines a new element called ,NA,NA
<video>,NA,NA
 for embedding video in your web pages. ,NA,NA
Embedding video used to be impossible without third-party plugins su as ,NA,NA
AppleiTime® or Adobe Flash®.,NA,NA
e ,NA,NA
<video>,NA,NA
 element is designed to be usable without any ,NA,NA
"detection scripts. You can specify multiple video files, and ",NA,NA
browsers that support HTML5 video will oose one based ,NA,NA
on what video formats they support. (See “A gentle ,NA,NA
introduction to video encoding” ,NA,NA
part 1: container formats,NA,NA
and ,NA,NA
part 2: lossy video codecs,NA,NA
 to learn about different ,NA,NA
video formats.),"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
Browsers that don’t support HTML5 video will ignore the ,NA,NA
<video>,NA,NA
" element completely, but you can use this to ",NA,NA
your advantage and tell them to play video through a ,NA,NA
third-party plugin instead. Kroc Camen has designed a ,NA,NA
solution called,NA,NA
Video for Everybody!,NA,NA
 that uses HTML5 video where ,NA,NA
"available, but falls ba to iTime or Flash in older",NA,NA
Your browser does not ,NA,NA
support HTML5 video. :(,NA,NA
"browsers. is solution uses no JavaScript whatsoever, ",NA,NA
"and it works in virtually every browser, including ",NA,NA
mobile browsers.,NA,NA
"If you want to do more with video than plop it on your page and play it, you’ll need to use ",NA,NA
JavaScript. Cheing for video support uses ,NA,NA
detection tenique #2,NA,NA
. If your browser ,NA,NA
"supports HTML5 video, the DOM object it creates to represent a ",NA,NA
<video>,NA,NA
 element will ,NA,NA
have a ,NA,NA
canPlayType(),NA,NA
" method. If your browser doesn’t support HTML5 video, the DOM ",NA,NA
object it creates for a ,NA,NA
<video>,NA,NA
 element will have only the set of properties common to all ,NA,NA
elements.,NA,NA
You can e for video support using this function:,NA,NA
function supports_video() { ,NA,NA
return !!document.createElement('video').canPlayType; },NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 to detect support for ,NA,NA
HTML5 video.,NA,NA
↶,NA,NA
 check for ,NA,NA
 check for ,NA,NA
HTML5 ,NA,NA
HTML5,NA,NA
 video ,NA,NA
support,NA,NA
if (Modernizr.video) {,NA,NA
// let's play some video!,NA,NA
} else { ,NA,NA
// no native video support available :( ,NA,NA
// maybe check for QuickTime or Flash instead ,NA,NA
},NA,NA
In ,NA,NA
the Video apter,NA,NA
", I’ll explain another solution that uses these detection teniques ",NA,NA
to convert ,NA,NA
<video>,NA,NA
" elements to Flash-based video players, for the benefit of browsers ",NA,NA
that don’t support HTML5 video.,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
"ere is a separate test for detecting whi video formats your browser can play, whi I will ",NA,NA
demonstrate next.,NA,NA
❧,NA,NA
VIDEO FORMATS,NA,NA
Video formats are like wrien languages. An English newspaper may convey the same ,NA,NA
"information as a Spanish newspaper, but if you can only read English, only one of them ",NA,NA
"will be useful to you! To play a video, your browser needs to understand the “language” in ",NA,NA
whithe video was wrien.,NA,NA
e “language” of a video is called a “codec” — this is ,NA,NA
the algorithm used to encode the video into a stream of ,NA,NA
bits. ere are dozens of codecs in use all over the ,NA,NA
world. Whi one should you use? e unfortunate ,NA,NA
reality of HTML5 video is that browsers can’t agree on ,NA,NA
"a single codec. However, they seem to have narrowed ",NA,NA
it down to two. One codec costs money (because of ,NA,NA
"patent licensing), but it works in ",NA,NA
Safari,NA,NA
 and on the ,NA,NA
iPhone. (is one also works in Flash if you use a ,NA,NA
solution like ,NA,NA
Video for Everybody!,NA,NA
) e other codec is ,NA,NA
free and works,NA,NA
Your browser does not support ,NA,NA
any video formats. :(,NA,NA
in open source browsers like ,NA,NA
Chromium,NA,NA
 and ,NA,NA
Mozilla Firefox,NA,NA
.,NA,NA
Cheing for video format support uses ,NA,NA
detection tenique #3,NA,NA
. If your browser ,NA,NA
"supports HTML5 video, the DOM object it creates to represent a ",NA,NA
<video>,NA,NA
 element will ,NA,NA
have a ,NA,NA
canPlayType(),NA,NA
 method. is method will tell you whether the browser ,NA,NA
supports a particular video format.,NA,NA
is function es for the patent-encumbered format supported by Macs and iPhones.,NA,NA
function supports_h264_baseline_video() { ,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
if (!supports_video()) { return false; } ,NA,NA
"var v = document.createElement(""video""); ",NA,NA
"return v.canPlayType('video/mp4; codecs=""avc1.42E01E, ",NA,NA
"mp4a.40.2""'); ",NA,NA
},NA,NA
e function starts by ,NA,NA
eing for HTML5 video support,NA,NA
", using the ",NA,NA
supports_video() ,NA,NA
function you just saw in the previous section. If your browser doesn’t support HTML5 ,NA,NA
"video, it certainly won’t support any video formats!",NA,NA
if (!supports_video()) { return false; },NA,NA
en the function creates a dummy ,NA,NA
<video>,NA,NA
" element (but doesn’t aa it to the page, so it ",NA,NA
won’t be visible) and calls the ,NA,NA
canPlayType(),NA,NA
 method. is method is guaranteed to be ,NA,NA
"there, because the ",NA,NA
supports_video(),NA,NA
 function just eed for it.,NA,NA
"var v = document.createElement(""video"");",NA,NA
"A “video format” is really a combination of different things. In tenical terms, you’re ",NA,NA
asking the browser whether it can play H.264 Baseline video and AAC LC audio in an ,NA,NA
MPEG-4 container. (I’ll explain what all that means in ,NA,NA
the Video apter,NA,NA
. You might also be ,NA,NA
interested in reading ,NA,NA
A gentle introduction to video encoding,NA,NA
.),NA,NA
"return v.canPlayType('video/mp4; codecs=""avc1.42E01E, mp4a.40.2""",NA,NA
');,NA,NA
e ,NA,NA
canPlayType(),NA,NA
 function doesn’t return ,NA,NA
true,NA,NA
 or ,NA,NA
false,NA,NA
. In recognition of how ,NA,NA
"complex video formats are, the function returns a string:",NA,NA
"""probably""",NA,NA
 if the browser is fairly confident it can play this format,NA,NA
"""maybe""",NA,NA
 if the browser thinks it might be able to play this format ,NA,NA
"""""",NA,NA
 ,NA,NA
(an empty string) if the browser is certain it can’t play this format,NA,NA
is second function es for the open video format supported by Mozilla Firefox and ,NA,NA
other open source browsers. e process is exactly the same; the only difference is the ,NA,NA
string you pass in to the ,NA,NA
canPlayType(),NA,NA
" function. In tenical terms, you’re asking the ",NA,NA
browser,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
whether it can play eora video and Vorbis audio in an Ogg container.,NA,NA
function supports_ogg_theora_video() { if ,NA,NA
(!supports_video()) { return false; } var ,NA,NA
"v = document.createElement(""video"");",NA,NA
"return v.canPlayType('video/ogg; codecs=""theora, vorbis""');",NA,NA
},NA,NA
"Finally, ",NA,NA
WebM,NA,NA
 is a newly open-sourced (and non-patent-encumbered) video codec that ,NA,NA
"will be included in the next version of major browsers, including Chrome, ",NA,NA
Firefox,NA,NA
", and ",NA,NA
Opera,NA,NA
. You can use the same tenique to detect support for open WebM video.,NA,NA
function supports_webm_video() { ,NA,NA
if (!supports_video()) { return false; } ,NA,NA
"var v = document.createElement(""video"");",NA,NA
"return v.canPlayType('video/webm; codecs=""vp8, vorbis""');",NA,NA
},NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 (1.5 or later) to detect ,NA,NA
support for different HTML5 video formats.,NA,NA
↶,NA,NA
 check for ,NA,NA
 check for ,NA,NA
HTML5 ,NA,NA
HTML5,NA,NA
 video ,NA,NA
formats,NA,NA
if (Modernizr.video) { ,NA,NA
// let's play some video! but what kind?,NA,NA
if (Modernizr.video.webm) {,NA,NA
// try WebM,NA,NA
} else if (Modernizr.video.ogg) {,NA,NA
// try Ogg Theora + Vorbis in an Ogg container,NA,NA
} else if (Modernizr.video.h264){,NA,NA
// try H.264 video + AAC audio in an MP4 container } ,NA,NA
},"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
❧,NA,NA
LOCAL STORAGE,NA,NA
HTML5 storage,NA,NA
 provides a way for web sites to store information on ,NA,NA
"your computer and retrieve it later. e concept is similar to cookies, ",NA,NA
but it’s designed for larger quantities of information. Cookies are ,NA,NA
"limited in size, and your browser sends them ba to the web server ",NA,NA
every time it requests a new page (whi takes extra time and ,NA,NA
"precious bandwidth). HTML5 storage stays on your computer, and ",NA,NA
web sites can access it with JavaScript aer the page is loaded.,NA,NA
Your browser does ,NA,NA
not support HTML5 ,NA,NA
storage. :(,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Is local storage really part of HTML5? Why ,NA,NA
is it in a separate specification?,NA,NA
"A: e short answer is yes, local storage is part ",NA,NA
of HTML5. e slightly longer answer is that ,NA,NA
local storage used to be part of the main ,NA,NA
"HTML5 specification, but it was split out into a",NA,NA
separate specification because some people ,NA,NA
in the HTML5 Working Group complained ,NA,NA
that HTML5 was too big. If that sounds like ,NA,NA
slicing a pie into more pieces to reduce the ,NA,NA
total,"diveintohtml5.org
  
  
  DETECTING HTML5 
 FEATURES",NA
"number of calories… well, welcome to ",NA,NA
the way world of standards.,NA,NA
Cheing for HTML5 storage support uses ,NA,NA
detection tenique #1,NA,NA
. If your browser ,NA,NA
"supports HTML5 storage, there will be a ",NA,NA
localStorage,NA,NA
 property on the global ,NA,NA
window,NA,NA
 ,NA,NA
"object. If your browser doesn’t support HTML5 storage, the ",NA,NA
localStorage,NA,NA
 property will ,NA,NA
"be undefined. Due to an unfortunate bug in older versions of Firefox, this test will raise an ",NA,NA
"exception if cookies are disabled, so the entire test is wrapped in a ",NA,NA
try..catch,NA,NA
 ,NA,NA
statement.,NA,NA
function supports_local_storage() { ,NA,NA
try { ,NA,NA
return 'localStorage' in window && window['localStorage'] !== ,NA,NA
null; ,NA,NA
} catch(e){ ,NA,NA
return false; ,NA,NA
} ,NA,NA
},NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 (1.1 or later) to detect ,NA,NA
support for HTML5 local storage.,NA,NA
↶,NA,NA
 check for ,NA,NA
 check for ,NA,NA
HTML5 ,NA,NA
HTML5,NA,NA
 local ,NA,NA
storage,NA,NA
if (Modernizr.localstorage) {,NA,NA
// window.localStorage is available!,NA,NA
} else { ,NA,NA
// no native support for local storage :( ,NA,NA
// maybe try Gears or another third-party solution },NA,NA
Note that JavaScript is case-sensitive. e Modernizr aribute is called ,NA,NA
localstorage,NA,NA
 (all ,NA,NA
"lowercase), but the DOM property is called ",NA,NA
window.localStorage,NA,NA
 (mixed case).,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: How secure is my HTML5 storage database? ,NA,NA
Can anyone read it?,NA,NA
A: Anyone who has physical access to your,NA,NA
computer can probably look at (or even,NA,NA
ange) your HTML5 storage database. ,NA,NA
"Within your browser, any web site can read ",NA,NA
and ,NA,NA
"modify its own values, but sites can’t access ",NA,NA
values stored by other sites. is is called a ,NA,NA
same-origin restriction,NA,NA
.,NA,NA
❧,NA,NA
WEB WORKERS,NA,NA
Web Workers,NA,NA
 provide a standard way for browsers to,NA,NA
"run JavaScript in the baground. With web workers,",NA,NA
Your browser supports web ,NA,NA
workers.,NA,NA
you can spawn multiple “threads” that all run at the ,NA,NA
"same time, more or less. (ink of how your ",NA,NA
"computer can run multiple applications at the same time, and you’re most of the way ",NA,NA
"there.)ese “baground threads” can do complex mathematical calculations, make network ",NA,NA
"requests, or access ",NA,NA
local storage,NA,NA
" while the main web page responds to the user scrolling, ",NA,NA
"cliing, or typing.",NA,NA
Cheing for web workers uses ,NA,NA
detection tenique #1,NA,NA
. If your browser supports the Web ,NA,NA
"Worker API, there will be a ",NA,NA
Worker,NA,NA
 property on the global ,NA,NA
window,NA,NA
 object. If your browser ,NA,NA
"doesn’t support the Web Worker API, the ",NA,NA
Worker,NA,NA
 property will be undefined.,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
function supports_web_workers() { ,NA,NA
return !!window.Worker; ,NA,NA
},NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 (1.1 or later) to detect ,NA,NA
support for web workers.,NA,NA
↶,NA,NA
 check for web workers,NA,NA
if (Modernizr.webworkers) {,NA,NA
// window.Worker is available!,NA,NA
} else { ,NA,NA
// no native support for web workers :( ,NA,NA
// maybe try Gears or another third-party solution },NA,NA
Note that JavaScript is case-sensitive. e Modernizr aribute is called ,NA,NA
webworkers,NA,NA
 (all ,NA,NA
"lowercase), but the DOM object is called ",NA,NA
window.Worker,NA,NA
 (with a capital “W” in ,NA,NA
“Worker”).,NA,NA
❧,NA,NA
OFFLINE WEB APPLICATIONS,NA,NA
Reading static web pages offline is easy: connect to ,NA,NA
"the Internet, load a web page, disconnect from the ",NA,NA
"Internet, drive to a secluded cabin, and read the web ",NA,NA
"page at your leisure. (To save time, you may wish to ",NA,NA
skip the step about the cabin.) But what about web ,NA,NA
applications like ,NA,NA
Gmail,NA,NA
 or ,NA,NA
Google Docs,NA,NA
? anks to ,NA,NA
"HTML5, anyone (not just Google!) can build a web ",NA,NA
application that works offline.,NA,NA
Offline web applications,NA,NA
 start out as online ,NA,NA
web ,diveintohtml5.org,NA
Your browser supports offline web,DETECTING HTML5 FEATURES,NA
applications.,NA,NA
applications. e first time you visit an offline-enabled,NA,NA
applications.,NA,NA
"web site, the web server tells your browser whi files ",NA,NA
"it needs in order to work offline. ese files can be anything — HTML, JavaScript, images, ",NA,NA
even ,NA,NA
videos,NA,NA
". Once your browser downloads all the necessary files, you can revisit the ",NA,NA
web site even if you’re not connected to the Internet. Your browser will notice that ,NA,NA
"you’re offline and use the files it has already downloaded. When you get ba online, any ",NA,NA
anges you’ve made can be uploaded to the remote web server.,NA,NA
Cheing for offline support uses ,NA,NA
detection tenique #1,NA,NA
. If your browser supports offline ,NA,NA
"web applications, there will be an ",NA,NA
applicationCache,NA,NA
 property on the global ,NA,NA
window,NA,NA
 ,NA,NA
"object. If your browser doesn’t support offline web applications, the ",NA,NA
applicationCache,NA,NA
 ,NA,NA
property will be undefined. You can e for offline support with the following function:,NA,NA
function supports_offline() {,NA,NA
return !!window.applicationCache;,NA,NA
},NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 (1.1 or later) to detect ,NA,NA
support for offline web applications.,NA,NA
↶,NA,NA
 check for offline support,NA,NA
if (Modernizr.applicationcache) {,NA,NA
// window.applicationCache is available!,NA,NA
} else {,NA,NA
// no native support for offline :(,NA,NA
// maybe try Gears or another third-party solution,NA,NA
},NA,NA
Note that JavaScript is case-sensitive. e Modernizr aribute is called ,NA,NA
applicationcache ,NA,NA
"(all lowercase), but the DOM object is called ",NA,NA
window.applicationCache,NA,NA
 (mixed case).,NA,NA
❧,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
GEOLOCATION,NA,NA
Geolocation is the art of figuring out where you are in the world and (optionally) sharing ,NA,NA
that information with people you trust. ere is more than one way to figure out where you ,NA,NA
"are —your IP address, your wireless network connection, whi cell tower your phone is ",NA,NA
"talking to, or dedicated GPS hardware that calculates latitude and longitude from ",NA,NA
information sent by satellites in the sky.,NA,NA
Your browser does not ,NA,NA
support geolocation. :(,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Is geolocation part of HTML5? Why are you ,NA,NA
talking about it?,NA,NA
A: Geolocation support is being added to,NA,NA
"browsers right now, along with support for",NA,NA
"new HTML5 features. Strictly speaking,",NA,NA
geolocation is being standardized by the ,NA,NA
Geolocation Working Group,NA,NA
", whi is separate ",NA,NA
from the HTML5 Working Group. But I’m ,NA,NA
going to talk about geolocation in this book,"diveintohtml5.org
  
  
  DETECTING HTML5 
 FEATURES",NA
"anyway, because it’s part of the evolution of ",NA,NA
the web that’s happening now.,NA,NA
Cheing for geolocation support uses ,NA,NA
detection tenique #1,NA,NA
. If your browser supports the ,NA,NA
"geolocation API, there will be a ",NA,NA
geolocation,NA,NA
 property on the global ,NA,NA
navigator,NA,NA
 object. If ,NA,NA
"your browser doesn’t support the geolocation API, the ",NA,NA
geolocation,NA,NA
 property will be ,NA,NA
undefined. Here’s how to e for geolocation support:,NA,NA
function supports_geolocation() { ,NA,NA
return !!navigator.geolocation; ,NA,NA
},NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 to detect support for ,NA,NA
the geolocation API.,NA,NA
↶,NA,NA
 check for geolocation support,NA,NA
if (Modernizr.geolocation) {,NA,NA
// let's find out where you are!,NA,NA
} else { ,NA,NA
// no native geolocation support available :( // ,NA,NA
maybe try Gears or another third-party solution },NA,NA
"If your browser does not support the geolocation API natively, there is still hope. ",NA,NA
Gears,NA,NA
 is ,NA,NA
"an open source browser plugin from Google that works on Windows, Mac, Linux, Windows ",NA,NA
"Mobile, and Android. It provides features for older browsers that do not support all the ",NA,NA
fancy new stuff we’ve discussed in this apter. One of the features that Gears provides is a ,NA,NA
geolocation API. It’s not the same as the ,NA,NA
navigator.geolocation,NA,NA
" API, but it serves the ",NA,NA
same purpose.,NA,NA
"ere are also device-specific geolocation APIs on older mobile phone platforms, ",NA,NA
including ,NA,NA
BlaBerry,NA,NA
", ",NA,NA
Nokia,NA,NA
", ",NA,NA
Palm,NA,NA
", and ",NA,NA
OMTP BONDI,NA,NA
.,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
e ,NA,NA
apter on geolocation,NA,NA
  will go into excruciating detail about how to use all of these ,NA,NA
different APIs.,NA,NA
❧,NA,NA
INPUT TYPES,NA,NA
"You know all about web forms, right? Make a ",NA,NA
<form>,NA,NA
", add a few ",NA,NA
"<input type=""text"">",NA,NA
 elements ,NA,NA
and maybe an ,NA,NA
"<input type=""password"">",NA,NA
", and finish ",NA,NA
it off with an ,NA,NA
"<input type=""submit""> ",NA,NA
buon.,NA,NA
You don’t know the half of it. HTML5 defines over a ,NA,NA
dozen new input types that you can use in your ,NA,NA
forms.,NA,NA
1. ,NA,NA
"<input type=""search"">",NA,NA
 for sear boxes 2. ,NA,NA
"<input type=""number"">",NA,NA
 for spinboxes,NA,NA
Your browser supports the ,NA,NA
following HTML5 input types: ,NA,NA
search,NA,NA
", ",NA,NA
tel,NA,NA
3. ,NA,NA
"<input type=""range"">",NA,NA
 for sliders ,NA,NA
4. ,NA,NA
"<input type=""color"">",NA,NA
 for color piers ,NA,NA
5. ,NA,NA
"<input type=""tel"">",NA,NA
 for telephone numbers ,NA,NA
6. ,NA,NA
"<input type=""url"">",NA,NA
 for web addresses ,NA,NA
7. ,NA,NA
"<input type=""email"">",NA,NA
 for email addresses ,NA,NA
8. ,NA,NA
"<input type=""date"">",NA,NA
 for calendar date piers ,NA,NA
9. ,NA,NA
"<input type=""month"">",NA,NA
 for months ,NA,NA
10. ,NA,NA
"<input type=""week"">",NA,NA
 for weeks ,NA,NA
11. ,NA,NA
"<input type=""time"">",NA,NA
 for timestamps ,NA,NA
12. ,NA,NA
"<input type=""datetime"">",NA,NA
" for precise, absolute date+time stamps ",NA,NA
13. ,NA,NA
"<input type=""datetime-local"">",NA,NA
 for local dates and times,NA,NA
Cheing for HTML5 input types uses ,NA,NA
detection tenique #4,NA,NA
". First, you create a dummy ",NA,NA
<input>,NA,NA
 element in memory. e default input type for all ,NA,NA
<input>,NA,NA
 elements is ,NA,NA
"""text""",NA,NA
.,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
is will prove to be vitally important.,NA,NA
"var i = document.createElement(""input"");",NA,NA
"Next, set the ",NA,NA
type,NA,NA
 aribute on the dummy ,NA,NA
<input>,NA,NA
 element to the input type you want to,NA,NA
detect.,NA,NA
"i.setAttribute(""type"", ""color"");",NA,NA
"If your browser supports that particular input type, the ",NA,NA
type,NA,NA
 property will retain the value,NA,NA
"you set. If your browser doesn’t support that particular input type, it will ignore the value",NA,NA
you set and the ,NA,NA
type,NA,NA
 property will still be ,NA,NA
"""text""",NA,NA
.,NA,NA
"return i.type !== ""text"";",NA,NA
"Instead of writing 13 separate functions yourself, you can use ",NA,NA
Modernizr,NA,NA
 to detect support ,NA,NA
for,NA,NA
all the new input types defined in HTML5. Modernizr reuses a single ,NA,NA
<input>,NA,NA
 element to,NA,NA
efficiently detect support for all 13 input types. en it builds a hash called,NA,NA
Modernizr.inputtypes,NA,NA
", that contains 13 keys (the HTML5 ",NA,NA
type,NA,NA
 aributes) and 13,NA,NA
Boolean values (,NA,NA
true,NA,NA
" if supported, ",NA,NA
false,NA,NA
 if not).,NA,NA
↶,NA,NA
 check for native date picker,NA,NA
if (!Modernizr.inputtypes.date) {,NA,NA
"// no native support for <input type=""date""> :(",NA,NA
// maybe build one yourself with ,NA,NA
Dojo,NA,NA
 or ,NA,NA
jQueryUI,NA,NA
},NA,NA
❧,NA,NA
PLACEHOLDER TEXT,NA,NA
Besides ,NA,NA
new input types,NA,NA
", HTML5",NA,NA
includes several small tweaks to,NA,NA
Your browser supports placeholder text,NA,NA
existing forms. One improvement ,NA,NA
is the ability to set ,NA,NA
placeholder ,NA,NA
text in an input field,NA,NA
. Placeholder text is displayed inside the input field as long as the field ,NA,NA
"is empty and not focused. As soon you cli on (or tab to) the input field, the placeholder ",NA,NA
text disappears. e ,NA,NA
apter on web forms,NA,NA
  has screenshots if you’re having trouble ,NA,NA
visualizing it.,NA,NA
Cheing for placeholder support uses ,NA,NA
detection tenique #2,NA,NA
. If your browser supports ,NA,NA
"placeholder text in input fields, the DOM object it creates to represent an ",NA,NA
<input>,NA,NA
 element ,NA,NA
will have a ,NA,NA
placeholder,NA,NA
 property (even if you don’t include a ,NA,NA
placeholder,NA,NA
 aribute in ,NA,NA
"your HTML). If your browser doesn’t support placeholder text, the DOM object it creates ",NA,NA
for an ,NA,NA
<input>,NA,NA
 element will not have a ,NA,NA
placeholder,NA,NA
 property.,NA,NA
function supports_input_placeholder() { ,NA,NA
var i = document.createElement('input'); ,NA,NA
return 'placeholder' in i; ,NA,NA
},NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 (1.1 or later) to detect ,NA,NA
support for placeholder text.,NA,NA
↶,NA,NA
 check for placeholder text,NA,NA
if (Modernizr.input.placeholder) {,NA,NA
// your placeholder text should already be visible!,NA,NA
} else { ,NA,NA
// no placeholder support :( ,NA,NA
// fall back to a scripted solution ,NA,NA
},NA,NA
❧,NA,NA
FORM AUTOFOCUS,NA,NA
Web sites can use JavaScript to focus the first input field of a ,NA,NA
"web form automatically. For example, the home page of ",NA,NA
Google.com,NA,NA
 will autofocus the input box so you can type your ,NA,NA
sear keywords without having to position the cursor in the ,NA,NA
"sear box. While this is convenient for most people, it can be ",NA,NA
annoying for power users or people with special needs. If you ,NA,NA
"press the space bar expecting to scroll the page, the page will ",NA,NA
not scroll because the focus is already in a form input field. (It ,NA,NA
types a space in the field instead of scrolling.) If you focus a ,NA,NA
"different input feld while the page is still loading, the site’s ",NA,NA
autofocus,NA,NA
script may “helpfully” move the focus ba to the original input ,NA,NA
"field upon completion, disrupting your flow and causing you ",NA,NA
to,NA,NA
Your browser supports ,NA,NA
form autofocus.,NA,NA
type in the wrong place.,NA,NA
"Because the autofocusing is done with JavaScript, it can be triy to handle all of these edge",NA,NA
"cases, and there is lile recourse for people who don’t want a web page to “steal” the focus.",NA,NA
"To solve this problem, HTML5 introduces ",NA,NA
an ,NA,NA
autofocus,NA,NA
 aribute on all web form controls,NA,NA
.,NA,NA
e ,NA,NA
autofocus,NA,NA
 aribute does exactly what it says on the tin: it moves the focus to a,NA,NA
"particular input field. But because it’s just markup instead of a script, the behavior will be",NA,NA
"consistent across all web sites. Also, browser vendors (or extension authors) can offer users ",NA,NA
a,NA,NA
way to disable the autofocusing behavior.,NA,NA
Cheing for autofocus support uses ,NA,NA
detection tenique #2,NA,NA
. If your browser supports,NA,NA
"autofocusing web form controls, the DOM object it creates to represent an ",NA,NA
<input>,NA,NA
 element,NA,NA
will have an ,NA,NA
autofocus,NA,NA
 property (even if you don’t include the ,NA,NA
autofocus,NA,NA
 aribute in,NA,NA
"your HTML). If your browser doesn’t support autofocusing web form controls, the DOM",NA,NA
object it creates for an ,NA,NA
<input>,NA,NA
 element will not have an ,NA,NA
autofocus,NA,NA
 property. You can,NA,NA
detect autofocus support with this function:,NA,NA
function supports_input_autofocus() {,NA,NA
var i = document.createElement('input');,NA,NA
return 'autofocus' in i;,NA,NA
},NA,NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 (1.1 or later) to detect ,NA,NA
support,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
for autofocused form fields.,NA,NA
↶,NA,NA
 check for autofocus support,NA,NA
if (Modernizr.input.autofocus) {,NA,NA
// autofocus works!,NA,NA
} else { ,NA,NA
// no autofocus support :( ,NA,NA
// fall back to a scripted solution ,NA,NA
},NA,NA
❧,NA,NA
MICRODATA,NA,NA
Microdata,NA,NA
 is a standardized way to provide ,NA,NA
additional semantics in your web pages. For ,NA,NA
"example, you can use microdata to declare that ",NA,NA
a photograph is available under a specific ,NA,NA
Creative Commons license. As you’ll see in ,NA,NA
the ,NA,NA
distributed extensibility apter,NA,NA
", you can use ",NA,NA
microdata to mark up an “About Me” page.,NA,NA
"Browsers, browser extensions, and sear engines",NA,NA
can convert your HTML5 microdata markup ,NA,NA
into a ,NA,NA
vCard,NA,NA
", a standard format for sharing ",NA,NA
contact,NA,NA
Your browser does not support the ,NA,NA
HTML5 microdata API. :(,NA,NA
information. You can also define your ,NA,NA
own ,NA,NA
microdata vocabularies.,NA,NA
e HTML5 microdata standard includes both HTML markup (primarily for sear engines) ,NA,NA
and a set of DOM functions (primarily for browsers). ere’s no harm in including ,NA,NA
"microdata markup in your web pages. It’s nothing more than a few well-placed aributes, ",NA,NA
and searengines that don’t understand the microdata aributes will just ignore them. But ,NA,NA
"if you need to access or manipulate microdata through the DOM, you’ll need to e ",NA,NA
whether the,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
browser supports the microdata DOM API.,NA,NA
Cheing for HTML5 microdata API support uses ,NA,NA
detection tenique #1,NA,NA
. If your browser,NA,NA
"supports the HTML5 microdata API, there will be a ",NA,NA
getItems(),NA,NA
 function on the global,NA,NA
document,NA,NA
" object. If your browser doesn’t support microdata, the ",NA,NA
getItems(),NA,NA
 function will,NA,NA
be undefined.,NA,NA
function supports_microdata_api() {,NA,NA
return !!document.getItems;,NA,NA
},NA,NA
"Modernizr does not yet support eing for the microdata API, so you’ll need to use the",NA,NA
function like the one listed above.,NA,NA
FURTHER READING,NA,NA
Specifications and standards:,NA,NA
the ,NA,NA
<canvas>,NA,NA
 element,NA,NA
the ,NA,NA
<video>,NA,NA
 element,NA,NA
<input>,NA,NA
 types,NA,NA
the ,NA,NA
<input placeholder>,NA,NA
 aribute,NA,NA
the ,NA,NA
<input autofocus>,NA,NA
 aribute,NA,NA
HTML5 storage,NA,NA
Web Workers,NA,NA
Offline web applications,NA,NA
Geolocation API,NA,NA
JavaScript libraries:,NA,NA
Modernizr,NA,NA
", an HTML5 detection library",NA,NA
geo.js,NA,NA
", a geolocation API wrapper",NA,NA
Other articles and tutorials:,"diveintohtml5.org
  
  DETECTING HTML5 FEATURES",NA
Video for Everybody!,NA,NA
A gentle introduction to video encoding,NA,NA
Video type parameters,NA,NA
e All-In-One Almost-Alphabetical No-Bullshit Guide to Detecting Everything,NA,NA
❧,NA,NA
is has been “Detecting HTML5 Features.” e ,NA,NA
full table of contents,NA,NA
 has more if you’d like to ,NA,NA
keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition,NA,NA
directly from O’Reilly,NA,NA
. You’ll get a ,NA,NA
"book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,diveintohtml5.org,NA
powered by Google™,NA,NA
Search,DETECTING HTML5 FEATURES,NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
3. ,NA,NA
. ,NA,NA
WHAT DOES IT ALL MEAN?,NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
"his apter will take an HTML page that has absolutely nothing wrong with it, ",NA,NA
and improve it. Parts of it will become shorter. Parts will become longer. All ,NA,NA
of it will become more semantic. It’ll be awesome.,NA,NA
Here is the page in question,NA,NA
. Learn it. Live it. Love it. Open it in a new tab and don’t come,NA,NA
ba until you’ve hit “View Source” at least once.,NA,NA
❧,NA,NA
THE DOCTYPE,NA,NA
From the top:,NA,NA
<!DOCTYPE html,NA,NA
"PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN""",NA,NA
"""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"">",NA,NA
is is called the “doctype.” ere’s a long history — and a bla art — behind the doctype. ,NA,NA
"While working on Internet Explorer 5 for Mac, the developers at Microso found ",NA,NA
themselves with a surprising problem. e upcoming version of their browser had ,NA,NA
"improved its standards support so mu, older pages no longer rendered properly. Or ",NA,NA
"rather, they rendered properly (according to specifications), but people expected them to ",NA,NA
render ,NA,NA
improperly,NA,NA
. e pages themselves had been authored based on the quirks of the ,NA,NA
"dominant browsers of the day, primarily Netscape 4 and Internet Explorer 4. IE5/Mac was ",NA,NA
"so advanced, it actually broke the web.",NA,NA
"Microso came up with a novel solution. Before rendering a page, IE5/Mac looked at ",NA,NA
"the“doctype,” whi is typically the first line of the HTML source (even before the ",NA,NA
<html> ,NA,NA
element). Older pages (that relied on the rendering quirks of older browsers) generally ,NA,NA
didn’t have a doctype at all. IE5/Mac rendered these pages like older browsers did. In ,NA,NA
"order to“activate” the new standards support, web page authors had to opt in, by ",NA,NA
supplying the right doctype before the ,NA,NA
<html>,NA,NA
 element.,NA,NA
"is idea spread like wildfire, and soon all major browsers had two modes: “quirks mode” ",NA,NA
"and“standards mode.” Of course, this being the web, things quily got out of hand. When ",NA,NA
"Mozilla tried to ship version 1.1 of their browser, they discovered that there were pages ",NA,NA
being rendered in “standards mode” that were actually relying on one specific quirk. Mozilla ,NA,NA
"had just fixed its rendering engine to eliminate this quirk, and thousands of pages broke all ",NA,NA
at once. us was created — and I am not making this up — “,NA,NA
almost standards mode,NA,NA
.”,NA,NA
"In his seminal work, ",NA,NA
Activating Browser Modes with Doctype,NA,NA
", Henri Sivonen summarizes ",NA,NA
the different modes:,NA,NA
irks Mode ,NA,NA
"In the irks mode, browsers violate contemporary Web format ",NA,NA
specifications in order to avoid “breaking” pages authored according to ,NA,NA
practices that were prevalent in the late 1990s.,NA,NA
Standards Mode ,NA,NA
"In the Standards mode, browsers try to give conforming documents the ",NA,NA
specification-wise correct treatment to the extent implemented in a ,NA,NA
particular,NA,NA
browser. HTML5 calls this mode the “no quirks mode.”,NA,NA
Almost Standards Mode ,NA,NA
"Firefox, Safari, Chrome, Opera (since 7.5) and IE8 also have a mode known ",NA,NA
as,NA,NA
"“Almost Standards mode,” that implements the vertical sizing of table cells ",NA,NA
traditionally and not rigorously according to the CSS2 specification. HTML5 ,NA,NA
calls this mode the “limited quirks mode.”,NA,NA
"(You should read the rest of Henri’s article, because I’m simplifying immensely here. Even ",NA,NA
"in IE5/Mac, there were a few older doctypes that didn’t count as far as opting into ",NA,NA
"standards support. Over time, the list of quirks grew, and so did the list of doctypes that ",NA,NA
"triggered“quirks mode.” e last time I tried to count, there were 5 doctypes that triggered ",NA,NA
"“almost standards mode,” and 73 that triggered “quirks mode.” But I probably missed ",NA,NA
"some, and I’m not even going to talk about the crazy shit that Internet Explorer 8 does to ",NA,NA
swit between its four — four! — different rendering modes. ,NA,NA
Here’s a flowart,NA,NA
. Kill it. Kill ,NA,NA
it with fire.),NA,NA
"Now then. Where were we? Ah yes, the doctype:",NA,NA
<!DOCTYPE html,NA,NA
"PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN""",NA,NA
"""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"">",NA,NA
at happens to be one of the 15 doctypes that trigger “standards mode” in all modern ,NA,NA
"browsers. ere is nothing wrong with it. If you like it, you can keep it. Or you can ange it ",NA,NA
"to the HTML5 doctype, whi is shorter and sweeter and also triggers “standards mode” in ",NA,NA
all modern browsers.,NA,NA
is is the HTML5 doctype:,NA,NA
<!DOCTYPE html>,NA,NA
"at’s it. Just 15 aracters. It’s so easy, you can type it by hand and not screw it up.",NA,NA
❧,NA,NA
THE ROOT ELEMENT,NA,NA
An HTML page is a series of nested elements. e ,NA,NA
entire structure of the page is like a tree. Some ,NA,NA
"elements are “siblings,” like two branes that ",NA,NA
extend from the same tree trunk. Some elements ,NA,NA
"can be“ildren” of other elements, like a smaller ",NA,NA
branthat extends from a larger bran. (It works ,NA,NA
the ,NA,NA
other way too; an element that contains other ,NA,NA
elements is called the “parent” node of its ,NA,NA
"immediateild elements, and the “ancestor” of its ",NA,NA
grandildren.) Elements that have no ildren are ,NA,NA
"called “leaf” nodes. e outer-most element, whi is ",NA,NA
"the ancestor of all other elements on the page, is ",NA,NA
called the “root element.” e root element of an ,NA,NA
HTML page is always ,NA,NA
<html>,NA,NA
.,NA,NA
In ,NA,NA
this example page,NA,NA
", the root element looks like this:",NA,NA
"<html xmlns=""http://www.w3.org/1999/xhtml""",NA,NA
"lang=""en""",NA,NA
"xml:lang=""en"">",NA,NA
"ere is nothing wrong with this markup. Again, if you like it, you can keep it. It is valid ",NA,NA
"HTML5. But parts of it are no longer necessary in HTML5, so you can save a few bytes by ",NA,NA
removing them.,NA,NA
e first thing to discuss is the ,NA,NA
xmlns,NA,NA
 aribute. is is a vestige of ,NA,NA
XHTML 1.0,NA,NA
. It says that ,NA,NA
"elements in this page are in the XHTML namespace, ",NA,NA
http://www.w3.org/1999/xhtml,NA,NA
.,NA,NA
But elements in HTML5 ,NA,NA
are always in this namespace,NA,NA
", so you no longer need to declare it ",NA,NA
"explicitly. Your HTML5 page will work exactly the same in all browsers, whether this ",NA,NA
aribute is present or not.,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
Dropping the ,NA,NA
xmlns,NA,NA
 aribute leaves us with this root element:,NA,NA
"<html lang=""en"" xml:lang=""en"">",NA,NA
"e two aributes here, ",NA,NA
lang,NA,NA
 and ,NA,NA
xml:lang,NA,NA
", both define the language of this HTML page.",NA,NA
(,NA,NA
en,NA,NA
 stands for “English.” Not writing in English? ,NA,NA
Find your language code,NA,NA
.) Why two ,NA,NA
"aributes for the same thing? Again, this is a vestige of XHTML. Only the ",NA,NA
lang,NA,NA
 aribute has ,NA,NA
any effect in HTML5. You can keep the ,NA,NA
xml:lang,NA,NA
" aribute if you like, but if you do, you need ",NA,NA
to ensure that it ,NA,NA
contains the same value as the ,NA,NA
lang,NA,NA
 aribute,NA,NA
.,NA,NA
"To ease migration to and from XHTML, authors may specify an aribute in no ",NA,NA
"namespace with no prefix and with the literal localname ""xml:lang"" on HTML ",NA,NA
"elements in HTML documents, but su aributes must only be specified if a ",NA,NA
lang ,NA,NA
"aribute in no namespace is also specified, and both aributes must have the ",NA,NA
same value when compared in an ASCII case-insensitive manner. e aribute in ,NA,NA
"no namespace with no prefix and with the literal localname ""xml:lang"" has no ",NA,NA
effect on language processing.,NA,NA
"Are you ready to drop it? It’s OK, just let it go. Going, going… gone! at leaves us with this ",NA,NA
root element:,NA,NA
"<html lang=""en"">",NA,NA
And that’s all I have to say about that.,NA,NA
❧,NA,NA
THE <HEAD> ELEMENT,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
e first ild of the root element is usually the ,NA,NA
<head>,NA,NA
 element. e ,NA,NA
<head>,NA,NA
 element ,NA,NA
contains metadata — information ,NA,NA
about,NA,NA
" the page, rather than the body of the page itself. ",NA,NA
"(e body of the page is, unsurprisingly, contained in the ",NA,NA
<body>,NA,NA
 element.) e ,NA,NA
<head>,NA,NA
 ,NA,NA
"element itself is rather boring, and it hasn’t anged in any interesting way in HTML5. e ",NA,NA
good stuff is what’s ,NA,NA
inside,NA,NA
 the ,NA,NA
<head>,NA,NA
" element. And for that, we turn once again to ",NA,NA
our ,NA,NA
example page,NA,NA
:,NA,NA
<head> ,NA,NA
"<meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" ",NA,NA
/> ,NA,NA
<title>My Weblog</title> ,NA,NA
"<link rel=""stylesheet"" type=""text/css"" href=""style-original.css"" /> ",NA,NA
"<link rel=""alternate"" type=""application/atom+xml"" ",NA,NA
"title=""My Weblog feed"" ",NA,NA
"href=""/feed/"" /> ",NA,NA
"<link rel=""search"" type=""application/opensearchdescription+xml"" ",NA,NA
"title=""My Weblog search"" ",NA,NA
"href=""opensearch.xml"" /> ",NA,NA
"<link rel=""shortcut icon"" href=""/favicon.ico"" /> ",NA,NA
</head>,NA,NA
First up: the ,NA,NA
<meta>,NA,NA
 element.,NA,NA
❧,NA,NA
CHARACTER ENCODING,NA,NA
"When you think of “text,” you probably think of “aracters and symbols I see on my ",NA,NA
computer screen.” But computers don’t deal in aracters and symbols; they deal in bits ,NA,NA
and bytes. Every piece of text you’ve ever seen on a computer screen is actually stored in ,NA,NA
a particular ,NA,NA
aracter encoding,NA,NA
. ere are ,NA,NA
hundreds of different aracter encodings,NA,NA
" , some ",NA,NA
"optimized for particular languages like Russian or Chinese or English, and others that can ",NA,NA
"be used for multiple languages. Roughly speaking, the aracter encoding provides a ",NA,NA
mapping between the stuff you see on your screen and the stuff your computer actually ,NA,NA
stores in memory and on disk.,NA,NA
"In reality, it’s more complicated than that. e same aracter might appear in more than ",NA,NA
"one encoding, but ea encoding might use a different sequence of bytes to actually store ",NA,NA
"thearacter in memory or on disk. So, you can think of the aracter encoding as a kind of ",NA,NA
decryption key for the text. Whenever someone gives you a sequence of bytes and claims ,NA,NA
"it’s“text,” you need to know what aracter encoding they used so you can decode the bytes ",NA,NA
"intoaracters and display them (or process them, or whatever).",NA,NA
"So, how does your browser actually determine the aracter encoding of the stream of ",NA,NA
"bytes that a web server sends? I’m glad you asked. If you’re familiar with HTTP headers, ",NA,NA
you may have seen a header like this:,NA,NA
"Content-Type: text/html; charset=""utf-8""",NA,NA
"Briefly, this says that the web server thinks it’s sending you an HTML document, and that it ",NA,NA
thinks the document uses the ,NA,NA
UTF-8,NA,NA
" aracter encoding. Unfortunately, in the whole ",NA,NA
"magnificent soup of the World Wide Web, few authors actually have control over their HTTP ",NA,NA
server. ink ,NA,NA
Blogger,NA,NA
": the content is provided by individuals, but the servers are run by ",NA,NA
Google. So HTML 4 provided a way to specify the aracter encoding in the HTML document ,NA,NA
itself. You’ve probably seen this too:,NA,NA
"<meta http-equiv=""Content-Type"" content=""text/html;",NA,NA
"charset=utf-8"">",NA,NA
"Briefly, this says that the web author thinks they have authored an HTML document using ",NA,NA
the ,NA,NA
UTF-8,NA,NA
 aracter encoding.,NA,NA
"Both of these teniques still work in HTML5. e HTTP header is the preferred method, and ",diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
it overrides the ,NA,NA
<meta>,NA,NA
" tag if present. But not everyone can set HTTP headers, so the ",NA,NA
<meta>,NA,NA
" tag is still around. In fact, it got a lile easier in HTML5. Now it looks like this:",NA,NA
"<meta charset=""utf-8"" />",NA,NA
is works in all browsers. How did this shortened syntax come about? Here is ,NA,NA
the best ,NA,NA
explanation I could find,NA,NA
:,NA,NA
e rationale for the ,NA,NA
"<meta charset="""">",NA,NA
 aribute combination is that UAs ,NA,NA
"already implement it, because people tend to leave things unquoted, like:",NA,NA
<META HTTP-EQUIV=Content-Type CONTENT=text/html; charset=ISO-,NA,NA
8859-1>,NA,NA
ere are even a few ,NA,NA
<meta charset>,NA,NA
 test cases,NA,NA
 if you don’t believe that browsers already ,NA,NA
do this.,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: I never use funny aracters. Do I still need ,NA,NA
to declare my aracter encoding?,NA,NA
A: Yes! You should ,NA,NA
always,NA,NA
 specify a aracter ,NA,NA
encoding on every HTML page you serve. Not ,NA,NA
specifying an encoding ,NA,NA
can lead to security ,NA,NA
vulnerabilities,NA,NA
.,NA,NA
"To sum up: aracter encoding is complicated, and it has not been made any easier by ",NA,NA
decades of poorly wrien soware used by copy-and-paste–educated authors. You should ,NA,NA
always ,NA,NA
specify a aracter encoding on ,NA,NA
every,NA,NA
" HTML document, or ",NA,NA
bad things will happen,NA,NA
. ,NA,NA
You can do it with the HTTP ,NA,NA
Content-Type,NA,NA
" header, the ",NA,NA
<meta http-equiv>,NA,NA
" declaration, ",NA,NA
or the,NA,NA
shorter ,NA,NA
<meta charset>,NA,NA
" declaration, but please do it. e web thanks you.",diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
shorter ,NA,NA
<meta charset>,NA,NA
" declaration, but please do it. e web thanks you.",NA,NA
❧,NA,NA
FRIENDS & (LINK) RELATIONS,NA,NA
Regular links (,NA,NA
<a href>,NA,NA
) simply point to another page. Link relations are a way to explain ,NA,NA
why,NA,NA
 you’re pointing to another page. ey finish the sentence “I’m pointing to this other ,NA,NA
page because…”,NA,NA
…it’s a stylesheet containing CSS rules that your browser should apply to this ,NA,NA
document.,NA,NA
"…it’s a feed that contains the same content as this page, but in a standard ",NA,NA
subscribable ,NA,NA
format.,NA,NA
…it’s a translation of this page into another language.,NA,NA
"…it’s the same content as this page, but in PDF format.",NA,NA
…it’s the next apter of an online book of whi this page is also a part.,NA,NA
And so on. HTML5 breaks link relations ,NA,NA
into two categories,NA,NA
:,NA,NA
Two categories of links can be created using the link element. ,NA,NA
Links to ,NA,NA
external resources,NA,NA
 are links to resources that are to be used to augment the ,NA,NA
"current document, and ",NA,NA
hyperlink links,NA,NA
 are links to other documents. …,NA,NA
e exact behavior for links to external resources depends on the ,NA,NA
"exact relationship, as defined for the relevant link type.",NA,NA
"Of the examples I just gave, only the first (",NA,NA
" rel=""stylesheet""",NA,NA
) is a link to an external ,NA,NA
"resource. e rest are hyperlinks to other documents. You may wish to follow those links, ",NA,NA
"or you may not, but they’re not required in order to view the current page.",NA,NA
"Most oen, link relations are seen on ",NA,NA
<link>,NA,NA
 elements within the ,NA,NA
<head>,NA,NA
 of a page. Some ,NA,NA
link relations can also be used on ,NA,NA
<a>,NA,NA
" elements, but this is uncommon even when allowed.",NA,NA
HTML5 also allows some relations on ,NA,NA
<area>,NA,NA
" elements, but this is even ",NA,NA
less,NA,NA
 common.,NA,NA
(HTML 4 did not allow a ,NA,NA
rel,NA,NA
 aribute on ,NA,NA
<area>,NA,NA
 elements.) See ,NA,NA
the full art of link,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
relations,NA,NA
 to e where you can use specific ,NA,NA
rel,NA,NA
 values.,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Can I make up my own link relations?,NA,NA
A: ere seems to be an infinite supply of ,NA,NA
ideas for new link relations. In an aempt to ,NA,NA
prevent people from ,NA,NA
just making shit up,NA,NA
", the ",NA,NA
WHATWG ,NA,NA
maintains a registry of proposed ,NA,NA
rel,NA,NA
 values,NA,NA
 and ,NA,NA
defines the process for ,NA,NA
geing them accepted,NA,NA
.,NA,NA
REL = STYLESHEET,NA,NA
Let’s look at the first link relation in ,NA,NA
our example page,NA,NA
:,NA,NA
"<link rel=""stylesheet"" href=""style-original.css"" type=""text/css""",NA,NA
/>,NA,NA
is is the most frequently used link relation in the world (literally). ,NA,NA
<link ,NA,NA
"rel=""stylesheet"">",NA,NA
 is for pointing to CSS rules that are stored in a separate file. One ,NA,NA
small optimization you can make in HTML5 is to drop the ,NA,NA
type,NA,NA
 aribute. ere’s only one ,NA,NA
"stylesheet language for the web, CSS, so that’s the default value for the ",NA,NA
type,NA,NA
 aribute. is ,NA,NA
works in all browsers. (I suppose someone could invent a new stylesheet language ,NA,NA
"someday, but if that happens, just add the ",NA,NA
type,NA,NA
 aribute ba.),NA,NA
"<link rel=""stylesheet"" href=""style-original.css"" />",NA,NA
REL = ALTERNATE,"diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
Continuing with ,NA,NA
our example page,NA,NA
:,NA,NA
"<link rel=""alternate""",NA,NA
"type=""application/atom+xml""",NA,NA
"title=""My Weblog feed""",NA,NA
"href=""/feed/"" />",NA,NA
is link relation is also quite common. ,NA,NA
"<link rel=""alternate"">",NA,NA
", combined with either ",NA,NA
the RSS or Atom media type in the ,NA,NA
type,NA,NA
" aribute, enables something called “feed ",NA,NA
autodiscovery.” It allows syndicated feed readers (like ,NA,NA
Google Reader,NA,NA
) to discover that a ,NA,NA
site has a news feed of the latest articles. Most browsers also support feed autodiscovery ,NA,NA
by displaying a special icon next to the URL. (Unlike with ,NA,NA
"rel=""stylesheet""",NA,NA
", the ",NA,NA
type ,NA,NA
aribute maers here. Don’t drop it!),NA,NA
e ,NA,NA
"rel=""alternate""",NA,NA
" link relation has always been a strange hybrid of use cases, ",NA,NA
even in ,NA,NA
HTML 4,NA,NA
". In HTML5, its definition has been clarified and extended to more accurately ",NA,NA
"describe existing web content. As you just saw, using ",NA,NA
"rel=""alternate""",NA,NA
 in conjunction with ,NA,NA
type=application/atom+xml,NA,NA
 indicates an Atom feed for the current page. But you can ,NA,NA
also use ,NA,NA
"rel=""alternate""",NA,NA
 in conjunction with other ,NA,NA
type,NA,NA
 aributes to indicate the same ,NA,NA
"content in another format, like PDF.",NA,NA
HTML5 also puts to rest a long-standing confusion about how to link to translations of ,NA,NA
documents. HTML 4 says to use the ,NA,NA
lang,NA,NA
 aribute in conjunction with ,NA,NA
"rel=""alternate"" ",NA,NA
"to specify the language of the linked document, but this is incorrect. e ",NA,NA
HTML 4 Errata ,NA,NA
document lists four outright errors in the HTML 4 specification. One of these outright ,NA,NA
errors is how to specify the language of a document linked with ,NA,NA
"rel=""alternate""",NA,NA
 e ,NA,NA
"correct way, described in the HTML 4 Errata and now in HTML5, is to use the ",NA,NA
hreflang,NA,NA
 ,NA,NA
"aribute. Unfortunately, these errata were never re-integrated into the HTML 4 spec, ",NA,NA
because no one in the W3C HTML Working Group was working on HTML anymore.,NA,NA
OTHER LINK RELATIONS IN HTML5,NA,NA
"rel=""arives""",NA,NA
" “indicates that the referenced document describes a collection of records, ",NA,NA
"documents, or other materials of historical interest. A blog’s index page could link to an ",NA,NA
"index of the blog’s past posts with rel=""arives"".”",diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
"rel=""author""",NA,NA
 is used to link to information about the author of the page. is can be a ,NA,NA
mailto:,NA,NA
" address, though it doesn’t have to be. It could simply link to a contact form ",NA,NA
or“about the author” page.,NA,NA
"rel=""external""",NA,NA
 “indicates that the link is leading to a document that is not part of the site ,NA,NA
that the current document forms a part of.” I believe it was first popularized by ,NA,NA
WordPress,NA,NA
", whiuses it on links le by commenters.",NA,NA
HTML 4 defined ,NA,NA
"rel=""start""",NA,NA
", ",NA,NA
"rel=""prev""",NA,NA
", ",NA,NA
and ,NA,NA
"rel=""next""",NA,NA
 to define relations between ,NA,NA
pages that are part of a series (like apters of a ,NA,NA
"book, or even posts on a blog). e only one that ",NA,NA
was ever used correctly was ,NA,NA
"rel=""next""",NA,NA
.,NA,NA
People used ,NA,NA
"rel=""previous""",NA,NA
 instead of ,NA,NA
"rel=""prev""",NA,NA
; they used ,NA,NA
"rel=""begin""",NA,NA
 and ,NA,NA
"rel=""first""",NA,NA
 instead of ,NA,NA
"rel=""start""",NA,NA
; they ,NA,NA
used ,NA,NA
"rel=""end""",NA,NA
 instead of ,NA,NA
"rel=""last""",NA,NA
". Oh, ",NA,NA
and — all by themselves — they made up ,NA,NA
"rel=""up""",NA,NA
 to point to a “parent” page.,NA,NA
HTML5 includes ,NA,NA
"rel=""first""",NA,NA
", whi was the ",NA,NA
most common variation of the different ways ,NA,NA
to,NA,NA
say “first page in a series.” (,NA,NA
"rel=""start""",NA,NA
 is a ,NA,NA
"non-conforming synonym, provided for baward compatibility.) It also includes ",NA,NA
"rel=""prev"" ",NA,NA
and ,NA,NA
"rel=""next""",NA,NA
", just like HTML 4, and supports ",NA,NA
"rel=""previous""",NA,NA
 for ,NA,NA
baward ,NA,NA
"compatibility, as well as ",NA,NA
"rel=""last""",NA,NA
" (the last in a series, mirroring ",NA,NA
"rel=""first""",NA,NA
) and ,NA,NA
"rel=""up""",NA,NA
.,NA,NA
e best way to think of ,NA,NA
"rel=""up""",NA,NA
 is to look at your breadcrumb navigation (or at least ,NA,NA
"imagine it). Your home page is probably the first page in your breadcrumbs, and the ",NA,NA
current page is at the tail end. ,NA,NA
"rel=""up""",NA,NA
 points to the next-to-last page in the ,NA,NA
breadcrumbs.,NA,NA
"rel=""icon""",NA,NA
 is the ,NA,NA
second most popular link relation,NA,NA
", aer ",NA,NA
"rel=""stylesheet""",NA,NA
. It is usually ,NA,NA
found together with ,NA,NA
shortcut,NA,NA
", like so:",NA,NA
"<link rel=""shortcut icon"" href=""/favicon.ico"">",diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
All major browsers support this usage to associate a small icon with the page. Usually ,NA,NA
"it’s displayed in the browser’s location bar next to the URL, or in the browser tab, or ",NA,NA
both.,NA,NA
Also new in HTML5: the ,NA,NA
sizes,NA,NA
 aribute can be used in conjunction with the ,NA,NA
icon ,NA,NA
relationship to ,NA,NA
indicate the size of the referenced icon,NA,NA
.,NA,NA
"rel=""license""",NA,NA
 was ,NA,NA
invented by the microformats community,NA,NA
. It “indicates that the ,NA,NA
referenced document provides the copyright license terms under whi the current ,NA,NA
document is provided.,NA,NA
”,NA,NA
"rel=""nofollow""",NA,NA
 “indicates that the link is not endorsed by the original author or publisher ,NA,NA
"of the page, or that the link to the referenced document was included primarily because of ",NA,NA
a commercial relationship between people affiliated with the two pages.” It was ,NA,NA
invented ,NA,NA
by Google,NA,NA
 and ,NA,NA
standardized within the microformats community,NA,NA
. ,NA,NA
WordPress,NA,NA
 adds ,NA,NA
"rel=""nofollow""",NA,NA
 to links added by commenters. e thinking was that if “nofollow” links ,NA,NA
"did not pass on PageRank, spammers would give up trying to post spam comments on ",NA,NA
"weblogs. at didn’t happen, but ",NA,NA
"rel=""nofollow""",NA,NA
 persists.,NA,NA
"rel=""noreferrer""",NA,NA
 “indicates that no referrer information is to be leaked when following the ,NA,NA
"link.” No shipping browser currently supports this, but support ",NA,NA
was recently added to ,NA,NA
WebKit nightlies,NA,NA
", so it will eventually be showing up in Safari, Google Chrome, and other ",NA,NA
WebKit-based browsers. [,NA,NA
"rel=""noreferrer"" test case",NA,NA
],NA,NA
"rel=""pingba""",NA,NA
 specifies the address of a “pingba” server. As explained in ,NA,NA
the ,NA,NA
Pingbaspecification,NA,NA
", “e pingba system is a way for a blog to be automatically notified ",NA,NA
when other Web sites link to it. … It enables reverse linking — a way of going ba up a ain ,NA,NA
"of links rather than merely drilling down.” Blogging systems, notably WordPress, implement ",NA,NA
the pingba meanism to notify authors that you have linked to them when creating a new ,NA,NA
blog post.,NA,NA
"rel=""prefet""",NA,NA
 “indicates that preemptively feting ,NA,NA
and caing the specified resource is likely to be ,NA,NA
"beneficial, as it is highly likely that the user will ",NA,NA
require this resource.” Sear engines sometimes ,NA,NA
add,NA,NA
"<link rel=""prefetch"" href=""",NA,NA
URL of top,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
search result,NA,NA
""">",NA,NA
 to the sear results page if they ,NA,NA
feel that the top result is wildly more popular than ,NA,NA
"any other. For example: using Firefox, ",NA,NA
sear Google ,NA,NA
for CNN,NA,NA
", view the page source, and sear for the ",NA,NA
keyword ,NA,NA
prefetch,NA,NA
. Mozilla Firefox is the only ,NA,NA
current browser that supports ,NA,NA
"rel=""prefetch""",NA,NA
.,NA,NA
"rel=""sear""",NA,NA
 “indicates that the referenced ,NA,NA
document provides an interface specifically for searing the document and its related ,NA,NA
"resources.”Specifically, if you want ",NA,NA
"rel=""search""",NA,NA
" to do anything useful, it should point ",NA,NA
to an ,NA,NA
OpenSear,NA,NA
 document that describes how a browser could construct a URL to sear ,NA,NA
the current site for a given keyword. OpenSear (and ,NA,NA
"rel=""search""",NA,NA
 links that point to ,NA,NA
OpenSear description documents) has been supported in Microso Internet Explorer ,NA,NA
since version 7 and Mozilla Firefox since version 2.,NA,NA
"rel=""sidebar""",NA,NA
" “indicates that the referenced document, if retrieved, is intended to be shown ",NA,NA
"in a secondary browsing context (if possible), instead of in the current browsing context.” ",NA,NA
"What does that mean? In Opera and Mozilla Firefox, it means “when I cli this link, prompt ",NA,NA
"the user to create a bookmark that, when selected from the Bookmarks menu, opens the ",NA,NA
linked document in a browser sidebar.” (Opera actually calls it the “panel” instead of the ,NA,NA
"“sidebar.”) Internet Explorer, Safari, and Chrome ignore ",NA,NA
"rel=""sidebar""",NA,NA
 and just treat it as ,NA,NA
a regular link. [,NA,NA
"rel=""sidebar"" test case",NA,NA
],NA,NA
"rel=""tag""",NA,NA
 “indicates that the tag that the referenced document represents applies to the ,NA,NA
current document.” Marking up “tags” (category keywords) with the ,NA,NA
rel,NA,NA
 aribute was ,NA,NA
invented by Tenorati,NA,NA
 to help them categorize blog posts. Early blogs and tutorials thus ,NA,NA
referred to them as “Tenorati tags.” (You read that right: a commercial company ,NA,NA
convinced the entire world to add metadata that made the company’s job easier. Nice work ,NA,NA
if you can get it!) e syntax was later ,NA,NA
standardized within the microformats community,NA,NA
", ",NA,NA
where it was simply called ,NA,NA
"rel=""tag""",NA,NA
. Most blogging systems that allow associating ,NA,NA
"categories, keywords, or tags with individual posts will mark them up with ",NA,NA
"rel=""tag""",NA,NA
 ,NA,NA
links. Browsers do not do anything special with them; they’re really designed for sear ,NA,NA
engines to use as a signal of what the page is about.,NA,NA
❧,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
NEW SEMANTIC ELEMENTS IN ,NA,NA
HTML5,NA,NA
HTML5 is not just about making existing markup shorter (although it does a fair amount ,NA,NA
of that). It also defines new semantic elements.,NA,NA
<section>,NA,NA
e ,NA,NA
section,NA,NA
 element represents a generic document or application ,NA,NA
section. ,NA,NA
"A section, in this context, is a thematic grouping of content, typically with ",NA,NA
a ,NA,NA
"heading. Examples of sections would be apters, the tabbed pages in a ",NA,NA
"tabbed dialog box, or the numbered sections of a thesis. A Web site's home ",NA,NA
"page could be split into sections for an introduction, news items, contact ",NA,NA
information.,NA,NA
<nav>,NA,NA
e ,NA,NA
nav,NA,NA
 element represents a section of a page that links to other pages or ,NA,NA
to parts within the page: a section with navigation links. Not all groups of ,NA,NA
links on a page need to be in a ,NA,NA
nav,NA,NA
 element — only sections that consist of ,NA,NA
major navigation blos are appropriate for the ,NA,NA
nav,NA,NA
" element. In particular, ",NA,NA
it ,NA,NA
is common for footers to have a short list of links to common pages of a ,NA,NA
"site, su as the terms of service, the home page, and a copyright page. e ",NA,NA
footer,NA,NA
" element alone is sufficient for su cases, without a ",NA,NA
nav,NA,NA
 element.,NA,NA
<article>,NA,NA
e ,NA,NA
article,NA,NA
 element represents a component of a page that consists of a ,NA,NA
"self-contained composition in a document, page, application, or site and ",NA,NA
that ,NA,NA
"is intended to be independently distributable or reusable, e.g. in ",NA,NA
syndication.,NA,NA
"is could be a forum post, a magazine or newspaper article, a Web log ",NA,NA
"entry, a user-submied comment, an interactive widget or gadget, or ",NA,NA
any other independent item of content.,NA,NA
<aside>,NA,NA
e ,NA,NA
aside,NA,NA
 element represents a section of a page that consists of content ,NA,NA
that is tangentially related to the content around the ,NA,NA
aside,NA,NA
" element, and ",NA,NA
whi could be considered separate from that content. Su sections are ,NA,NA
oen ,NA,NA
represented as sidebars in printed typography. e element can be used for ,NA,NA
"typographical effects like pull quotes or sidebars, for advertising, for ",NA,NA
groups ,"diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
of ,NA,NA
nav,NA,NA
" elements, and for other content that is considered separate from ",NA,NA
the main content of the page.,NA,NA
<hgroup>,NA,NA
e ,NA,NA
hgroup,NA,NA
 element represents the heading of a section. e element is ,NA,NA
used to group a set of ,NA,NA
h1,NA,NA
–,NA,NA
h6,NA,NA
 elements when the heading has multiple ,NA,NA
"levels, su as subheadings, alternative titles, or taglines.",NA,NA
<header>,NA,NA
e ,NA,NA
header,NA,NA
 element represents a group of introductory or navigational aids. ,NA,NA
A ,NA,NA
header,NA,NA
 element is intended to usually contain the section’s heading (an ,NA,NA
h1,NA,NA
–,NA,NA
h6,NA,NA
 element or an ,NA,NA
hgroup,NA,NA
" element), but this is not required. e ",NA,NA
header,NA,NA
" element can also be used to wrap a section’s table of contents, a ",NA,NA
"sear form, or any relevant logos.",NA,NA
<footer>,NA,NA
e ,NA,NA
footer,NA,NA
 element represents a footer for its nearest ancestor sectioning ,NA,NA
content or sectioning root element. A footer typically contains information ,NA,NA
"about its section su as who wrote it, links to related documents, ",NA,NA
copyright ,NA,NA
"data, and the like. Footers don’t necessarily have to appear at the end of a ",NA,NA
"section, though they usually do. When the ",NA,NA
footer,NA,NA
 element contains entire ,NA,NA
"sections, they represent appendices, indexes, long colophons, verbose ",NA,NA
license ,NA,NA
"agreements, and other su content.",NA,NA
<time>,NA,NA
e ,NA,NA
time,NA,NA
" element represents either a time on a 24 hour clo, or a precise ",NA,NA
"date in the proleptic Gregorian calendar, optionally with a time and a ",NA,NA
time-,NA,NA
zone offset.,NA,NA
<mark>,NA,NA
e ,NA,NA
mark,NA,NA
 element represents a run of text in one document marked or ,NA,NA
highlighted for reference purposes.,NA,NA
"I know you’re anxious to start using these new elements, otherwise you wouldn’t be ",NA,NA
reading this apter. But first we need to take a lile detour.,NA,NA
❧,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
A LONG DIGRESSION INTO HOW ,NA,NA
BROWSERS HANDLE UNKNOWN ,NA,NA
ELEMENTS,NA,NA
"Every browser has a master list of HTML elements that it supports. For example, Mozilla ",NA,NA
Firefox’s list is stored in ,NA,NA
nsElementTable.cpp,NA,NA
. Elements not in this list are treated ,NA,NA
as“unknown elements.” ere are two fundamental problems with unknown elements:,NA,NA
1. ,NA,NA
How should the element be styled?,NA,NA
" By default, ",NA,NA
<p>,NA,NA
 has spacing on the top and ,NA,NA
"boom, ",NA,NA
<blockquote>,NA,NA
" is indented with a le margin, and ",NA,NA
<h1>,NA,NA
 is displayed in a larger ,NA,NA
font. But what default styles should be applied to unknown elements?,NA,NA
2. ,NA,NA
What should the element’s DOM look like?,NA,NA
  Mozilla’s ,NA,NA
nsElementTable.cpp,NA,NA
 includes ,NA,NA
information about what kinds of other elements ea element can contain. If you ,NA,NA
include markup like ,NA,NA
<p><p>,NA,NA
", the second paragraph element implicitly closes the first ",NA,NA
"one, so the elements end up as siblings, not parent-and-ild. But if you write ",NA,NA
<p><span>,NA,NA
", the ",NA,NA
span,NA,NA
" does not close the paragraph, because Firefox knows that ",NA,NA
<p>,NA,NA
 is a ,NA,NA
blo element that can contain the inline element ,NA,NA
<span>,NA,NA
". So, the ",NA,NA
<span>,NA,NA
 ends up as a ,NA,NA
ild of the ,NA,NA
<p>,NA,NA
 in the DOM.,NA,NA
"Different browsers answer these questions in different ways. (Shoing, I know.) Of the ",NA,NA
"major browsers, Microso Internet Explorer’s answer to both questions is the most ",NA,NA
"problematic, but every browser needs a lile bit of help here.",NA,NA
e first question should be relatively simple to answer: don’t give any special styling to ,NA,NA
unknown elements. Just let them inherit whatever CSS properties are in effect wherever ,NA,NA
"they appear on the page, and let the page author specify all styling with CSS. And that ",NA,NA
"works, mostly, but there’s one lile gota you need to be aware of.",NA,NA
PROFESSOR MARKUP SAYS,NA,NA
"All browsers render unknown elements inline, ",NA,NA
i.e.,NA,NA
 as if they,NA,NA
had a ,NA,NA
display:inline,NA,NA
 CSS rule.,"diveintohtml5.org
  
  
  WHAT DOES IT ALL MEAN?",NA
"ere are several new elements defined in HTML5 whi are blo-level elements. at is, they ",NA,NA
"can contain other blo-level elements, and HTML5-compliant browsers will style them as ",NA,NA
display:block,NA,NA
" by default. If you want to use these elements in older browsers, you will ",NA,NA
need to define the display style manually:,NA,NA
"article,aside,details,figcaption,figure, ",NA,NA
"footer,header,hgroup,menu,nav,section { ",NA,NA
display:block; ,NA,NA
},NA,NA
(is code is lied from Ri Clark’s ,NA,NA
HTML5 Reset Stylesheet,NA,NA
", whi does many other things ",NA,NA
that are beyond the scope of this apter.),NA,NA
"But wait, it gets worse! Prior to version 9, Internet Explorer did not apply ",NA,NA
any,NA,NA
 styling ,NA,NA
"on unknown elements. For example, if you had this markup:",NA,NA
"<style type=""text/css""> ",NA,NA
article { display: block; border: 1px solid red } ,NA,NA
</style> ,NA,NA
...,NA,NA
<article> ,NA,NA
<h1>Welcome to Initech</h1> ,NA,NA
<p>This is your <span>first day</span>.</p> ,NA,NA
</article>,NA,NA
Internet Explorer (up to and including IE 8) will not treat the ,NA,NA
<article>,NA,NA
 element as a blo-,NA,NA
"level element, nor will it put a red border around the article. All the style rules are simply ",NA,NA
"ignored. As I write this, ",NA,NA
Internet Explorer 9 is still in beta,NA,NA
" , but Microso has stated (and","diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
developers have verified) that Internet Explorer 9 will not have this problem.,NA,NA
e second problem is the DOM that browsers create when they encounter unknown ,NA,NA
"elements. Again, the most problematic browser is Internet Explorer. If IE doesn’t ",NA,NA
"explicitly recognize the element name, it will insert the element into the DOM ",NA,NA
as an empty ,NA,NA
node with no ildren,NA,NA
. All the elements that you would expect to be direct ildren of the ,NA,NA
unknown element will actually be inserted as siblings instead.,NA,NA
Here is some righteous ASCII art to illustrate the difference. is is the DOM that HTML5 ,NA,NA
dictates:,NA,NA
article ,NA,NA
| ,NA,NA
+--h1 (child of article) ,NA,NA
| | ,NA,NA
"| +--text node ""Welcome to Initech"" | ",NA,NA
"+--p (child of article, sibling of h1) | ",NA,NA
"+--text node ""This is your "" ",NA,NA
| ,NA,NA
+--span ,NA,NA
| | ,NA,NA
"| +--text node ""first day"" ",NA,NA
| ,NA,NA
"+--text node "".""",NA,NA
But this is the DOM that Internet Explorer actually creates:,NA,NA
article (no children) ,NA,NA
h1 (sibling of article) ,NA,NA
| ,NA,NA
"+--text node ""Welcome to Initech"" ",NA,NA
p (sibling of h1) ,NA,NA
| ,NA,NA
"+--text node ""This is your """,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
| ,NA,NA
+--span ,NA,NA
| | ,NA,NA
"| +--text node ""first day"" ",NA,NA
| ,NA,NA
"+--text node "".""",NA,NA
ere is a wonderous workaround for this problem. If you ,NA,NA
create a dummy ,NA,NA
<article> ,NA,NA
element,NA,NA
" with JavaScript before you use it in your page, Internet Explorer will magically ",NA,NA
recognize the ,NA,NA
<article>,NA,NA
 element and let you style it with CSS. ere is no need to ever ,NA,NA
insert the dummy element into the DOM. Simply creating the element once (per page) ,NA,NA
is enough to tea IE to style the element it doesn’t recognize.,NA,NA
<html> ,NA,NA
<head> ,NA,NA
<style> ,NA,NA
article { display: block; border: 1px solid red } ,NA,NA
</style>,NA,NA
"<script>document.createElement(""article"");</script>",NA,NA
</head> ,NA,NA
<body> ,NA,NA
<article> ,NA,NA
<h1>Welcome to Initech</h1> ,NA,NA
<p>This is your <span>first day</span>.</p> ,NA,NA
</article> ,NA,NA
</body> ,NA,NA
</html>,NA,NA
"is works in all versions of Internet Explorer, all the way ba to IE 6! We can extend this ",NA,NA
"tenique to create dummy copies of all the new HTML5 elements at once — again, they’re ",NA,NA
"never inserted into the DOM, so you’ll never see these dummy elements — and then just ",NA,NA
start using them without having to worry too mu about non-HTML5-capable browsers.,NA,NA
"Remy Sharp has done just that, with his aptly named ",NA,NA
HTML5 enabling script,NA,NA
. e script has ,NA,NA
"gone through 14 revisions at the time of writing, but this is the basic idea:","diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
<!--[if lt IE 9]> ,NA,NA
<script> ,NA,NA
"var e = (""abbr,article,aside,audio,canvas,datalist,details,"" + ",NA,NA
"""figure,footer,header,hgroup,mark,menu,meter,nav,output,"" + ",NA,NA
"""progress,section,time,video"").split(','); ",NA,NA
for (var i = 0; i < e.length; i++) { ,NA,NA
document.createElement(e[i]); ,NA,NA
} ,NA,NA
</script> ,NA,NA
<![endif]-->,NA,NA
e ,NA,NA
<!--[if lt IE 9]>,NA,NA
 and ,NA,NA
<![endif]-->,NA,NA
 bits are ,NA,NA
conditional comments,NA,NA
. Internet ,NA,NA
Explorer interprets them like an ,NA,NA
if,NA,NA
 statement: “if the current browser is a version of ,NA,NA
"Internet Explorer less than version 9, then execute this blo.” Every other browser will ",NA,NA
treat the entire blo as an HTML comment. e net result is that Internet Explorer (up to ,NA,NA
"and including version 8) will execute this script, but other browsers will ignore the script ",NA,NA
altogether. is makes your page load faster in browsers that don’t need this ha.,NA,NA
e JavaScript code itself is relatively straightforward. e variable ,NA,NA
e,NA,NA
 ends up as an array of ,NA,NA
strings like ,NA,NA
"""abbr""",NA,NA
", ",NA,NA
"""article""",NA,NA
", ",NA,NA
"""aside""",NA,NA
", and so on. en we loop through this array and ",NA,NA
create ea of the named elements by calling ,NA,NA
document.createElement(),NA,NA
. But since we ,NA,NA
"ignore the return value, the elements are never inserted into the DOM. But this is enough ",NA,NA
"to get Internet Explorer to treat these elements the way we want them to be treated, once ",NA,NA
we actually use them later in the page.,NA,NA
"at “later” bit is important. is script needs to be at the top of your page, preferably in ",NA,NA
your ,NA,NA
<head>,NA,NA
" element, not at the boom. at way, Internet Explorer will execute the ",NA,NA
script ,NA,NA
before,NA,NA
 it parses your tags and aributes. If you put this script at the boom of your ,NA,NA
"page, it will be too late. Internet Explorer will have already misinterpreted your markup ",NA,NA
"and constructed the wrong DOM, and it won’t go ba and adjust it just because of this ",NA,NA
script.,NA,NA
Remy Sharp has “minified” this script and ,NA,NA
hosted it on Google Project Hosting,NA,NA
 . (In case ,NA,NA
"you were wondering, the script itself is open source and MIT-licensed, so you can use it in ",NA,NA
"any project.) If you like, you can even “hotlink” the script by pointing directly to the ",NA,NA
"hosted version, like this:",NA,NA
<head> ,NA,NA
"<meta charset=""utf-8"" /> ",NA,NA
<title>My Weblog</title> ,NA,NA
<!--[if lt IE 9]>,NA,NA
"<script src=""",NA,NA
http://html5shiv.googlecode.com/svn/trunk/html5.js,NA,NA
"""",NA,NA
></script> ,NA,NA
<![endif]--> ,NA,NA
</head>,NA,NA
Now we’re ready to start using the new semantic elements in HTML5.,NA,NA
❧,NA,NA
HEADERS,NA,NA
Let’s go ba to ,NA,NA
our example page,NA,NA
". Specifically, let’s look at ",NA,NA
just the headers:,NA,NA
"<div id=""header""> ",NA,NA
<h1>My Weblog</h1> ,NA,NA
"<p class=""tagline"">A lot of effort went ",NA,NA
into making this effortless.</p> ,NA,NA
</div>,NA,NA
…,NA,NA
"<div class=""entry"">",NA,NA
<h2>Travel day</h2> ,NA,NA
</div>,NA,NA
…,NA,NA
"<div class=""entry"">","diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
<h2>I'm going to Prague!</h2> ,NA,NA
</div>,NA,NA
"ere is nothing wrong with this markup. If you like it, you can keep it. It is valid HTML5. ",NA,NA
But HTML5 provides some additional semantic elements for headers and sections.,NA,NA
"First off, let’s get rid of that ",NA,NA
"<div id=""header"">",NA,NA
". is is a common paern, but it doesn’t ",NA,NA
mean anything. e ,NA,NA
div,NA,NA
" element has no defined semantics, and the ",NA,NA
id,NA,NA
 aribute has no ,NA,NA
defined semantics. (User agents are not allowed to infer any meaning from the value of the ,NA,NA
id,NA,NA
 aribute.) You could ange this to ,NA,NA
"<div id=""shazbot"">",NA,NA
 and it would have the same ,NA,NA
"semantic value, ",NA,NA
i.e.,NA,NA
", nothing.",NA,NA
HTML5 defines a ,NA,NA
<header>,NA,NA
 element for this purpose. e HTML5 specification has ,NA,NA
real-,NA,NA
world examples of using the ,NA,NA
<header>,NA,NA
 element,NA,NA
. Here is what it would look like on ,NA,NA
our ,NA,NA
example page,NA,NA
:,NA,NA
<header> ,NA,NA
<h1>My Weblog</h1> ,NA,NA
"<p class=""tagline"">A lot of effort went into making this ",NA,NA
effortless.</p>,NA,NA
…,NA,NA
</header>,NA,NA
at’s good. It tells anyone who wants to know that this is a header. But what about that ,NA,NA
"tagline? Another common paern, whi up until now had no standard markup. It’s a ",NA,NA
"difficult thing to mark up. A tagline is like a subheading, but it’s “aaed” to the primary ",NA,NA
"heading.at is, it’s a subheading that doesn’t create its own section.",NA,NA
Header elements like ,NA,NA
<h1>,NA,NA
 and ,NA,NA
<h2>,NA,NA
" give your page structure. Taken together, they create ",NA,NA
an outline that you can use to visualize (or navigate) your page. Screenreaders use ,NA,NA
document outlines to help blind users navigate through your page. ere are ,NA,NA
online tools,NA,NA
 and ,NA,NA
browser extensions,NA,NA
 that can help you visualize your document’s outline.,NA,NA
"In HTML 4, ",NA,NA
<h1>,NA,NA
–,NA,NA
<h6>,NA,NA
 elements were the ,NA,NA
only,NA,NA
 way to create a document outline. e ,NA,NA
outline on the example page looks like this:,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
My Weblog (h1) ,NA,NA
| ,NA,NA
+--Travel day (h2) ,NA,NA
| ,NA,NA
+--I'm going to Prague! (h2),NA,NA
"at’s fine, but it means that there’s no way to mark up the tagline “A lot of effort went into ",NA,NA
making this effortless.” If we tried to mark it up as an ,NA,NA
<h2>,NA,NA
", it would add a phantom node ",NA,NA
to the document outline:,NA,NA
My Weblog (h1) ,NA,NA
| ,NA,NA
+--A lot of effort went into making this effortless. (h2) | ,NA,NA
+--Travel day (h2) ,NA,NA
| ,NA,NA
+--I'm going to Prague! (h2),NA,NA
But that’s not the structure of the document. e tagline does not represent a section; it’s ,NA,NA
just a subheading.,NA,NA
Perhaps we could mark up the tagline as an ,NA,NA
<h2>,NA,NA
 and mark up ea article title as an ,NA,NA
<h3>,NA,NA
? ,NA,NA
"No, that’s even worse:",NA,NA
My Weblog (h1) ,NA,NA
| ,NA,NA
+--A lot of effort went into making this effortless. (h2) | ,NA,NA
+--Travel day (h3) ,NA,NA
| ,NA,NA
+--I'm going to Prague! (h3),NA,NA
"Now we still have a phantom node in our document outline, but it has “stolen” the ildren ",NA,NA
that rightfully belong to the root node. And herein lies the problem: HTML 4 does not ,NA,NA
provide a way to mark up a subheading without adding it to the document outline. No ,NA,NA
"maer how we try to shi things around, “A lot of effort went into making this effortless” is ",NA,NA
going to,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
end up in that graph. And that’s why we ended up with semantically meaningless markup ,NA,NA
like ,NA,NA
"<p class=""tagline"">",NA,NA
.,NA,NA
HTML5 provides a solution for this: the ,NA,NA
<hgroup>,NA,NA
 element. e ,NA,NA
<hgroup>,NA,NA
 element acts as a ,NA,NA
wrapper for two or more ,NA,NA
related,NA,NA
 heading elements. What does “related” mean? It means ,NA,NA
"that, taken together, they only create a single node in the document outline.",NA,NA
Given this markup:,NA,NA
<header>,NA,NA
<hgroup>,NA,NA
<h1>My Weblog</h1>,NA,NA
<h2>A lot of effort went into making this effortless.</h2>,NA,NA
</hgroup>,NA,NA
…,NA,NA
</header>,NA,NA
…,NA,NA
"<div class=""entry""> ",NA,NA
<h2>Travel day</h2> ,NA,NA
</div>,NA,NA
…,NA,NA
"<div class=""entry""> ",NA,NA
<h2>I'm going to Prague!</h2> ,NA,NA
</div>,NA,NA
is is the document outline that is created:,NA,NA
My Weblog (h1 of its hgroup) ,NA,NA
| ,NA,NA
+--Travel day (h2) ,NA,NA
| ,NA,NA
+--I'm going to Prague! (h2),"diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
You can test your own pages in the ,NA,NA
HTML5 Outliner,NA,NA
 to ensure that you’re using the ,NA,NA
heading elements properly.,NA,NA
❧,NA,NA
ARTICLES,NA,NA
Continuing with ,NA,NA
our example page,NA,NA
", let’s see what we can do about this markup:",NA,NA
"<div class=""entry""> ",NA,NA
"<p class=""post-date"">October 22, 2009</p> ",NA,NA
<h2> ,NA,NA
"<a href=""#"" ",NA,NA
"rel=""bookmark"" ",NA,NA
"title=""link to this post""> ",NA,NA
Travel day ,NA,NA
</a> ,NA,NA
</h2>,NA,NA
…,NA,NA
</div>,NA,NA
"Again, this is valid HTML5. But HTML5 provides a more specific element for the common ",NA,NA
case of marking up an article on a page — the aptly named ,NA,NA
<article>,NA,NA
 element.,NA,NA
<article>,NA,NA
"<p class=""post-date"">October 22, 2009</p> ",NA,NA
<h2> ,NA,NA
"<a href=""#"" ",NA,NA
"rel=""bookmark"" ",NA,NA
"title=""link to this post""> ",NA,NA
Travel day ,NA,NA
</a> ,NA,NA
</h2>,"diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
…,NA,NA
</article>,NA,NA
"Ah, but it’s not quite that simple. ere is one more ange you should make. I’ll show it to ",NA,NA
"you first, then explain it:",NA,NA
<article> ,NA,NA
<header> ,NA,NA
"<p class=""post-date"">October 22, 2009</p>",NA,NA
<h1>,NA,NA
"<a href=""#"" ",NA,NA
"rel=""bookmark"" ",NA,NA
"title=""link to this post""> ",NA,NA
Travel day ,NA,NA
</a>,NA,NA
</h1>,NA,NA
</header>,NA,NA
…,NA,NA
</article>,NA,NA
Did you cat that? I anged the ,NA,NA
<h2>,NA,NA
 element to an ,NA,NA
<h1>,NA,NA
", and wrapped it inside a ",NA,NA
<header>,NA,NA
 element. You’ve already seen the ,NA,NA
<header>,NA,NA
 element in action. Its purpose is to ,NA,NA
"wrap all the elements that form the article’s header (in this case, the article’s publication ",NA,NA
date and title). But…but…but… shouldn’t you only have one ,NA,NA
<h1>,NA,NA
 per document? Won’t ,NA,NA
"this screw up the document outline? No, but to understand why not, we need to ba up a ",NA,NA
step.,NA,NA
"In HTML 4, the ",NA,NA
only,NA,NA
 way to create a document outline was with the ,NA,NA
<h1>,NA,NA
–,NA,NA
<h6>,NA,NA
 elements. If ,NA,NA
"you only wanted one root node in your outline, you had to limit yourself to one ",NA,NA
<h1>,NA,NA
 in your ,NA,NA
markup. But the HTML5 specification ,NA,NA
defines an algorithm for generating a document ,NA,NA
outline,NA,NA
 that incorporates the new semantic elements in HTML5. e HTML5 algorithm says ,NA,NA
that an ,NA,NA
<article>,NA,NA
" element creates a new section, that is, a new node in the document ",NA,NA
"outline. And in HTML5, ea section can have its own ",NA,NA
<h1>,NA,NA
 element.,NA,NA
"is is a drastic ange from HTML 4, and here’s why it’s a good thing. Many web pages are ",NA,NA
really generated by templates. A bit of content is taken from one source and inserted into ,NA,NA
the page up here; a bit of content is taken from another source and inserted into the page ,NA,NA
down,"diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
there. Many tutorials are structured the same way. “Here’s some HTML markup. Just copy ,NA,NA
"it and paste it into your page.” at’s fine for small bits of content, but what if the markup ",NA,NA
"you’re pasting is an entire section? In that case, the tutorial will read something like ",NA,NA
"this:“Here’s some HTML markup. Just copy it, paste it into a text editor, and fix the heading ",NA,NA
tags so they mat the nesting level of the corresponding heading tags in the page you’re ,NA,NA
pasting it into.”,NA,NA
Let me put it another way. HTML 4 has no ,NA,NA
generic,NA,NA
 heading element. It has six strictly ,NA,NA
"numbered heading elements, ",NA,NA
<h1>,NA,NA
–,NA,NA
<h6>,NA,NA
", whi must be nested in exactly that order. at ",NA,NA
"kind of sus, especially if your page is “assembled” instead of “authored.” And this is the ",NA,NA
problem that HTML5 solves with the new sectioning elements and the new rules for the ,NA,NA
"existing heading elements. If you’re using the new sectioning elements, I can give you ",NA,NA
this markup:,NA,NA
<article>,NA,NA
<header>,NA,NA
<h1>A syndicated post</h1>,NA,NA
</header>,NA,NA
<p>Lorem ipsum blah blah…</p>,NA,NA
</article>,NA,NA
and you can copy it and paste it ,NA,NA
anywhere in your page,NA,NA
  without modification. e fact that it ,NA,NA
contains an ,NA,NA
<h1>,NA,NA
" element is not a problem, because the entire thing is contained within an ",NA,NA
<article>,NA,NA
. e ,NA,NA
<article>,NA,NA
" element defines a self-contained node in the document outline, ",NA,NA
the ,NA,NA
<h1>,NA,NA
" element provides the title for that outline node, and all the other sectioning ",NA,NA
elements on the page will remain at whatever nesting level they were at before.,NA,NA
PROFESSOR MARKUP SAYS,NA,NA
"As with all things on the web, reality is a lile more",NA,NA
complicated than I’m leing on. e new “explicit”,NA,NA
sectioning elements (like ,NA,NA
<h1>,NA,NA
 wrapped in ,NA,NA
<article>,NA,NA
) ,NA,NA
may interact in unexpected ways with the old ,NA,NA
“implicit”sectioning elements (,NA,NA
<h1>,NA,NA
–,NA,NA
<h6>,NA,NA
 by ,NA,NA
themselves). Your life will be simpler if you use one or the ,NA,NA
"other, but not both. If you must use both on the same ",NA,NA
"page, be sure to e the","diveintohtml5.org
  
  
  WHAT DOES IT ALL 
 MEAN?",NA
result in ,NA,NA
the HTML5 Outliner,NA,NA
 and verify that ,NA,NA
your document outline makes sense.,NA,NA
❧,NA,NA
DATES AND TIMES,NA,NA
"is is exciting, right? I mean, it’s not “skiing down Mount ",NA,NA
Everest naked while reciting the Star Spangled Banner ,NA,NA
"bawards” exciting, but it’s prey exciting as far as semantic ",NA,NA
markup goes. Let’s continue with ,NA,NA
our example page,NA,NA
. e next ,NA,NA
line I want to highlight is this one:,NA,NA
"<div class=""entry"">",NA,NA
"<p class=""post-date"">October 22, 2009</p>",NA,NA
<h2>Travel day</h2>,NA,NA
</div>,NA,NA
"Same old story, right? A common paern — designating the ",NA,NA
publication date of an article — that has no semantic ,NA,NA
"markup to ba it up, so authors resort to generic markup ",NA,NA
with custom,NA,NA
class,NA,NA
" aributes. Again, this is valid HTML5. You’re not ",NA,NA
required,NA,NA
 to ange it. But HTML5,NA,NA
does provide a specific solution for this case: the ,NA,NA
<time>,NA,NA
 element.,NA,NA
"<time datetime=""2009-10-22"" pubdate>October 22, 2009</time>",NA,NA
ere are three parts to a ,NA,NA
<time>,NA,NA
 element:,NA,NA
1. A maine-readable timestamp,NA,NA
2. Human-readable text content,NA,NA
3. An optional ,NA,NA
pubdate,NA,NA
 flag,"diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
"In this example, the ",NA,NA
datetime,NA,NA
" aribute only specifies a date, not a time. e format is a ",NA,NA
"four-digit year, two-digit month, and two-digit day, separated by dashes:",NA,NA
"<time datetime=""2009-10-22"" pubdate>October 22, 2009</time>",NA,NA
"If you want to include a time too, add the leer ",NA,NA
T,NA,NA
" aer the date, then the time in 24-",NA,NA
"hour format, then a timezone offset.",NA,NA
"<time datetime=""2009-10-22T13:59:47-04:00"" pubdate>",NA,NA
"October 22, 2009 1:59pm EDT",NA,NA
</time>,NA,NA
(e date/time format is prey flexible. e HTML5 specification ,NA,NA
contains examples of ,NA,NA
valid date/time strings,NA,NA
.),NA,NA
Notice I anged the text content — the stuff between ,NA,NA
<time>,NA,NA
 and ,NA,NA
</time>,NA,NA
 — to mat the ,NA,NA
maine-readable timestamp. is is not actually required. e text content can be anything ,NA,NA
"you like, as long as you provide a maine-readable date/timestamp in the ",NA,NA
datetime ,NA,NA
aribute. So this is valid HTML5:,NA,NA
"<time datetime=""2009-10-22"">last Thursday</time>",NA,NA
And this is also valid HTML5:,NA,NA
"<time datetime=""2009-10-22""></time>",NA,NA
e final piece of the puzzle here is the ,NA,NA
pubdate,NA,NA
" aribute. It’s a Boolean aribute, so just ",NA,NA
"add it if you need it, like this:",NA,NA
"<time datetime=""2009-10-22"" pubdate>October 22, 2009</time>",NA,NA
"If you dislike “naked” aributes, this is also equivalent:",NA,NA
"<time datetime=""2009-10-22"" pubdate=""pubdate"">October 22,",NA,NA
2009</time>,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
What does the ,NA,NA
pubdate,NA,NA
 aribute mean? It means one of two things. If the ,NA,NA
<time>,NA,NA
 element is ,NA,NA
in an ,NA,NA
<article>,NA,NA
" element, it means that this timestamp is the publication date of the article. ",NA,NA
If the ,NA,NA
<time>,NA,NA
 element is not in an ,NA,NA
<article>,NA,NA
" element, it means that this timestamp is the ",NA,NA
publication date of the entire document.,NA,NA
"Here’s the entire article, reformulated to take full advantage of HTML5:",NA,NA
<article> ,NA,NA
<header> ,NA,NA
"<time datetime=""2009-10-22"" pubdate> ",NA,NA
"October 22, 2009 ",NA,NA
</time> ,NA,NA
<h1> ,NA,NA
"<a href=""#"" ",NA,NA
"rel=""bookmark"" ",NA,NA
"title=""link to this post""> ",NA,NA
Travel day ,NA,NA
</a> ,NA,NA
</h1> ,NA,NA
</header> ,NA,NA
<p>Lorem ipsum dolor sit amet…</p> ,NA,NA
</article>,NA,NA
❧,NA,NA
NAVIGATION,NA,NA
One of the most important parts of any ,NA,NA
web site is the navigation bar. CNN.com ,NA,NA
has “tabs” along the top of ea page that ,NA,NA
link to the different news sections — ,NA,NA
"“Te,”",NA,NA
"“Health,” “Sports,” ",NA,NA
&,NA,NA
c. Google sear ,NA,NA
results ,NA,NA
pages have a similar strip at the top of the,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
page to try your sear in different Google ,NA,NA
"services — “Images,” “Video,” “Maps,” ",NA,NA
&,NA,NA
c. ,NA,NA
And ,NA,NA
our example page,NA,NA
 has a navigation bar ,NA,NA
in the header that includes links to ,NA,NA
different sections of our hypothetical site ,NA,NA
"— “home,”“blog,” “gallery,” and “about.”",NA,NA
is is how the navigation bar was,NA,NA
originally marked up:,NA,NA
"<div id=""nav""> ",NA,NA
<ul> ,NA,NA
"<li><a href=""#"">home</a></li> ",NA,NA
"<li><a href=""#"">blog</a></li> ",NA,NA
"<li><a href=""#"">gallery</a></li> ",NA,NA
"<li><a href=""#"">about</a></li> ",NA,NA
</ul> ,NA,NA
</div>,NA,NA
"Again, this is valid HTML5. But while it’s marked up as a list of four items, there is nothing ",NA,NA
"about the list that tells you that it’s part of the site navigation. Visually, you could guess ",NA,NA
"that by the fact that it’s part of the page header, and by reading the text of the links. But ",NA,NA
"semantically, there is nothing to distinguish this list of links from any other.",NA,NA
"Who cares about the semantics of site navigation? For one, ",NA,NA
people with disabilities,NA,NA
. Why is ,NA,NA
"that? Consider this scenario: your motion is limited, and using a mouse is difficult or ",NA,NA
"impossible. To compensate, you might use a browser add-on that allows you to jump to (or ",NA,NA
"jump past) major navigation links. Or consider this: if your sight is limited, you might use a ",NA,NA
dedicated program called a “screenreader” that uses text-to-spee to speak and ,NA,NA
"summarize web pages. Once you get past the page title, the next important pieces of ",NA,NA
"information about a page are the major navigation links. If you want to navigate quily, ",NA,NA
you’ll tell your screenreader to jump to the navigation bar and start reading. If you want to ,NA,NA
"browse quily, you might tell your screenreader to jump ",NA,NA
over,NA,NA
 the navigation bar and start ,NA,NA
"reading the main content. Either way, being able to determine navigation links ",NA,NA
programmatically is important.,NA,NA
"So, while there’s nothing wrong with using ",NA,NA
"<div id=""nav"">",NA,NA
 to mark up your site,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
"navigation, there’s nothing particularly right about it either. It’s suboptimal in ways that ",NA,NA
affect real people. HTML5 provides a semantic way to mark up navigation sections: the ,NA,NA
<nav> ,NA,NA
element.,NA,NA
<nav>,NA,NA
<ul> ,NA,NA
"<li><a href=""#"">home</a></li> ",NA,NA
"<li><a href=""#"">blog</a></li> ",NA,NA
"<li><a href=""#"">gallery</a></li> ",NA,NA
"<li><a href=""#"">about</a></li> ",NA,NA
</ul>,NA,NA
</nav>,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Are ,NA,NA
skip links,NA,NA
 compatible with the ,NA,NA
<nav> ,NA,NA
element? Do I still need skip links in HTML5?,NA,NA
A: Skip links allow readers to skip over ,NA,NA
navigation sections. ey are helpful for ,NA,NA
disabled users who use third-party soware ,NA,NA
to ,NA,NA
read a web page aloud and navigate it ,NA,NA
without ,NA,NA
a mouse. (,NA,NA
Learn how and why to provide skip ,NA,NA
links,NA,NA
.),NA,NA
Once screenreaders are updated to recognize ,NA,NA
the ,NA,NA
<nav>,NA,NA
" element, skip links will become ",NA,NA
"obsolete, since the screenreader soware will ",NA,NA
be able to automatically offer to skip over a,NA,NA
navigation section marked up with the ,NA,NA
<nav> ,NA,NA
"element. However, it will be a while before all ",NA,NA
the disabled users on the web upgrade to ,NA,NA
"HTML5-savvy screenreader soware, so you ",NA,NA
should continue to provide your own skip ,NA,NA
links to jump over ,NA,NA
<nav>,NA,NA
 sections.,"diveintohtml5.org
  
  
  WHAT DOES IT ALL MEAN?",NA
❧,NA,NA
FOOTERS,NA,NA
"At long last, we have arrived at the end of ",NA,NA
our example page,NA,NA
. e last thing I want to talk ,NA,NA
about is the last thing on the page: the footer. e footer was originally marked up like ,NA,NA
this:,NA,NA
"<div id=""footer""> ",NA,NA
<p>&#167;</p> ,NA,NA
"<p>&#169; 2001&#8211;9 <a href=""#"">Mark Pilgrim</a></p> ",NA,NA
</div>,NA,NA
"is is valid HTML5. If you like it, you can keep it. But HTML5 provides a more specific ",NA,NA
element for this: the ,NA,NA
<footer>,NA,NA
 element.,NA,NA
<footer>,NA,NA
<p>&#167;</p> ,NA,NA
"<p>&#169; 2001&#8211;9 <a href=""#"">Mark Pilgrim</a></p>",NA,NA
</footer>,NA,NA
What’s appropriate to put in a ,NA,NA
<footer>,NA,NA
 element? Probably whatever you’re puing in a ,NA,NA
"<div id=""footer"">",NA,NA
" now. OK, that’s a circular answer. But really, that’s it. e HTML5 ",NA,NA
"specification says, “A footer typically contains information about its section su as who ",NA,NA
"wrote it, links to related documents, copyright data, and the like.” at’s what’s in this ",NA,NA
example page: a short copyright statement and a link to an about-the-author page. Looking ,NA,NA
"around at some popular sites, I see lots of footer potential.",NA,NA
CNN,NA,NA
" has a footer that contains a copyright statement, links to translations, and links ",NA,NA
"to terms of service, privacy, “about us,” “contact us,” and “help” pages. All totally","diveintohtml5.org
  
  WHAT DOES IT ALL MEAN?",NA
appropriate ,NA,NA
<footer>,NA,NA
 material.,NA,NA
Google,NA,NA
" has a famously sparse home page, but at the boom of it are links to",NA,NA
"“Advertising Programs,” “Business Solutions,” and “About Google”; a copyright ",NA,NA
statement; ,NA,NA
and a link to Google’s privacy policy. All of that could be wrapped in a ,NA,NA
<footer>,NA,NA
.,NA,NA
My weblog,NA,NA
" has a footer with links to my other sites, plus a copyright statement. ",NA,NA
Definitely appropriate for a ,NA,NA
<footer>,NA,NA
 element. (Note that the links themselves should ,NA,NA
not,NA,NA
 be wrapped in a ,NA,NA
<nav>,NA,NA
" element, because they are not site navigation links; they are ",NA,NA
just a collection of links to my other projects on other sites.),NA,NA
“,NA,NA
Fat footers,NA,NA
” are all the rage these days. Take a look at the footer on ,NA,NA
the W3C site,NA,NA
. It contains ,NA,NA
"three columns, labeled “Navigation,” “Contact W3C,” and “W3C Updates.” e markup looks ",NA,NA
"like this, more or less:",NA,NA
"<div id=""w3c_footer""> ",NA,NA
"<div class=""w3c_footer-nav""> ",NA,NA
<h3>Navigation</h3> ,NA,NA
<ul> ,NA,NA
"<li><a href=""/"">Home</a></li> ",NA,NA
"<li><a href=""/standards/"">Standards</a></li> ",NA,NA
"<li><a href=""/participate/"">Participate</a></li> ",NA,NA
"<li><a href=""/Consortium/membership"">Membership</a></li> ",NA,NA
"<li><a href=""/Consortium/"">About W3C</a></li> ",NA,NA
</ul> ,NA,NA
</div> ,NA,NA
"<div class=""w3c_footer-nav""> ",NA,NA
<h3>Contact W3C</h3> ,NA,NA
<ul> ,NA,NA
"<li><a href=""/Consortium/contact"">Contact</a></li> ",NA,NA
"<li><a href=""/Help/"">Help and FAQ</a></li> ",NA,NA
"<li><a href=""/Consortium/sup"">Donate</a></li> ",NA,NA
"<li><a href=""/Consortium/siteindex"">Site Map</a></li> </ul> ",NA,NA
</div> ,NA,NA
"<div class=""w3c_footer-nav""> ",NA,NA
<h3>W3C Updates</h3> ,NA,NA
<ul>,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
"<li><a href=""http://twitter.com/W3C"">Twitter</a></li> ",NA,NA
"<li><a href=""http://identi.ca/w3c"">Identi.ca</a></li> ",NA,NA
</ul> ,NA,NA
</div> ,NA,NA
"<p class=""copyright"">Copyright © 2009 W3C</p> ",NA,NA
</div>,NA,NA
"To convert this to semantic HTML5, I would make the following anges:",NA,NA
Convert the outer ,NA,NA
"<div id=""w3c_footer"">",NA,NA
 to a ,NA,NA
<footer>,NA,NA
 element.,NA,NA
Convert the first two instances of ,NA,NA
"<div class=""w3c_footer-nav"">",NA,NA
 to ,NA,NA
<nav> ,NA,NA
"elements, and the third instance to a ",NA,NA
<section>,NA,NA
 element.,NA,NA
Convert the ,NA,NA
<h3>,NA,NA
 headers to ,NA,NA
<h1>,NA,NA
", since they’ll now ea be inside a sectioning ",NA,NA
element. e ,NA,NA
<nav>,NA,NA
" element creates a section in the document outline, just like ",NA,NA
the ,NA,NA
<article>,NA,NA
 element,NA,NA
.,NA,NA
e final markup might look something like this:,NA,NA
<footer>,NA,NA
<nav>,NA,NA
</ul>,NA,NA
</nav>,NA,NA
<section>,NA,NA
<h1>W3C Updates</h1>,NA,NA
<ul> ,NA,NA
"<li><a href=""http://twitter.com/W3C"">Twitter</a></li> ",NA,NA
"<li><a href=""http://identi.ca/w3c"">Identi.ca</a></li> ",NA,NA
</ul>,NA,NA
</section>,NA,NA
"<p class=""copyright"">Copyright © 2009 W3C</p>",NA,NA
</footer>,NA,NA
❧,NA,NA
FURTHER READING,NA,NA
Example pages used throughout this apter:,NA,NA
Original (HTML 4) ,NA,NA
Modified (HTML5),NA,NA
On aracter encoding:,NA,NA
"e Absolute Minimum Every Soware Developer Absolutely, Positively Must Know ",NA,NA
About Unicode and Character Sets (No Excuses!),NA,NA
 by Joel Spolsky ,NA,NA
On the Goodness of Unicode,NA,NA
", ",NA,NA
On Character Strings,NA,NA
", and ",NA,NA
Characters vs. Bytes,NA,NA
 by Tim ,NA,NA
Bray,NA,NA
On enabling new HTML5 in Internet Explorer:,NA,NA
How to style unknown elements in IE,NA,NA
  by Sjoerd Visser,WHAT DOES IT ALL MEAN?,NA
HTML5 shiv,NA,NA
 by John Resig,NA,NA
HTML5 enabling script,NA,NA
 by Remy Sharp,diveintohtml5.org,NA
On standards modes and doctype sniffing:,NA,NA
Activating Browser Modes with Doctype,NA,NA
  by Henri Sivonen. is is the only article ,NA,NA
you ,NA,NA
should read on the subject. Any article on doctypes that doesn’t reference ,NA,NA
Henri’s work ,NA,NA
"is guaranteed to be out of date, incomplete, or wrong.",NA,NA
HTML5-aware validator:,NA,NA
html5.validator.nu,NA,NA
❧,NA,NA
is has been “What Does It All Mean?” e ,NA,NA
full table of contents,NA,NA
 has more if you’d like to ,NA,NA
keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition,NA,NA
directly from O’Reilly,NA,NA
". You’ll get a book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,diveintohtml5.org WHAT DOES IT ALL MEAN?,NA
powered by Google™,NA,NA
Search,WHAT DOES IT ALL MEAN?,NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
4. ,NA,NA
. ,NA,NA
LET’S CALL IT A ,NA,NA
DRAW(ING SURFACE) ,NA,NA
show ,NA,NA
table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
TML 5 defines ,NA,NA
the <canvas> element,NA,NA
 as “a resolution-dependent bitmap ,NA,NA
"canvas whi can be used for rendering graphs, game graphics, or other ",NA,NA
visual images on the fly.” A canvas is a rectangle in your page where you can ,NA,NA
use JavaScript to draw anything you want.,NA,NA
BASIC <CANVAS> SUPPORT,NA,NA
IE,*,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
7.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
1.0+,NA,NA
1.0+,"* Internet Explorer support requires the third-party 
 explorercanvas
  library.",NA
"So what does a canvas look like? Nothing, really. A ",<canvas>,NA
 element has no content and,NA,NA
no border of its own.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
↜,NA,NA
 Invisible canvas,NA,NA
e markup looks like this:,"<canvas width=""300"" height=""225""></canvas>",NA
Let’s add a doed border so we can see what we’re dealing with.,NA,NA
↜,NA,NA
 Canvas with border,NA,NA
You can have more than one ,<canvas>,NA
 element on the same page. Ea canvas will show up,NA,NA
"in the DOM, and ea canvas maintains its own state. If you give ea canvas an ",id,NA
" aribute,",NA,NA
you can access them just like any other element.,NA,NA
Let’s expand that markup to include an ,id,NA
 aribute:,"<canvas id=""a"" width=""300"" height=""225""></canvas>",NA
Now you can easily find that ,<canvas>,NA
 element in the DOM.,"var a_canvas = document.getElementById(""a"");",NA
❧,NA,NA
SIMPLE SHAPES,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
IE,*,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
7.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
1.0+,NA,NA
1.0+,"* Internet Explorer support requires the third-party 
 explorercanvas
  library.",NA
Every canvas starts out blank. at’s boring! Let’s draw something.,NA,NA
canvas,NA,NA
⇜,NA,NA
 Click to draw on this,NA,NA
e ,onclick,NA
 handler called this function:,"function draw_b() { 
  
 var b_canvas = document.getElementById(""b""); 
 var b_context = b_canvas.getContext(""2d""); 
 b_context.fillRect(50, 25, 150, 100); 
  
 }",NA
e 1,ST,NA
 line of the function is nothing special; it just finds the ,<canvas>,NA
 element in the ,NA,NA
DOM.,function draw_b() {,NA
And then there’s this ,NA,NA
⇝,"var b_canvas = 
  
 document.getElementById(""b"");
  
  
 var b_context = b_canvas.getContext(""2d"");
  
 b_context.fillRect(50, 25, 150, 100); }
  
 diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
"Every canvas has a drawing context, whi is ",NA,NA
where all the fun stuff happens. Once you’ve ,NA,NA
found a ,<canvas>,NA
 element in the DOM (by ,NA,NA
using ,document.getElementById(),NA
 or any ,NA,NA
"other method you like), you call its ",getContext(),NA
 method. You ,NA,NA
must,NA,NA
 pass the ,NA,NA
string ,"""2d""",NA
 to the ,getContext(),NA
 method.,NA,NA
☞,NA,NA
Q: Is there a 3-D canvas?,NA,NA
A: Not yet. Individual vendors have,NA,NA
experimented with their own three-,NA,NA
"dimensional canvas APIs, but none of them have been ",NA,NA
"standardized.e HTML5 specification notes, “A future version of ",NA,NA
this specification will probably define a 3d context.”,NA,NA
"So, you have a ",<canvas>,NA
" element, and you have its drawing context. e drawing context is ",NA,NA
where all the drawing methods and properties are defined. ere’s a whole group of ,NA,NA
properties and methods devoted to drawing rectangles:,NA,NA
e ,fillStyle,NA
" property can be a CSS color, a paern, or a gradient. (More on ",NA,NA
gradients shortly.) e default ,fillStyle,NA
" is solid bla, but you can set it to whatever ",NA,NA
you like. Ea drawing context remembers its own properties as long as the page is ,NA,NA
"open, unless you do something to reset it.","fillRect(x, y, width, height)",NA
 draws a rectangle filled with the current fill ,NA,NA
style.,NA,NA
e ,strokeStyle,NA
 property is like ,fillStyle,NA
" — it can be a CSS color, a paern, or a ",NA,NA
gradient.,"strokeRect(x, y, width, height)",NA
 draws an rectangle with the current stroke ,NA,NA
style. ,strokeRect,NA
 doesn’t fill in the middle; it just draws the edges.,"clearRect(x, y, width, height)",NA
 clears the pixels in the specified rectangle.,NA,NA
ASK PROFESSOR MARKUP,diveintohtml5.org,NA
☞,LET’S CALL IT A DRAW(ING SURFACE),NA
☞,NA,NA
Q: Can I “reset” a canvas? ,NA,NA
A: Yes. ,NA,NA
Seing the width or height of a ,<canvas>,NA
 element will erase its contents and ,NA,NA
reset all the properties of its drawing context ,NA,NA
to their default values. You don’t even need ,NA,NA
to,NA,NA
ange,NA,NA
 the width; you can simply set it to its,NA,NA
"current value, like this:","var b_canvas =
  
 document.getElementById(""b"");
  
 b_canvas.width = 
 b_canvas.width;",NA
Geing ba to that code sample in the previous example…,var b_canvas =,NA
Draw a rectangle ,NA,NA
⇝,"document.getElementById(""b""); 
 var b_context = 
  
 b_canvas.getContext(""2d"");
  
  
 b_context.fillRect(50, 25, 150, 100);",NA
Calling the ,fillRect(),NA
" method draws the rectangle and fills it with the current fill style, ",NA,NA
"whi is bla until you ange it. e rectangle is bounded by its upper-le corner (50, ",NA,NA
"25), its width (150), and its height (100). To get a beer picture of how that works, let’s ",NA,NA
look at the canvas coordinate system.,NA,NA
❧,NA,NA
CANVAS COORDINATES,NA,NA
"e canvas is a two-dimensional grid. e coordinate (0, 0) is at the upper-le corner of the","diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
"canvas. Along the X-axis, values increase towards the right edge of the canvas. Along the ",NA,NA
"Y-axis, values increase towards the boom edge of the canvas.",NA,NA
Canvas coordinates diagram ,NA,NA
↷,NA,NA
at coordinate diagram was drawn with a ,<canvas>,NA
 element. It comprises,NA,NA
a set of off-white vertical lines ,NA,NA
a set of off-white horizontal lines ,NA,NA
two bla horizontal lines ,NA,NA
two small bla diagonal lines that form an arrow two ,NA,NA
bla vertical lines ,NA,NA
two small bla diagonal lines that form another ,NA,NA
arrow,NA,NA
the leer “x”,NA,NA
the leer “y”,NA,NA
"the text “(0, 0)” near the upper-le corner ",NA,NA
"the text “(500, 375)” near the lower-right corner ",NA,NA
"a dot in the upper-le corner, and another in the lower-right ",NA,NA
corner,NA,NA
"First, we need to define the ",<canvas>,NA
 element itself. e ,<canvas>,NA
 element defines the ,width,NA
 and ,height,NA
", and the ",id,NA
 so we can find it later.,NA,NA
en we need a script to find the ,<canvas>,NA
 element in the DOM and get its drawing ,NA,NA
context.,"var c_canvas = document.getElementById(""c"");
  
 var context = c_canvas.getContext(""2d"");",NA
Now we can start drawing lines.,NA,NA
❧,NA,NA
PATHS,NA,NA
IE,*,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
7.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
1.0+,NA,NA
1.0+,"* Internet Explorer support requires the third-party 
 explorercanvas
  library.",NA
Imagine you’re drawing a picture in ink. You don’t want to just ,NA,NA
"dive in and start drawing with ink, because you might make a ",NA,NA
"mistake. Instead, you sket the lines and curves with a pencil, ",NA,NA
"and once you’re happy with it, you trace over your sket in ink.",NA,NA
Ea canvas has a path. Defining the path is like drawing with a ,NA,NA
"pencil. You can draw whatever you like, but it won’t be part of ",NA,NA
the finished product until you pi up the quill and trace over ,NA,NA
your path in ink.,NA,NA
"To draw straight lines in pencil, you use the following ",NA,NA
two methods:,NA,NA
1. ,"moveTo(x, y)",NA
 moves the pencil to the specified starting ,NA,NA
point. 2. ,"lineTo(x, y)",NA
 draws a line to the specified ending point.,NA,NA
e more you call ,moveTo(),NA
 and ,lineTo(),NA
", the bigger the path gets. ese are “pencil”methods ",NA,NA
"— you can call them as oen as you like, but you won’t see anything on the canvas ","diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
until you call one of the “ink” methods.,NA,NA
Let’s begin by drawing the off-white grid.,"for (var x = 0.5; x < 500; x += 10) {
  
 context.moveTo(x, 0);
  
 context.lineTo(x, 375);
  
 }",NA
⇜,NA,NA
 Draw vertical ,NA,NA
lines,"for (var y = 0.5; y < 375; y += 10) {
  
 context.moveTo(0, y);
  
 context.lineTo(500, y);
  
 }",NA
⇜,NA,NA
 Draw horizontal ,NA,NA
lines,NA,NA
ose were all “pencil” methods. Nothing has actually been drawn on the canvas yet. We ,NA,NA
need an “ink” method to make it permanent.,"context.strokeStyle = ""#eee"";
  
 context.stroke();
  
 stroke()",NA
 is one of the “ink” methods. It takes the complex path you defined with all ,NA,NA
those ,moveTo(),NA
 and ,lineTo(),NA
" calls, and actually draws it on the canvas. e ",strokeStyle,NA
controls the color of the lines. is is the result:,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Why did you start ,x,NA
 and ,y,NA
 at ,0.5,NA
? Why ,NA,NA
not ,0,NA
?,NA,NA
A: Imagine ea pixel as a large square. e ,NA,NA
"whole-number coordinates (0, 1, 2…) are ",NA,NA
the ,NA,NA
edges of the squares. If you draw a one-,NA,NA
unit-,NA,NA
wide line between whole-number ,NA,NA
"coordinates, ",NA,NA
it will overlap opposite sides of the pixel ,NA,NA
"square, and the resulting line will be drawn ",NA,NA
two pixels wide. To draw a line that is only ,NA,NA
"one pixel wide, you need to shi the ",NA,NA
coordinates by 0.5 perpendicular to the ,NA,NA
line's ,NA,NA
direction.,NA,NA
"For example, if you try to draw a line from ","(1, 0)",NA
 to ,"(1, 3)",NA
", the browser will draw a ",NA,NA
line covering 0.5 screen pixels on either side ,NA,NA
of ,NA,NA
"But, if you try to draw a line from ","(1.5, 0)",NA
to ,"(1.5, 3)",NA
", the browser will draw a line ",NA,NA
covering 0.5 screen pixels on either side of ,x=1.5,NA
", whi results in a true 1-pixel-wide ",NA,NA
line:,NA,NA
anks to Jason Johnson for providing these,NA,NA
diagrams.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
Now let’s draw the horizontal arrow. All the lines and curves on a path are drawn in ,NA,NA
"the same color (or gradient — yes, we’ll get to those soon). We want to draw the ",NA,NA
arrow in a different color ink — bla instead of off-white — so we need to start a ,NA,NA
new path.,NA,NA
A new path ,NA,NA
↷,"context.beginPath();
  
 context.moveTo(0, 40);
  
 context.lineTo(240, 40);
  
 context.moveTo(260, 40);
  
 context.lineTo(500, 40);
  
 context.moveTo(495, 35);
  
 context.lineTo(500, 40);
  
 context.lineTo(495, 45);",NA
e vertical arrow looks mu the same. Since the vertical arrow is the same color as the ,NA,NA
"horizontal arrow, we do ",NA,NA
not,NA,NA
 need to start another new path. e two arrows will be part ,NA,NA
of the same path.,"context.moveTo(60, 0);
  
 context.lineTo(60, 153); 
 context.moveTo(60, 173); 
 context.lineTo(60, 375);",NA
↜,NA,NA
 Not a new path,"context.moveTo(65, 370);
  
 context.lineTo(60, 375);
  
 context.lineTo(55, 370);",NA
"I said these arrows were going to be bla, but the ",strokeStyle,NA
 is still off-white. (e ,fillStyle,NA
 and ,strokeStyle,NA
" don’t get reset when you start a new path.) at’s OK, ",NA,NA
"because we’ve just run a series of “pencil” methods. But before we draw it for real, in ",NA,NA
"“ink,”we need to set the ",strokeStyle,NA
" to bla. Otherwise, these two arrows will be off-",NA,NA
"white, and we’ll hardly be able to see them! e following lines ange the color to bla and ",NA,NA
draw the lines on the canvas:,"context.strokeStyle = ""#000"";
  
 context.stroke();",NA
is is the result:,NA,NA
❧,NA,NA
TEXT,NA,NA
IE,*,NA
FIREFOX,†,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
7.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
1.0+,NA,NA
1.0+,"* Internet Explorer support requires the third-party 
 explorercanvas
  
 library.† Mozilla Firefox 3.0 support requires a compatibility shim.",NA
In addition to drawing ,NA,NA
lines on a canvas,NA,NA
", you can also draw text on a canvas. Unlike text on ",NA,NA
"the surrounding web page, there is no box model. at means none of the familiar CSS ",NA,NA
"layout teniques are available: no floats, no margins, no padding, no word wrapping. ",NA,NA
"(Maybe you think that’s a good thing!) You can set a few font aributes, then you pi a ",NA,NA
point on the canvas and draw your text there.,NA,NA
e following font aributes are available on the ,NA,NA
drawing context,NA,NA
:,font,NA
 can be anything you would put in a CSS ,font,NA
" rule. at includes font style, font","diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
"variant, font weight, font size, line height, and font family.",textAlign,NA
 controls text alignment. It is similar (but not identical) to a CSS ,"text-
 align",NA
 rule. Possible values are ,start,NA
", ",end,NA
", ",left,NA
", ",right,NA
", and ",center,NA
.,textBaseline,NA
 controls where the text is drawn relative to the starting point. ,NA,NA
Possible values are ,top,NA
", ",hanging,NA
", ",middle,NA
", ",alphabetic,NA
", ",ideographic,NA
", or ",bottom,NA
.,textBaseline,NA
" is triy, because text is triy (English text isn’t, but you can draw ",NA,NA
any Unicode ,NA,NA
"aracter you like on a canvas, and Unicode is triy). ",NA,NA
e HTML5 ,NA,NA
specification ,NA,NA
explains the different text baselines,NA,NA
:,NA,NA
"e top of the em square is roughly at the top of the glyphs in a font, the hanging ",NA,NA
baseline is where some glyphs like ,NA,NA
आ,NA,NA
" are anored, the middle is half-way ",NA,NA
"between the top of the em square and the boom of the em square, the ",NA,NA
alphabetic baseline is where aracters like ,NA,NA
Á,NA,NA
", ",NA,NA
ÿ,NA,NA
", ",NA,NA
f,NA,NA
", and ",NA,NA
Ω,NA,NA
" are anored, the ",NA,NA
ideographic baseline is where glyphs like ,NA,NA
私,NA,NA
 and ,NA,NA
達,NA,NA
" are anored, and the ",NA,NA
boom of the em square is roughly at the boom of the glyphs in a font. e top ,NA,NA
"and boom of the bounding box can be far from these baselines, due to glyphs ",NA,NA
extending far outside the em square.,NA,NA
"For simple alphabets like English, you can safely sti with ",top,NA
", ",middle,NA
", or ",bottom,NA
 for the ,textBaseline,NA
 property.,NA,NA
Let’s draw some text! Text drawn inside the canvas inherits the font size and style of ,NA,NA
the ,<canvas>,NA
" element itself, but you can override this by seing the ",font,NA
 property on ,NA,NA
the drawing context.,"context.font = ""bold 12px sans-serif"";
  
  
 context.fillText(""x"", 248, 43); 
 diveintohtml5.org",NA
↜,NA,NA
 Change the font,"LET’S 
 CALL IT A DRAW(ING SURFACE)",NA
style,NA,NA
e ,fillText(),NA
 method draws the actual text.,"context.font = ""bold 12px sans-serif"";
  
 context.fillText(""x"", 248, 43);
  
 context.fillText(""y"", 58, 165);",NA
⇜,NA,NA
 Draw the text,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Can I use relative font sizes to draw text ,NA,NA
on a canvas?,NA,NA
A: Yes. Like every other HTML element on,NA,NA
"your page, the ",<canvas>,NA
 element itself has ,NA,NA
a computed font size based on your page’s ,NA,NA
CSS rules. If you set the ,context.font,NA
 ,NA,NA
property to a relative font size like ,1.5em,NA
 or ,150%,NA
", your browser multiplies this by the ",NA,NA
computed font size of the ,<canvas>,NA
 ,NA,NA
element itself.,NA,NA
"For the text in the upper-le corner, let’s say I want the top of the text to be at ",y=5,NA
. But ,NA,NA
I’m lazy — I don’t want to measure the height of the text and calculate the baseline. ,NA,NA
"Instead, I can set ",textBaseline,NA
 to ,top,NA
 and pass in the upper-le coordinate of the text’s ,NA,NA
bounding box.,"context.textBaseline = ""top"";
  
 context.fillText(""( 0 , 0 )"", 8, 5);",NA
Now for the text in the lower-right corner. Let’s say I want the boom-right corner of the ,NA,NA
text to be at coordinates ,"(492,370)",NA
 — just a few pixels away from the boom-right ,NA,NA
corner of the canvas — but I don’t want to measure the width or height of the text. I can ,NA,NA
set ,textAlign,NA
 to ,right,NA
 and ,textBaseline,NA
 to ,bottom,NA
", then call ",fillText(),NA
 with the ,NA,NA
boom-right coordinates of the text’s bounding box.,NA,NA
And this is the result:,NA,NA
Oops! We forgot the dots in the corners. We’ll see how to draw circles a lile later. For ,NA,NA
"now, I’ll eat a lile and ",NA,NA
draw them as rectangles,NA,NA
.,"context.fillRect(0, 0, 3, 3); 
  
 context.fillRect(497, 372, 3, 3);",NA
⇜,NA,NA
 Draw two “dots”,NA,NA
And that’s all she wrote! Here is the final product:,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
❧,NA,NA
GRADIENTS,NA,NA
linear ,NA,NA
gradients,NA,NA
IE,*,NA
FIREFOX,NA,NA
 SAFARI ,NA,NA
SAFARI,NA,NA
 CHROME ,NA,NA
CHROME,NA,NA
 OPERA ,NA,NA
OPERA,NA,NA
 IPHONE,NA,NA
ANDROID,NA,NA
7.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
1.0+,NA,NA
1.0+,NA,NA
radial ,NA,NA
gradients,NA,NA
·,NA,NA
3.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
1.0+,NA,NA
1.0+,"* Internet Explorer support requires the third-party 
 explorercanvas
  library.",NA
"Earlier in this apter, you learned how to draw ",NA,NA
a rectangle filled with a solid color,NA,NA
" , then ",NA,NA
a ,NA,NA
line stroked with a solid color,NA,NA
. But shapes and lines aren’t limited to solid colors. You can ,NA,NA
do all kinds of magic with gradients. Let’s look at an example.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
e markup looks the same as any other canvas.,"<canvas id=""d"" width=""300"" height=""225""></canvas>",NA
"First, we need to find the ",<canvas>,NA
 element and its drawing context.,"var d_canvas = document.getElementById(""d"");
  
 var context = d_canvas.getContext(""2d"");",NA
"Once we have the drawing context, we can start to define a gradient. A gradient is a ",NA,NA
smooth transition between two or more colors. e canvas drawing context supports two ,NA,NA
types of gradients:,NA,NA
1. ,"createLinearGradient(x0, y0, x1, y1)",NA
" paints along a line from (x0, y0) to (x1, ",NA,NA
y1).,NA,NA
2. ,"createRadialGradient(x0, y0, r0, x1, y1, r1)",NA
 paints along a cone between ,NA,NA
"two circles. e first three parameters represent the start circle, with origin (x0, y0) ",NA,NA
"and radius r0. e last three parameters represent the end circle, with origin (x1, y1) ",NA,NA
and radius r1.,NA,NA
"Let’s make a linear gradient. Gradients can be any size, but I’ll make this gradient be ",NA,NA
"300 pixels wide, like the canvas.",NA,NA
Create a gradient object ,NA,NA
↷,"var my_gradient = context.createLinearGradient(0, 0, 300, 0);
  
  
  
 diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
Because the ,y,NA
 values (the 2,ND,NA
 and 4,TH,NA
" parameters) are both 0, this gradient will shade ",NA,NA
evenly from le to right.,NA,NA
"Once we have a gradient object, we can define the gradient’s colors. A gradient has two or ",NA,NA
"more color stops. Color stops can be anywhere along the gradient. To add a color stop, ",NA,NA
you need to specify its position along the gradient. Gradient positions can be anywhere ,NA,NA
between 0 to 1.,NA,NA
Let’s define a gradient that shades from bla to white.,"my_gradient.addColorStop(0, ""black"");
  
 my_gradient.addColorStop(1, ""white"");",NA
Defining a gradient doesn’t draw anything on the canvas. It’s just an object tued away ,NA,NA
"in memory somewhere. To draw a gradient, you set your ",fillStyle,NA
 to the gradient and ,NA,NA
"draw a shape, like a rectangle or a line.",NA,NA
Fill style is a gradient ,NA,NA
↷,"context.fillStyle = my_gradient;
  
 context.fillRect(0, 0, 300, 225);",NA
And this is the result:,NA,NA
Suppose you want a gradient that shades from top to boom. When you create the ,NA,NA
"gradient object, keep the ",x,NA
 values (1,ST,NA
 and 3,RD,NA
" parameters) constant, and make the ",y,NA
 ,NA,NA
values (2,ND,NA
 and 4,TH,NA
 parameters) range from 0 to the height of the canvas.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
"x values are 0, y values vary ",NA,NA
↷,"var my_gradient = context.createLinearGradient(0, 0, 0, 225);
  
  
  
 my_gradient.addColorStop(0, ""black""); 
 my_gradient.addColorStop(1, ""white""); 
 context.fillStyle = my_gradient; 
  
 context.fillRect(0, 0, 300, 225);",NA
And this is the result:,NA,NA
You can also create gradients along a diagonal.,NA,NA
both x and y values vary ,NA,NA
↷,"var my_gradient = context.createLinearGradient(0, 0, 300, 225);
  
  
  
 my_gradient.addColorStop(0, ""black""); 
 my_gradient.addColorStop(1, ""white""); 
 context.fillStyle = my_gradient; 
  
 context.fillRect(0, 0, 300, 225);",NA
And this is the result:,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
❧,NA,NA
IMAGES,NA,NA
IE,*,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
7.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
1.0+,NA,NA
1.0+,"* Internet Explorer support requires the third-party 
 explorercanvas
  library.",NA
Here is a cat:,NA,NA
⇜,NA,NA
 An <img> element,NA,NA
"Here is the same cat, drawn on a canvas:",NA,NA
A <canvas> element ,NA,NA
⇝,NA,NA
e canvas drawing context defines a ,drawImage(),NA
 method for drawing an image on a,NA,NA
"canvas. e method can take three, five, or nine arguments.","diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
 takes an image and draws it on the canvas. e given ,NA,NA
coordinates ,"(dx, dy)",NA
 will be the upper-le corner of the image. Coordinates ,"(0, 
 0)",NA
would draw the image at the upper-le corner of the canvas.,"drawImage(image, dx, dy, dw, dh)",NA
" takes an image, scales it to a width of ",dw,NA
and a height of ,dh,NA
", and draws it on the canvas at coordinates ","(dx, dy)",NA
.,"drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)",NA
" takes an image, clips it to ",NA,NA
the rectangle ,"(sx, sy, sw, sh)",NA
", scales it to dimensions ","(dw, dh)",NA
", and draws it on ",NA,NA
the canvas at coordinates ,"(dx, dy)",NA
.,NA,NA
e HTML5 specification ,NA,NA
explains the ,drawImage(),NA
 parameters,NA,NA
:,NA,NA
e source rectangle is the rectangle [within the source image] whose corners ,NA,NA
are the four points ,"(sx, sy)",NA
", ","(sx+sw, sy)",NA
", ","(sx+sw, sy+sh)",NA
", ","(sx, sy+sh)",NA
.,NA,NA
e destination rectangle is the rectangle [within the canvas] whose corners are ,NA,NA
the four points ,"(dx, dy)",NA
", ","(dx+dw, dy)",NA
", ","(dx+dw, dy+dh)",NA
", ","(dx, dy+dh)",NA
.,NA,NA
"To draw an image on a canvas, you need an image. e image can be an existing ",<img>,NA
"element, or you can create an ",Image(),NA
" object with JavaScript. Either way, you need to ",NA,NA
ensure that the image is fully loaded before you can draw it on the canvas.,NA,NA
If you’re using an existing ,<img>,NA
" element, you can safely draw it on the canvas during ",NA,NA
the ,window.onload,NA
 event.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
↶,NA,NA
 using an <img> element,"<img id=""cat"" src=""images/cat.png"" alt=""sleeping cat""
  
  
  
 width=""177"" height=""113""> 
  
 <canvas id=""e"" width=""177"" height=""113""></canvas> 
 <script>
  
  
  
 window.onload = function() {
  
 var canvas = document.getElementById(""e""); 
 var context = canvas.getContext(""2d""); var 
 cat = document.getElementById(""cat"");
  
 context.drawImage(cat, 0, 0);
  
 }; 
  
 </script>",NA
"If you’re creating the image object entirely in JavaScript, you can safely draw the image ",NA,NA
on the canvas during the ,Image.onload,NA
 event.,NA,NA
using an Image() object ,NA,NA
↷,"<canvas id=""e"" width=""177"" height=""113""></canvas> 
 <script> 
  
 var canvas = document.getElementById(""e""); 
  
 var context = canvas.getContext(""2d"");
  
 var cat = new Image();
  
  
  
 cat.src = ""images/cat.png"";
  
  
  
 cat.onload = function() {
  
 context.drawImage(cat, 0, 0); 
  
 }; 
  
 </script>",NA
e optional 3,RD,NA
 and 4,TH,NA
 parameters to the ,drawImage(),NA
 method control image scaling. is ,NA,NA
"is the same image, scaled to half its width and height and drawn repeatedly at different ",NA,NA
coordinates within a single canvas.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
Here is the script that produces the “multicat” effect:,"cat.onload = function() {
  
 for (var x = 0, y = 0;
  
 x < 500 && y < 375;
  
 x += 50, y += 37) { 
  
 context.drawImage(cat, x, y, 88, 56);
  
  
 } 
  
 };",NA
⇜,NA,NA
 Scale the ,NA,NA
image,NA,NA
All this effort raises a legitimate question: why would you want to draw an image on a ,NA,NA
canvas in the first place? What does the extra complexity of image-on-a-canvas buy you ,NA,NA
over an ,<img>,NA
 element and some CSS rules? Even the “multicat” effect could be replicated ,NA,NA
with 10 overlapping ,<img>,NA
 elements.,NA,NA
"e simple answer is, for the same reason you might want to ",NA,NA
draw text on a canvas,NA,NA
 . e ,NA,NA
canvas coordinates diagram,NA,NA
" included text, lines, and shapes; the text-on-a-canvas was just ",NA,NA
one part of a larger work. A more complex diagram could easily use ,drawImage(),NA
 to ,NA,NA
"include icons, sprites, or other graphics.",NA,NA
❧,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
WHAT ABOUT IE?,NA,NA
"Microso Internet Explorer (up to and including version 8, the current version at time ",NA,NA
"of writing) does not support the canvas API. However, Internet Explorer does support a ",NA,NA
"Microso-proprietary tenology called VML, whi can do many of the same things as ",NA,NA
the ,<canvas>,NA
" element. And thus, ",excanvas.js,NA
 was born.,NA,NA
Explorercanvas,NA,NA
 (,excanvas.js,NA
") is an open source, Apae-licensed JavaScript library that ",NA,NA
"implements the canvas API in Internet Explorer. To use it, include the following ",<script>,NA
element at the top of your page.,"<!DOCTYPE html>
  
 <html>
  
 <head>
  
 <meta charset=""utf-8"">
  
 <title>Dive Into HTML5</title>
  
 <!--[if IE]> 
  
 <script src=""excanvas.js""></script> 
 <![endif]-->
  
 </head>
  
 <body>
  
 ...
  
 </body>
  
 </html>",NA
e ,<!--[if IE]>,NA
 and ,<![endif]-->,NA
 bits are ,NA,NA
conditional comments,NA,NA
. Internet Explorer ,NA,NA
interprets them like an ,if,NA
 statement: “if the current browser is any version of Internet ,NA,NA
"Explorer, then execute this blo.” Every other browser will treat the entire blo as an ",NA,NA
HTML comment. e net result is that Internet Explorer will download the ,excanvas.js,NA
 ,NA,NA
"script and execute it, but other browsers will ignore the script altogether (not download it, ",NA,NA
"not execute it, not anything). is makes your page load faster in browsers that implement ",NA,NA
the canvas API natively.,NA,NA
Once you include the ,excanvas.js,NA
 in the ,<head>,NA
" of your page, you don’t need to do ",NA,NA
anything else to accomodate Internet Explorer. Just include ,<canvas>,NA
 elements in ,NA,NA
your,NA,NA
"markup, or create them dynamically with JavaScript. Follow the instructions in this apter ",NA,NA
to get the drawing context of a ,<canvas>,NA
" element, and you can draw shapes, text, and ",NA,NA
paerns.,NA,NA
Well… not quite. ere are a few limitations:,NA,NA
1. ,NA,NA
Gradients,NA,NA
 can only be linear. ,NA,NA
Radial gradients,NA,NA
 are not supported.,NA,NA
2. Paerns must be repeating in both directions.,NA,NA
3. ,NA,NA
Clipping regions,NA,NA
 are not supported.,NA,NA
4. Non-uniform ,NA,NA
scaling,NA,NA
 does not correctly scale strokes.,NA,NA
"5. It’s slow. is should not come as a raging sho to anyone, since Internet Explorer's ",NA,NA
JavaScript parser is slower than other browsers to begin with. Once you start ,NA,NA
drawing complex shapes via a JavaScript library that translates commands to a ,NA,NA
"completely different tenology, things are going to get bogged down. You won’t ",NA,NA
notice the performance degradation in simple examples like drawing a few lines and ,NA,NA
"transforming an image, but you’ll see it right away once you start doing canvas-",NA,NA
based animation and other crazy stuff.,NA,NA
ere is one more caveat about using ,excanvas.js,NA
", and it’s a problem that I ran into while ",NA,NA
creating the examples in this apter. ExplorerCanvas initializes its own faux-canvas ,NA,NA
interface automatically whenever you include the ,excanvas.js,NA
 script in your HTML ,NA,NA
page. But that doesn’t mean that Internet Explorer is ready to use it immediately. In ,NA,NA
"certain situations, you can run into a race condition where the faux-canvas interface is ",NA,NA
almost,NA,NA
", but not quite, ready to use. e primary symptom of this state is that Internet ",NA,NA
Explorer will complain that“,object doesn’t support this property or method,NA
” ,NA,NA
whenever you try to do anything with a ,<canvas>,NA
" element, su as get its drawing ",NA,NA
context.,NA,NA
e easiest solution to this is to defer all of your canvas-related manipulation until aer ,NA,NA
the ,onload,NA
" event fires. is may be a while — if your page has a lot of images or videos, ",NA,NA
they will delay the ,onload,NA
 event — but it will give ExplorerCanvas time to work its ,NA,NA
magic.,NA,NA
❧,NA,NA
"A COMPLETE, LIVE EXAMPLE",NA,NA
"Halma is a centuries-old board game. Many variations exist. In this example, I’ve created ",NA,NA
"a solitaire version of Halma with 9 pieces on a 9 × 9 board. In the beginning of the game, ",NA,NA
the pieces form a 3 × 3 square in the boom-le corner of the board. e object of the ,NA,NA
game is to move all the pieces so they form a 3 × 3 square in the upper-right corner of ,NA,NA
"the board, in the least number of moves.",NA,NA
ere are two types of legal moves in Halma:,NA,NA
Take a piece and move it to any adjacent empty square. An “empty” square is one ,NA,NA
that ,NA,NA
does not currently have a piece in it. An “adjacent” square is immediately ,NA,NA
"north, south, ",NA,NA
"east, west, northwest, northeast, southwest, or southeast of the ",NA,NA
piece’s current position.,NA,NA
(e board does not wrap around from one side to the other. If a piece is in the le-,NA,NA
"most column, it can not move west, northwest, or southwest. If a piece is in the ",NA,NA
"boom-most row, it can not move south, southeast, or southwest.) ",NA,NA
"Take a piece and hop over an adjacent piece, and possibly repeat. at is, if you hop ",NA,NA
"over an adjacent piece, then hop over ",NA,NA
another,NA,NA
" piece adjacent to your new position, ",NA,NA
"that counts as a single move. In fact, any number of hops still counts as a single move. ",NA,NA
"(Since the goal is to minimize the total number of moves, doing well in Halma involves ",NA,NA
"constructing, and then using, long ains of staggered pieces so that other pieces can ",NA,NA
hop over them in long sequences.),NA,NA
Here is the game itself. You can also ,NA,NA
play it on a separate page,NA,NA
  if you want to poke at it ,NA,NA
with your browser’s developer tools.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
Moves: ,NA,NA
0,NA,NA
How does it work? I’m so glad you asked. I won’t show ,NA,NA
all,NA,NA
 the code here. (You can see it at ,NA,NA
diveintohtml5.org/examples/halma.js,NA,NA
".) I’ll skip over most of the gameplay code itself, but ",NA,NA
I want to highlight a few parts of the code that deal with actually drawing on the canvas ,NA,NA
and responding to mouse clis on the canvas element.,NA,NA
"During page load, we initialize the game by seing the dimensions of the ",<canvas>,NA
 ,NA,NA
itself and storing a reference to its drawing context.,"gCanvasElement.width = kPixelWidth;
  
 gCanvasElement.height = kPixelHeight;
  
 gDrawingContext = gCanvasElement.getContext(""2d"");",NA
en we do something you haven’t seen yet: we add an event listener to the ,<canvas>,NA
element to listen for cli events.,"gCanvasElement.addEventListener(""click"", halmaOnClick, false);",NA
e ,halmaOnClick(),NA
 function gets called when the user clis anywhere within the canvas.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
Its argument is a ,MouseEvent,NA
 object that contains information about where the user clied.,"function halmaOnClick(e) {
  
 var cell = getCursorPosition(e);
  
  
  
 // the rest of this is just gameplay logic 
 for (var i = 0; i < gNumPieces; i++) { if 
 ((gPieces[i].row == cell.row) && 
  
 (gPieces[i].column == cell.column)) { 
  
 clickOnPiece(i); 
  
 return; 
  
 } 
  
 } 
  
 clickOnEmptyCell(cell); 
  
 }",NA
e next step is to take the ,MouseEvent,NA
 object and calculate whi square on the Halma ,NA,NA
"board just got clied. e Halma board takes up the entire canvas, so every cli is ",NA,NA
somewhere,NA,NA
" on the board. We just need to figure out where. is is triy, because mouse ",NA,NA
events are implemented differently in just about every browser.,"function getCursorPosition(e) { 
  
 var x; 
  
 var y; 
  
 if (e.pageX != undefined && e.pageY != undefined) { x 
 = e.pageX; 
  
 y = e.pageY; 
  
 } 
  
 else { 
  
 x = e.clientX + document.body.scrollLeft + 
  
 document.documentElement.scrollLeft; 
  
 y = e.clientY + document.body.scrollTop + 
  
 document.documentElement.scrollTop; 
  
 }",NA
"At this point, we have ",x,NA
 and ,y,NA
" coordinates that are relative to the document (that is, the ",NA,NA
entire HTML page). at’s not quite useful yet. We want coordinates relative to the canvas.,"diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
Now we have ,x,NA
 and ,y,NA
 coordinates that are ,NA,NA
relative to the canvas,NA,NA
". at is, if ",x,NA
 is 0 and ,y,NA
 is 0 ,NA,NA
"at this point, we know that the user just clied the top-le pixel of the canvas.",NA,NA
"From here, we can calculate whi Halma square the user clied, and then act accordingly.","var cell = new Cell(Math.floor(y/kPieceHeight),
  
 Math.floor(x/kPieceWidth));
  
 return cell;
  
 }",NA
"Whew! Mouse events are tough. But you can use the same logic (in fact, this exact code) ",NA,NA
in all of your own canvas-based applications. Remember: mouse cli → document-,NA,NA
relative coordinates → canvas-relative coordinates → application-specific code.,NA,NA
"OK, let’s look at the main drawing routine. Because the graphics are so simple, I’ve osen ",NA,NA
to clear and redraw the board in its entirety every time anything anges within the game. ,NA,NA
is is not strictly necessary. e canvas drawing context will retain whatever you have ,NA,NA
"previously drawn on it, even if the user scrolls the canvas out of view or anges to another ",NA,NA
tab and then comes ba later. If you’re developing a canvas-based application with more ,NA,NA
"complicated graphics (su as an arcade game), you can optimize performance by traing ",NA,NA
whi regions of the canvas are “dirty” and redrawing just the dirty regions. But that is ,NA,NA
outside the scope of this book.,"gDrawingContext.clearRect(0, 0, kPixelWidth, kPixelHeight);",NA
e board-drawing routine should look familiar. It’s similar to how we drew the ,NA,NA
canvas coordinates diagram,NA,NA
 earlier in this apter.,"gDrawingContext.beginPath();
  
  
  
 /* vertical lines */
  
 for (var x = 0; x <= kPixelWidth; x += kPieceWidth) {
  
 gDrawingContext.moveTo(0.5 + x, 0);
  
  
 diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
"e real fun begins when we go to draw ea of the individual pieces. A piece is a circle, ",NA,NA
"something we haven’t drawn before. Furthermore, if the user selects a piece in ",NA,NA
"anticipation of moving it, we want to draw that piece as a filled-in circle. Here, the ",NA,NA
argument ,p,NA
" represents a piece, whi has ",row,NA
 and ,column,NA
 properties that denote the ,NA,NA
piece’s current location on the board. We use some in-game constants to translate ,"(column, row)",NA
 into canvas-relative ,"(x, y)",NA
" coordinates, then draw a circle, then (if the ",NA,NA
piece is selected) fill in the circle with a solid color.,"function drawPiece(p, selected) {
  
 var column = p.column;
  
 var row = p.row;
  
 var y = (row * kPieceHeight) + (kPieceHeight/2);
  
  
  
 var x = (column * kPieceWidth) + (kPieceWidth/2);
  
 var radius = (kPieceWidth/2) - (kPieceWidth/10);",NA
at’s the end of the game-specific logic. Now we have ,"(x, y)",NA
" coordinates, relative to the ",NA,NA
"canvas, for the center of the circle we want to draw. ere is no ",circle(),NA
 method in the ,NA,NA
"canvas API, but there is an ",arc(),NA
" method. And really, what is a circle but an arc that goes ",NA,NA
all the way around? Do you remember your basic geometry? e ,arc(),NA
 method takes a ,NA,NA
center point ,"(x, y)",NA
", a radius, a start and end angle (in radians), and a direction flag (",false,NA
"for clowise, ",true,NA
 for counter-clowise). You can use the ,Math,NA
 module that’s ,NA,NA
built into JavaScript to calculate radians.,"gDrawingContext.beginPath();
  
 diveintohtml5.org
  
  LET’S CALL IT A DRAW(ING SURFACE)",NA
But wait! Nothing has been drawn yet. Like ,moveTo(),NA
 and ,lineTo,NA
", the ",arc(),NA
 method is ,NA,NA
a“pencil” method,NA,NA
". To actually draw the circle, we need to set the ",strokeStyle,NA
 and call ,stroke(),NA
 to trace it in “ink.”,"gDrawingContext.stroke();
  
  
  
  
 gDrawingContext.strokeStyle = ""#000"";",NA
What if the piece is selected? We can re-use the same path we created to draw the ,NA,NA
"outline of the piece, to fill in the circle with a solid color.","if (selected) {
  
 gDrawingContext.fill();
  
  
  
  
 gDrawingContext.fillStyle = ""#000"";
  
 }",NA
"And that’s… well, that’s prey mu it. e rest of the program is game-specific logic ",NA,NA
"—distinguishing between valid and invalid moves, keeping tra of the number of ",NA,NA
"moves, detecting whether the game is over. With 9 circles, a few straight lines, and 1 ",onclick,NA
"handler, we’ve created an entire game in ",<canvas>,NA
. Huzzah!,NA,NA
❧,NA,NA
FURTHER READING,NA,NA
Canvas tutorial,NA,NA
 on Mozilla Developer Center,NA,NA
HTML5 ,canvas,NA
 — the basics,NA,NA
", by Mihai Sucan",NA,NA
CanvasDemos.com,NA,NA
": demos, tools, and tutorials for the HTML ",canvas,NA
 element,NA,NA
e ,canvas,NA
 element,NA,NA
 in the HTML5 dra standard,NA,NA
❧,NA,NA
is has been “Let’s Call It A Draw(ing Surface).” e ,NA,NA
full table of contents,NA,NA
 has more if you’d ,NA,NA
like to keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition,NA,NA
directly from O’Reilly,NA,NA
". You’ll get a book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,"Copyright MMIX–MMX Mark Pilgrim
  
 diveintohtml5.org",NA
powered by Google™,NA,NA
Search,LET’S CALL IT A DRAW(ING SURFACE),NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
6. ,NA,NA
. ,NA,NA
YOU ARE HERE ,NA,NA
(AND SO IS EVERYBODY ,NA,NA
ELSE),NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
eolocation is the art of figuring out where you are in the world and ,NA,NA
(optionally) sharing that information with people you trust. ere is more ,NA,NA
"than one way to figure out where you are — your IP address, your wireless ",NA,NA
"network connection, whi cell tower your phone is talking to, or dedicated ",NA,NA
GPS,NA,NA
hardware that calculates latitude and longitude from information sent by satellites in the sky.,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Geolocation sounds scary. Can I turn it off? ,NA,NA
A: Privacy is an obvious concern when you’re,NA,NA
talking about sharing your physical location,NA,NA
with a remote web server. e ,NA,NA
geolocation ,NA,NA
API explicitly states,NA,NA
: “User Agents must not ,NA,NA
send,"diveintohtml5.org
  
  
  YOU ARE HERE (AND SO IS EVERYBODY 
 EL",NA
location information to Web sites without the ,NA,NA
express permission of the user.” In other ,NA,NA
"words, sharing your location is always opt-in. ",NA,NA
"If you don’t want to, you don’t have to.",NA,NA
❧,NA,NA
THE GEOLOCATION API,NA,NA
e ,NA,NA
geolocation API,NA,NA
 lets you share your location with trusted web sites. e latitude and ,NA,NA
"longitude are available to JavaScript on the page, whi in turn can send it ba to the ",NA,NA
remote web server and do fancy location-aware things like finding local businesses or ,NA,NA
showing your location on a map.,NA,NA
"As you can see from the following table, the geolocation API is supported by most ",NA,NA
"browsers on the desktop and mobile devices. Additionally, some older browsers and ",NA,NA
"devices can be supported by wrapper libraries, as we’ll see later in this apter.",NA,NA
IE,NA,NA
FIREFOX,NA,NA
GEOLOCATION ,NA,NA
API ,NA,NA
API,NA,NA
 SUPPORT,NA,NA
ANDROID,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
·,NA,NA
3.5+,NA,NA
5.0+,NA,NA
5.0+,NA,NA
10.6+,NA,NA
3.0+,NA,NA
2.0+,NA,NA
"Along with support for the standard geolocation API, there are a plethora of device-",NA,NA
specific APIs on other mobile platforms. I’ll cover all that later in this apter.,NA,NA
❧,NA,NA
SHOW ME THE CODE,NA,NA
e geolocation API centers around a new property on the global ,navigator,NA
 object:,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
.,NA,NA
e simplest use of the geolocation API looks like this:,"function get_location() {
  
  
  
 navigator.geolocation.getCurrentPosition(show_map);
  
 }",NA
"at has no detection, no error handling, and no options. Your web application should ",NA,NA
probably include at least the first two of those. To ,NA,NA
detect support for the geolocation API,NA,NA
", ",NA,NA
you can use ,NA,NA
Modernizr,NA,NA
:,"function get_location() { 
  
 if (Modernizr.geolocation) {
  
  
 navigator.geolocation.getCurrentPosition(show_map); } 
 else {",NA
⇜,NA,NA
 I CAN ,NA,NA
HAS GEO?,"// no native support; maybe try Gears?
  
 }
  
 }",NA
What you do without geolocation support is up to you. I’ll explain the Gears fallba option ,NA,NA
"in a minute, but first I want to talk about what happens ",NA,NA
during,NA,NA
 that call to ,getCurrentPosition(),NA
. As ,NA,NA
I mentioned at the beginning of this apter,NA,NA
", geolocation ",NA,NA
support is ,NA,NA
opt-in,NA,NA
. at means your browser will never force you to reveal your current ,NA,NA
physical location to a remote server. e user experience differs from browser to browser. ,NA,NA
"In Mozilla Firefox, calling the ",getCurrentPosition(),NA
 function of the geolocation API will ,NA,NA
cause the browser to pop up an “infobar” at the top of the browser window. e infobar ,NA,NA
looks like this:,NA,NA
"ere’s a lot going on here. You, as the end user,",NA,NA
are told that a website wants to know your location,NA,NA
are told ,NA,NA
whi,NA,NA
 website wants to know your location ,NA,NA
can cli through to ,NA,NA
Mozilla’s “Location-Aware Browsing” help page,NA,NA
  whi explains ,NA,NA
what ,NA,NA
the he is going on,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
can oose to share your location,NA,NA
can oose ,NA,NA
not,NA,NA
 to share your location,NA,NA
"can tell your browser to remember your oice (either way, share or don’t share) so ",NA,NA
you ,NA,NA
never see this infobar again on this website,NA,NA
"Furthermore, this infobar is",NA,NA
"non-modal, so it won’t prevent you from switing to another browser window or tab",NA,NA
"tab-specific, so it will disappear if you swit to another browser window or tab ",NA,NA
and ,NA,NA
reappear when you swit ba to the original tab ,NA,NA
"unconditional, so there is no way for a website to bypass it",NA,NA
"bloing, so there is no ance that the website can determine your location while ",NA,NA
it’s ,NA,NA
waiting for your answer,NA,NA
You just saw the JavaScript code that causes this infobar to appear. It’s a single function ,NA,NA
call whi takes a callba function (whi I called ,show_map,NA
). e call to ,getCurrentPosition(),NA
" will return immediately, but that doesn’t mean that you have ",NA,NA
access to the user’s location. e first time you are guaranteed to have location ,NA,NA
information is in the callba function. e callba function looks like this:,"function show_map(position) {
  
 var latitude = position.coords.latitude;
  
 var longitude = position.coords.longitude;
  
 // let's show a map or do something interesting!
  
 }",NA
"e callba function will be called with a single parameter, an object with two properties: ",coords,NA
 and ,timestamp,NA
". e timestamp is just that, the date and time when the location was ",NA,NA
"calculated. (Since this is all happening asynronously, you can’t really know when that will ",NA,NA
happen in advance. It might take some time for the user to read the infobar and agree to ,NA,NA
share their location. Devices with dedicated GPS hardware may take some more time to ,NA,NA
connect to a GPS satellite. And so on.) e ,coords,NA
 object has properties like ,latitude,NA
 and ,longitude,NA
 whi are exactly what they sound like: the user’s physical location in the world.,NA,NA
POSITION OBJECT,NA,NA
Property,NA,NA
Type,NA,NA
Notes,coords.latitude,NA
double,NA,NA
decimal degrees,coords.longitude,NA
double,NA,NA
decimal degrees,diveintohtml5.org YOU ARE HERE (AND SO IS EVERYBODY ELSE),NA
Only three of the properties are guaranteed to be there ,NA,NA
(,coords.latitude,NA
", ",coords.longitude,NA
", and ",coords.accuracy,NA
). e rest might come ba ,null,NA
", ",NA,NA
depending on the capabilities of your device and the ,NA,NA
baend positioning server that it talks to. e ,heading,NA
 and ,speed,NA
properties are calculated based on the user’s ,NA,NA
"previous position, if possible.",NA,NA
❧,NA,NA
HANDLING ERRORS,NA,NA
Geolocation is complicated. ings can go wrong. I’ve mentioned the “user consent” angle ,NA,NA
already. If your web application wants the user’s location but the user doesn’t want to ,NA,NA
"give it to you, you’re screwed. e user always wins. But what does that look like in code? ",NA,NA
It looks like the second argument to the ,getCurrentPosition(),NA
 function: an error ,NA,NA
handling callba function.,"navigator.geolocation.getCurrentPosition(
  
 show_map, handle_error)",NA
"If anything goes wrong, your error callba function will be called with a ",PositionError,NA
object.,NA,NA
POSITIONERROR OBJECT,NA,NA
Property,NA,NA
Type,NA,NA
Notes,code,NA
short,NA,NA
an enumerated value,diveintohtml5.org YOU ARE HERE (AND SO IS EVERYBODY ELSE),NA
DOMString,NA,NA
not intended for end users,NA,NA
e ,code,NA
 property will be one of,PERMISSION_DENIED,NA
 (,1,NA
) if the user clis that “Don’t Share” buon or ,NA,NA
otherwise ,NA,NA
denies you access to their location.,POSITION_UNAVAILABLE,NA
 (,2,NA
) if the network is down or the positioning satellites can’t ,NA,NA
be contacted.,TIMEOUT,NA
 (,3,NA
) if the network is up but it takes too long to calculate the user’s ,NA,NA
position. How long is “too long”? I’ll show you how to define that in the next ,NA,NA
section.,UNKNOWN_ERROR,NA
 (,0,NA
) if anything else goes wrong.,NA,NA
↶,NA,NA
 Be gracious in defeat,"function handle_error(err) {
  
 if (err.code == 1) {
  
  
  
 // user said no!
  
 }
  
 }",NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Does the geolocation API work on the ,NA,NA
"International Space Station, on the moon, or ",NA,NA
on,NA,NA
other planets?,NA,NA
A: ,NA,NA
e geolocation specification states,NA,NA
", “e ",NA,NA
geographic coordinate reference system used ,NA,NA
by the aributes in this interface is the World ,NA,NA
Geodetic System (2d) [WGS84]. No other ,NA,NA
reference system is supported.” e ,NA,NA
"International Space Station is orbiting Earth, ",NA,NA
so ,NA,NA
astronauts on the station,NA,NA
 can describe ,NA,NA
"their location by latitude, longitude, and ",NA,NA
"altitude. However, the World Geodetic System ",NA,NA
"is Earth-centric, so it can’t be used to describe ",NA,NA
locations on the moon or on other planets.,diveintohtml5.org YOU ARE HERE (AND SO IS EVERYBODY ELSE),NA
❧,NA,NA
CHOICES! I DEMAND CHOICES!,NA,NA
Some popular mobile devices — like the iPhone and Android phones — support ,NA,NA
two,NA,NA
 ,NA,NA
methods of figuring out where you are. e first method triangulates your position based on ,NA,NA
your relative proximity to different cellular towers operated by your phone carrier. is ,NA,NA
"method is fast and doesn’t require any dedicated GPS hardware, but it only gives you a ",NA,NA
"rough idea of where you are. Depending on how many cell towers are in your area, “a ",NA,NA
rough idea” could be as lile as one city blo or as mu as a kilometer in every direction.,NA,NA
e second method actually uses dedicated,NA,NA
GPS hardware on your device to talk to ,NA,NA
dedicated GPS positioning satellites that ,NA,NA
are orbiting the Earth. GPS can usually ,NA,NA
pinpoint your location within a few ,NA,NA
meters. e ,NA,NA
downside is that the dedicated GPS ip on ,NA,NA
"your device draws a lot of power, so ",NA,NA
phones and other general purpose mobile ,NA,NA
devices usually turn off the ip until it’s ,NA,NA
needed.,NA,NA
at means there will be a startup delay,NA,NA
while the ip is initializing its connection ,NA,NA
with the GPS satellites in the sky. If you’ve ever used Google Maps on an iPhone or other ,NA,NA
"smartphone, you’ve seen both methods in action. First you see a large circle that ",NA,NA
"approximates your position (finding the nearest cell tower), then a smaller circle ",NA,NA
"(triangulating with other cell towers), then a single dot with an exaction position (given by ",NA,NA
GPS satellites).,NA,NA
"e reason I mention this is that, depending on your web application, you may not need ",NA,NA
"high accuracy. If you’re just looking for nearby movie listings, a “low accuracy” location is ",NA,NA
probably good enough. ere aren’t ,NA,NA
that,NA,NA
" many movie theaters, even in dense cities, and ",NA,NA
"you’ll probably be listing more than one of them anyway. On the other hand, if you’re ",NA,NA
giving turn,NA,NA
"by turn directions in real time, you really ",NA,NA
do,NA,NA
 need to know exactly where the user is so you,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
"by turn directions in real time, you really ",NA,NA
do,NA,NA
 need to know exactly where the user is so ,NA,NA
you can say “turn right in 20 meters” or whatever.,NA,NA
e ,getCurrentPosition(),NA
" function has an optional third argument, ",NA,NA
a ,PositionOptions,NA
 object,NA,NA
. ere are three properties you can set in a ,PositionOptions,NA
object. All the properties are optional. You can set any or all or none of them.,NA,NA
POSITIONOPTIONS OBJECT,NA,NA
Property,NA,NA
Type,NA,NA
Default,NA,NA
Notes,enableHighAccuracy,NA
Boolean,NA,NA
false,NA,NA
true might be slower,NA,NA
long,NA,NA
(no default),NA,NA
in milliseconds,"timeout
  
 maximumAge",NA
long,NA,NA
0,NA,NA
in milliseconds,NA,NA
e ,enableHighAccuracy,NA
" property is exactly what it sounds like. If true, and the device can ",NA,NA
"support it, and the user consents to sharing their exact location, then the device will try to ",NA,NA
provide it. Both iPhones and Android phones have separate permissions for low- and high-,NA,NA
"accuracy positioning, so it is possible that calling ",getCurrentPosition(),NA
 with ,enableHighAccuracy:true,NA
" will fail, but calling with ",enableHighAccuracy:false,NA
would ,NA,NA
succeed.,NA,NA
e ,timeout,NA
 property is the number of milliseconds your web application is willing to ,NA,NA
wait for a position. is timer doesn’t start counting down until ,NA,NA
aer,NA,NA
 the user gives ,NA,NA
permission to even try to calculate their position. You’re not timing the user; you’re ,NA,NA
timing the network.,NA,NA
e ,maximumAge,NA
 property allows the device to answer immediately with a caed position.,NA,NA
"For example, let’s say you call ",getCurrentPosition(),NA
" for the first time, the user ",NA,NA
"consents, and your success callba function is called with a position that was calculated at ",NA,NA
"exactly 10:00 AM. Exactly one minute later, at 10:01 AM, you call ",getCurrentPosition(),NA
again with a ,maximumAge,NA
 property of ,75000,NA
.,"navigator.geolocation.getCurrentPosition(
  
 success_callback, error_callback, {maximumAge: 75000});",NA
What you’re saying is that you don’t necessarily need the user’s ,NA,NA
current,NA,NA
 location. You ,NA,NA
would be satisfied with knowing where they were 75 seconds ago (75000 milliseconds). ,NA,NA
"e device knows where the user was 60 seconds ago (60000 milliseconds), because it ",NA,NA
calculated their location aer the first time you called ,getCurrentPosition(),NA
. So the ,NA,NA
device doesn’t bother to recalculate the user’s current location. It just returns exactly the ,NA,NA
same information it,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
"returned the first time: same latitude and longitude, same accuracy, and same timestamp ",NA,NA
(10:00 AM).,NA,NA
"Before you ask for the user’s location, you should think ",NA,NA
"about just how mu accuracy you need, and set ",enableHighAccuracy,NA
 accordingly. If you need to find their ,NA,NA
"location more than once, you should think about how old the ",NA,NA
"information could be and still be useful, and set ",maximumAge,NA
accordingly. If you need to find their location ,NA,NA
continuously,NA,NA
", ",NA,NA
then ,getCurrentPosition(),NA
 is not for you. You need to ,NA,NA
upgrade to ,watchPosition(),NA
.,NA,NA
e ,watchPosition(),NA
 function has the same structure as ,getCurrentPosition(),NA
". It takes two callba functions, a ",NA,NA
required one for success and an optional one for error ,NA,NA
"conditions, and it can also take an optional ",PositionOptions,NA
 object that has all the same properties ,NA,NA
you just learned about. e difference is that your ,NA,NA
callbafunction will be called ,NA,NA
every time the user’s location ,NA,NA
anges,NA,NA
 .ere is no need to actively poll their position. e ,NA,NA
"device will determine the optimal polling interval, and it will ",NA,NA
call your callba function whenever it determines that the ,NA,NA
user’s,NA,NA
position has anged. You can use this to update a visible ,NA,NA
"marker on a map, provide instructions on where to go next, or whatever you like. It’s ",NA,NA
entirely up to you.,NA,NA
e ,watchPosition(),NA
 function itself returns a number. You should probably store this ,NA,NA
"number somewhere. If you ever want to stop wating the user’s location ange, you can ",NA,NA
call the ,clearWatch(),NA
" method and pass it this number, and the device will stop calling ",NA,NA
your callba function. If you’ve ever used the ,setInterval(),NA
 and ,clearInterval(),NA
"functions in JavaScript, this works the same way.",NA,NA
❧,NA,NA
WHAT ABOUT IE?,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
Internet Explorer does not support the ,NA,NA
W3C geolocation API,NA,NA
 that I’ve just described. But ,NA,NA
don’t despair! ,NA,NA
Gears,NA,NA
 is an open source browser plugin from Google that works on ,NA,NA
"Windows, Mac, Linux, Windows Mobile, and Android. It provides features for older ",NA,NA
browsers. One of the features that Gears provides is a geolocation API. It’s not quite the ,NA,NA
"same as the W3C geolocation API, but it serves the same purpose.",NA,NA
"While we’re on the subject of legacy platforms, I should point out that many older mobile ",NA,NA
phone platforms had their own device-specific geolocation APIs. ,NA,NA
BlaBerry,NA,NA
", ",NA,NA
Nokia,NA,NA
", ",NA,NA
Palm,NA,NA
", ",NA,NA
and ,NA,NA
OMTP BONDI,NA,NA
" all provide their own geolocation APIs. Of course, they all work ",NA,NA
"differently from Gears, whi in turn works differently from the W3C geolocation API. ",NA,NA
Wheeeeee!,NA,NA
❧,NA,NA
GEO.JS TO THE RESCUE,geo.js,NA
" is an open source, MIT-licensed JavaScript library that smooths over the ",NA,NA
"differences between the W3C geolocation API, the Gears API, and the APIs provided by ",NA,NA
"mobile platforms. To use it, you’ll need to add two ",<script>,NA
 elements at the boom of ,NA,NA
"your page. (Tenically, you could put them anywhere, but scripts in your ",<head>,NA
 will ,NA,NA
make your page load more slowly. So don’t do that!),NA,NA
e first script is ,gears_init.js,NA
", whi initializes Gears if it’s installed. e second script is ",geo.js,NA
.,"<!DOCTYPE html> 
  
 <html> 
  
 <head> 
  
 <meta charset=""utf-8""> 
  
 <title>Dive Into HTML5</title> 
  
 </head> 
  
 <body>
  
 ...
  
 <script src=""gears_init.js""></script> 
 <script src=""geo.js""></script>",NA
⇜,NA,NA
 Don’t let it go,NA,NA
to your <head>,</html>,NA
Now you’re ready to use whiever geolocation API is installed.,"if (geo_position_js.init()) {
  
 geo_position_js.getCurrentPosition(geo_success, geo_error);
  
 }",NA
"Let’s take that one step at a time. First, you need to explicitly call an ",init(),NA
 function. e ,init(),NA
 function returns ,true,NA
 if a supported geolocation API is available.,if (geo_position_js.init()) {,NA
Calling the ,init(),NA
 function does not actually find your location. It just verifies that ,NA,NA
"finding your location is possible. To actually find your location, you need to call the ",getCurrentPosition(),NA
 function.,"geo_position_js.getCurrentPosition(geo_success, geo_error);",NA
e ,getCurrentPosition(),NA
 function will trigger your browser to ask for your permission ,NA,NA
"to find and share your location. If geolocation is being provided by Gears, this will pop up a ",NA,NA
dialog asking if your trust the web site to use Gears. If your browser natively supports the ,NA,NA
"geolocation API, the dialog will look different. For example, Firefox 3.5 natively supports ",NA,NA
"the geolocation API. If you try to find your location in Firefox 3.5, it will display an infobar ",NA,NA
at the top of the page asking whether you want to share your location with this web site.,NA,NA
e ,getCurrentPosition(),NA
 function takes two callba functions as arguments. If the ,getCurrentPosition(),NA
" function was successful in finding your location — that is, you ",NA,NA
gave your permission and the geolocation API actually worked its magic — it will call ,NA,NA
"the function passed in as the first argument. In this example, the success callba ",NA,NA
function is called ,geo_success,NA
.,"geo_position_js.getCurrentPosition(geo_success, geo_error);",NA
"e success callba function takes a single argument, whi contains the position ",NA,NA
information.,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
↶,NA,NA
 Success callback,"function geo_success(p) { 
  
 alert(""Found you at latitude "" + p.coords.latitude + "", 
 longitude "" + p.coords.longitude); 
  
 }",NA
If the ,getCurrentPosition(),NA
 function could not find your location — either because you ,NA,NA
"declined to give your permission, or the geolocation API failed for some reason — it will ",NA,NA
"call the function passed in as the second argument. In this example, the failure callba ",NA,NA
function is called ,geo_error,NA
.,"geo_position_js.getCurrentPosition(geo_success, geo_error);",NA
e failure callba function takes no arguments.,NA,NA
↶,NA,NA
 Failure callback,"function geo_error() { 
  
 alert(""Could not find you!""); 
  
 }
  
 geo.js",NA
 does not currently support the ,watchPosition(),NA
 function. If you need ,NA,NA
"continuous location information, you’ll need to actively poll ",getCurrentPosition(),NA
 ,NA,NA
yourself.,NA,NA
❧,NA,NA
"A COMPLETE, LIVE EXAMPLE",NA,NA
Here is a live example of using ,geo.js,NA
 to aempt to get your location and display a map of ,NA,NA
your immediate surroundings:,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
Your browser does not ,NA,NA
support geolocation. :(,NA,NA
"How does it work? Let’s take a look. On page load, this page calls ",geo_position_js.init(),NA
 to determine whether geolocation is available through any ,NA,NA
of the interfaces that ,geo.js,NA
" supports. If so, it sets up a link you can cli to look up your ",NA,NA
location. Cliing that link calls the ,lookup_location(),NA
" function, shown here:","function lookup_location() { 
  
 geo_position_js.getCurrentPosition(show_map, show_map_error); }",NA
"If you give your consent to tra your location, ",NA,NA
and,NA,NA
 the baend service was actually able to ,NA,NA
"determine your location, ",geo.js,NA
" calls the first callba function, ",show_map(),NA
", with a single ",NA,NA
"argument, ",loc,NA
. e ,loc,NA
 object has a ,coords,NA
" property whi contains latitude, longitude, and ",NA,NA
accuracy information. (is example doesn’t use the accuracy information.) e rest of the ,show_map(),NA
 function uses the Google Maps API to set up an embedded map.,"function show_map(loc) { 
  
 $(""#geo-wrapper"").css({'width':'320px','height':'350px'}); var 
 map = new GMap2(document.getElementById(""geo-wrapper""));
  
 var center = new GLatLng(loc.coords.latitude, 
  
  
  
  
 loc.coords.longitude);
  
 map.setCenter(center, 14); 
  
 map.addControl(new GSmallMapControl()); 
 map.addControl(new GMapTypeControl());
  
 diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
If ,geo.js,NA
" is unable to determine your location, it calls the second callba ",NA,NA
"function, ",show_map_error(),NA
.,"function show_map_error() { 
  
 $(""#live-geolocation"").html('Unable to determine your 
 location.'); 
  
 }",NA
❧,NA,NA
FURTHER READING,NA,NA
W3C geolocation API,NA,NA
Gears ,NA,NA
BlaBerry geolocation API,NA,NA
Nokia geolocation API,NA,NA
Palm geolocation API,NA,NA
OMTP BONDI geolocation API,NA,NA
geo.js,NA,NA
", the geolocation API wrapper script",NA,NA
❧,NA,NA
is has been “You Are Here (And So Is Everybody Else).” e ,NA,NA
full table of contents,NA,NA
 has more ,NA,NA
if you’d like to keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is",NA,NA
"distributing this book in a variety of formats, including",NA,NA
"paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY 
 ELSE)",NA
"paper, ePub, Mobi, and DRM-free PDF. e paid ",NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your ,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & ,NA,NA
Running”with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic ,NA,NA
edition directly from O’Reilly,NA,NA
". You’ll get a book, and ",NA,NA
I’ll get a bu. I do not currently accept direct ,NA,NA
donations.,Copyright MMIX–MMX Mark Pilgrim,NA
powered by Google™,NA,NA
Search,"diveintohtml5.org
  
  YOU ARE HERE (AND SO IS EVERYBODY ELSE)",NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
7. ,NA,NA
. ,NA,NA
"THE PAST, PRESENT & ",NA,NA
FUTURE OF LOCAL STORAGE ,NA,NA
FOR WEB APPLICATIONS,NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
ersistent local storage is one of the areas where native client applications ,NA,NA
"have held an advantage over web applications. For native applications, the ",NA,NA
operating system typically provides an abstraction layer for storing and ,NA,NA
retrieving application-specific data like preferences or runtime state. ese ,NA,NA
values may be,NA,NA
"stored in the registry, INI files, XML files, or some other place according to platform ",NA,NA
"convention. If your native client application needs local storage beyond key/value pairs, ",NA,NA
"you can embed your own database, invent your own file format, or any number of other ",NA,NA
solutions.,NA,NA
"Historically, web applications have had none of these luxuries. Cookies were invented early ",NA,NA
"in the web’s history, and indeed they can be used for persistent local storage of small ",NA,NA
amounts of data. But they have three potentially dealbreaking downsides:,NA,NA
"Cookies are included with every HTTP request, thereby slowing down your web ",NA,NA
application by needlessly transmiing the same data over and over ,NA,NA
"Cookies are included with every HTTP request, thereby sending data unencrypted ",NA,NA
over the internet (unless your entire web application is served over SSL),NA,NA
Cookies are limited to about 4 KB of data — enough to slow down your application ,NA,NA
(see ,NA,NA
"above), but not enough to be terribly useful",NA,NA
What we really want is,NA,NA
a lot of storage space ,NA,NA
on the client ,NA,NA
that persists beyond a page ,NA,NA
refresh ,NA,NA
and isn’t transmied to the ,NA,NA
server,NA,NA
"Before HTML5, all aempts to aieve this were ultimately unsatisfactory in different ways.",NA,NA
❧,NA,NA
A BRIEF HISTORY OF LOCAL ,NA,NA
STORAGE HACKS BEFORE HTML5,NA,NA
"In the beginning, there was only Internet Explorer. Or at least, that’s what Microso ",NA,NA
"wanted the world to think. To that end, as part of the ",NA,NA
First Great Browser Wars,NA,NA
" , Microso ",NA,NA
"invented a great many things and included them in their browser-to-end-all-browser-wars, ",NA,NA
Internet Explorer. One of these things was called ,NA,NA
DHTML Behaviors,NA,NA
", and one of these ",NA,NA
behaviors was called ,NA,NA
userData,NA,NA
.,NA,NA
userData,NA,NA
" allows web pages to store up to 64 KB of data per domain, in a hierarical XML-",NA,NA
"based structure. (Trusted domains, su as intranet sites, can store 10 times that amount. ",NA,NA
"And hey, ",NA,NA
640 KB ought to be enough for anybody,NA,NA
 .) IE does not present any form of ,NA,NA
"permissions dialog, and there is no allowance for increasing the amount of storage ",NA,NA
available.,NA,NA
"In 2002, Adobe introduced a feature in Flash 6 that gained the unfortunate and misleading ","diveintohtml5.org THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
"name of “Flash cookies.” Within the Flash environment, the feature is properly known as ",NA,NA
Local Shared Objects,NA,NA
". Briefly, it allows Flash objects to store up to 100 KB of data per ",NA,NA
domain. Brad Neuberg developed an early prototype of a Flash-to-JavaScript bridge called ,NA,NA
AMASS,NA,NA
" (AJAX Massive Storage System), but it was limited by some of Flash’s design quirks. ",NA,NA
"By 2006, with the advent of ",NA,NA
ExternalInterface,NA,NA
" in Flash 8, accessing LSOs from JavaScript ",NA,NA
became an order of magnitude easier and faster. Brad rewrote AMASS and integrated it into ,NA,NA
the popular ,NA,NA
Dojo Toolkit,NA,NA
 under the moniker ,NA,NA
dojox.storage,NA,NA
. Flash gives ea domain 100 ,NA,NA
"KB of storage “for free.” Beyond that, it prompts the user for ea order of magnitude ",NA,NA
"increase in data storage (1 Mb, 10 Mb, and so on).",NA,NA
"In 2007, Google launed ",NA,NA
Gears,NA,NA
", an open source browser plugin aimed at providing ",NA,NA
additional capabilities in browsers. (We’ve previously discussed Gears in the context of ,NA,NA
providing a geolocation API in Internet Explorer,NA,NA
. Gears provides ,NA,NA
an API to an embedded ,NA,NA
SQL database ,NA,NA
based on ,NA,NA
SQLite,NA,NA
". Aer obtaining permission from the user once, Gears can ",NA,NA
store unlimited amounts of data per domain in SQL database tables.,NA,NA
"In the meantime, Brad Neuberg and others continued to ha away on ",NA,NA
dojox.storage,NA,NA
 to ,NA,NA
"provide a unified interface to all these different plugins and APIs. By 2009, ",NA,NA
dojox.storage ,NA,NA
"could auto-detect (and provide a unified interface on top of) Adobe Flash, Gears, Adobe ",NA,NA
"AIR, and an early prototype of HTML5 storage that was only implemented in older versions ",NA,NA
of Firefox.,NA,NA
"As you survey these solutions, a paern emerges: all of them are either specific to a single ",NA,NA
"browser, or reliant on a third-party plugin. Despite heroic efforts to paper over the ",NA,NA
differences (in ,NA,NA
dojox.storage,NA,NA
"), they all expose radically different interfaces, have ",NA,NA
"different storage limitations, and present different user experiences. So this is the problem ",NA,NA
"that HTML5 set out to solve: to provide a standardized API, implemented natively and ",NA,NA
"consistently in multiple browsers, without having to rely on third-party plugins.",NA,NA
❧,NA,NA
INTRODUCING HTML5 STORAGE,"diveintohtml5.org THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
What I will refer to as “ HTML5 Storage” is a specification named ,NA,NA
Web Storage,NA,NA
", whi was at ",NA,NA
"one time part of the HTML5 specification proper, but was split out into its own ",NA,NA
specification for uninteresting political reasons. Certain browser vendors also refer to it as ,NA,NA
“Local Storage”or “DOM Storage.” e naming situation is made even more complicated by ,NA,NA
"some related, similarly-named, emerging standards that I’ll discuss later in this apter.",NA,NA
"So what is HTML5 Storage? Simply put, it’s a way for web pages to store named key/value ",NA,NA
"pairs locally, within the client web browser. Like cookies, this data persists even aer you ",NA,NA
"navigate away from the web site, close your browser tab, exit your browser, or what have ",NA,NA
"you. Unlike cookies, this data is never transmied to the remote web server (unless you ",NA,NA
go out of your way to send it manually). Unlike ,NA,NA
all previous aempts,NA,NA
 at providing ,NA,NA
"persistent local storage, it is implemented natively in web browsers, so it is available even ",NA,NA
when third-party browser plugins are not.,NA,NA
"Whi browsers? Well, the latest version of prey mu every browser supports HTML5 ",NA,NA
Storage… even Internet Explorer!,NA,NA
HTML5,NA,NA
 STORAGE SUPPORT,NA,NA
IE,NA,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
8.0+,NA,NA
3.5+,NA,NA
4.0+,NA,NA
4.0+,NA,NA
10.5+,NA,NA
2.0+,NA,NA
2.0+,NA,NA
"From your JavaScript code, you’ll access HTML5 Storage through the ",NA,NA
localStorage,NA,NA
 object ,NA,NA
on the global ,NA,NA
window,NA,NA
" object. Before you can use it, you should ",NA,NA
detect whether the browser ,NA,NA
supports it,NA,NA
.,NA,NA
↶,NA,NA
 check for ,NA,NA
 check for ,NA,NA
HTML5 ,NA,NA
HTML5,NA,NA
 ,NA,NA
Storage,NA,NA
function supports_html5_storage() {,NA,NA
try {,NA,NA
return 'localStorage' in window && window['localStorage'] !==,NA,NA
null;,NA,NA
} catch (e) {,NA,NA
return false;,NA,NA
},NA,NA
},"diveintohtml5.org THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
"Instead of writing this function yourself, you can use ",NA,NA
Modernizr,NA,NA
 to detect support for ,NA,NA
HTML5 Storage.,NA,NA
if (Modernizr.localstorage) {,NA,NA
// window.localStorage is available!,NA,NA
} else { ,NA,NA
// no native support for HTML5 storage :( ,NA,NA
// maybe try dojox.storage or a third-party solution },NA,NA
❧,NA,NA
USING HTML5 STORAGE,NA,NA
"HTML5 Storage is based on named key/value pairs. You store data based on a named key, ",NA,NA
then you can retrieve that data with the same key. e named key is a string. e data can be ,NA,NA
"any type supported by JavaScript, including strings, Booleans, integers, or floats. However, ",NA,NA
the data is actually stored as a string. If you are storing and retrieving anything other than ,NA,NA
"strings, you will need to use functions like ",NA,NA
parseInt(),NA,NA
 or ,NA,NA
parseFloat(),NA,NA
 to coerce your ,NA,NA
retrieved data into the expected JavaScript datatype.,NA,NA
interface Storage { ,NA,NA
getter any getItem(in DOMString key); ,NA,NA
"setter creator void setItem(in DOMString key, in any data); ",NA,NA
};,NA,NA
Calling ,NA,NA
setItem(),NA,NA
 with a named key that already exists will silently overwrite the ,NA,NA
previous value. Calling ,NA,NA
getItem(),NA,NA
 with a non-existent key will return ,NA,NA
null,NA,NA
 rather than ,NA,NA
throw an exception.,NA,NA
"Like other JavaScript objects, you can treat the ",NA,NA
localStorage,NA,NA
 object as an associative array. ,NA,NA
Instead of using the ,NA,NA
getItem(),NA,NA
 and ,NA,NA
setItem(),NA,NA
" methods, you can simply use square ",NA,NA
"braets. For example, this snippet of code:","diveintohtml5.org
  
  THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
"var foo = localStorage.getItem(""bar"");",NA,NA
// ...,NA,NA
"localStorage.setItem(""bar"", foo);",NA,NA
…could be rewrien to use square braet syntax instead:,NA,NA
"var foo = localStorage[""bar""];",NA,NA
// ...,NA,NA
"localStorage[""bar""] = foo;",NA,NA
"ere are also methods for removing the value for a given named key, and clearing the ",NA,NA
"entire storage area (that is, deleting all the keys and values at once).",NA,NA
interface Storage { ,NA,NA
deleter void removeItem(in DOMString key); ,NA,NA
void clear(); ,NA,NA
};,NA,NA
Calling ,NA,NA
removeItem(),NA,NA
 with a non-existent key will do nothing.,NA,NA
"Finally, there is a property to get the total number of values in the storage area, and to ",NA,NA
iterate through all of the keys by index (to get the name of ea key).,NA,NA
interface Storage { ,NA,NA
readonly attribute unsigned long length; ,NA,NA
getter DOMString key(in unsigned long index); ,NA,NA
};,NA,NA
If you call ,NA,NA
key(),NA,NA
 with an index that is not between 0–(,NA,NA
 length,NA,NA
"-1), the function will ",NA,NA
return ,NA,NA
null,NA,NA
.,NA,NA
TRACKING CHANGES TO THE HTML5 STORAGE AREA,NA,NA
"If you want to keep tra programmatically of when the storage area anges, you can ",NA,NA
trap the ,NA,NA
storage,NA,NA
 event. e ,NA,NA
storage,NA,NA
 event is fired on the ,NA,NA
window,NA,NA
 object whenever,"diveintohtml5.org
  
  THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
setItem(),NA,NA
", ",NA,NA
removeItem(),NA,NA
", or ",NA,NA
clear(),NA,NA
 is called ,NA,NA
and actually anges something,NA,NA
 . For ,NA,NA
"example, if you set an item to its existing value or call ",NA,NA
clear(),NA,NA
 when there are no named ,NA,NA
"keys, the ",NA,NA
storage,NA,NA
" event will not fire, because nothing actually anged in the storage area.",NA,NA
e ,NA,NA
storage,NA,NA
 event is supported everywhere the ,NA,NA
localStorage,NA,NA
" object is supported, ",NA,NA
whiincludes Internet Explorer 8. IE 8 does not support the W3C standard ,NA,NA
addEventListener ,NA,NA
"(although that will finally be added in IE 9). erefore, to hook the ",NA,NA
storage,NA,NA
" event, you’ll need to e whi event meanism the browser supports. (If you’ve ",NA,NA
"done this before with other events, you can skip to the end of this section. Trapping the ",NA,NA
storage,NA,NA
 event works the same as every other event you’ve ever trapped. If you prefer to ,NA,NA
"use jery or some other JavaScript library to register your event handlers, you can do that ",NA,NA
with the ,NA,NA
storage,NA,NA
" event, too.)",NA,NA
if (window.addEventListener) {,NA,NA
"window.addEventListener(""storage"", handle_storage, false);",NA,NA
} else {,NA,NA
"window.attachEvent(""onstorage"", handle_storage);",NA,NA
};,NA,NA
e ,NA,NA
handle_storage,NA,NA
 callba function will be called with a ,NA,NA
StorageEvent,NA,NA
" object, except in ",NA,NA
Internet Explorer where the event object is stored in ,NA,NA
window.event,NA,NA
.,NA,NA
function handle_storage(e) {,NA,NA
if (!e) { e = window.event; },NA,NA
},NA,NA
"At this point, the variable ",NA,NA
e,NA,NA
 will be a ,NA,NA
StorageEvent,NA,NA
" object, whi has the following useful ",NA,NA
properties.,NA,NA
STORAGEEVENT OBJECT,NA,NA
PROPERTY,NA,NA
 TYPE ,NA,NA
TYPE,NA,NA
DESCRIPTION,NA,NA
key ,NA,NA
"string the named key that was added, removed, or modified",NA,NA
oldValue ,NA,NA
"any the previous value (now overwrien), or ",NA,NA
null,NA,NA
 if a new item was added,NA,NA
newValue ,NA,NA
"any the new value, or ",NA,NA
null,NA,NA
 if an item was removed,NA,NA
url,*,NA
string the page whi called a method that triggered this ange,* Note: the,NA
url,property was originally called,NA
uri,". Some browsers shipped with that property before the specification 
 anged.
  
 diveintohtml5.org THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
url,"property exists, and if not, e for the",NA
uri,property instead.,NA
e ,NA,NA
storage,NA,NA
 event is not cancelable. From within the ,NA,NA
handle_storage,NA,NA
" callba function, ",NA,NA
there is no way to stop the ange from occurring. It’s simply a way for the browser to tell ,NA,NA
"you, “hey, this just happened. ere’s nothing you can do about it now; I just wanted to let ",NA,NA
you know.”,NA,NA
LIMITATIONS IN CURRENT BROWSERS,NA,NA
In talking about ,NA,NA
the history of local storage has,NA,NA
" using third-party plugins, I made a point of ",NA,NA
"mentioning the limitations of ea tenique, su as storage limits. I just realized that I ",NA,NA
haven’t mentioned anything about the limitations of the now-standardized HTML5 Storage. ,NA,NA
"I’ll give you the answers first, then explain them. e answers, in order of importance, are “5 ",NA,NA
"megabytes,” “",NA,NA
QUOTA_EXCEEDED_ERR,NA,NA
",” and “no.”",NA,NA
“5 megabytes” is how mu storage space ea ,NA,NA
origin,NA,NA
 gets by default. is is surprisingly ,NA,NA
"consistent across browsers, although it is phrased as no more than a suggestion in the ",NA,NA
"HTML5 Storage specification. One thing to keep in mind is that you’re storing strings, not ",NA,NA
"data in its original format. If you’re storing a lot of integers or floats, the difference in ",NA,NA
"representation can really add up. Ea digit in that float is being stored as a aracter, not in ",NA,NA
the usual representation of a floating point number.,NA,NA
“,NA,NA
QUOTA_EXCEEDED_ERR,NA,NA
” is the exception that will get thrown if you exceed your storage ,NA,NA
"quota of 5 megabytes. “No” is the answer to the next obvious question, “Can I ask the ",NA,NA
"user for more storage space?” At time of writing, no browser supports any meanism ",NA,NA
for web developers to request more storage space. Some browsers (,NA,NA
like Opera,NA,NA
) allow ,NA,NA
"the user to control ea site’s storage quota, but it is purely a user-initiated action, not ",NA,NA
something that you as a web developer can build into your web application.,NA,NA
❧,NA,NA
HTML5 STORAGE IN ACTION,"diveintohtml5.org
  
  THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
Let’s see HTML5 Storage in action. Recall ,NA,NA
the Halma game we constructed in the ,NA,NA
canvasapter,NA,NA
. ere’s a small problem with the game: if you close the browser window ,NA,NA
"mid-game, you’ll lose your progress. But with HTML5 Storage, we can save the progress ",NA,NA
"locally, within the browser itself. Here is ",NA,NA
a live demonstration,NA,NA
". Make a few moves, then ",NA,NA
"close the browser tab, then re-open it. If your browser supports HTML5 Storage, the ",NA,NA
"demonstration page should magically remember your exact position within the game, ",NA,NA
"including the number of moves you’ve made, the position of ea of the pieces on the board, ",NA,NA
and even whether a particular piece is selected.,NA,NA
"How does it work? Every time a ange occurs within the game, we call this function:",NA,NA
function saveGameState() { ,NA,NA
if (!supportsLocalStorage()) { return false; } ,NA,NA
"localStorage[""halma.game.in.progress""] = gGameInProgress; for ",NA,NA
(var i = 0; i < kNumPieces; i++) { ,NA,NA
"localStorage[""halma.piece."" + i + "".row""] = gPieces[i].row; ",NA,NA
"localStorage[""halma.piece."" + i + "".column""] = ",NA,NA
gPieces[i].column; ,NA,NA
} ,NA,NA
"localStorage[""halma.selectedpiece""] = gSelectedPieceIndex; ",NA,NA
"localStorage[""halma.selectedpiecehasmoved""] = ",NA,NA
gSelectedPieceHasMoved; ,NA,NA
"localStorage[""halma.movecount""] = gMoveCount; ",NA,NA
return true; ,NA,NA
},NA,NA
"As you can see, it uses the ",NA,NA
localStorage,NA,NA
 object to save whether there is a game in progress ,NA,NA
(,NA,NA
gGameInProgress,NA,NA
", a Boolean). If so, it iterates through the pieces (",NA,NA
 gPieces,NA,NA
", a JavaScript ",NA,NA
Array,NA,NA
) and saves the row and column number of ea piece. en it saves some additional ,NA,NA
"game state, including whi piece is selected (",NA,NA
gSelectedPieceIndex,NA,NA
", an integer), whether ",NA,NA
the piece is in the middle of a potentially long series of hops ,NA,NA
(,NA,NA
gSelectedPieceHasMoved,NA,NA
", a Boolean), and the total number of moves made so far ",NA,NA
(,NA,NA
gMoveCount,NA,NA
", an integer).",NA,NA
"On page load, instead of automatically calling a ",NA,NA
newGame(),NA,NA
 function that would reset ,NA,NA
"these variables to hard-coded values, we call a ",NA,NA
resumeGame(),NA,NA
 function instead. Using ,NA,NA
HTML5,NA,NA
"Storage, the ",NA,NA
resumeGame(),NA,NA
 function es whether a state about a game-in-progress is ,NA,NA
"stored locally. If so, it restores those values using the ",NA,NA
localStorage,NA,NA
 object.,NA,NA
function resumeGame() { ,NA,NA
if (!supportsLocalStorage()) { return false; } ,NA,NA
"gGameInProgress = (localStorage[""halma.game.in.progress""] == ",NA,NA
"""true""); ",NA,NA
if (!gGameInProgress) { return false; } ,NA,NA
gPieces = new Array(kNumPieces); ,NA,NA
for (var i = 0; i < kNumPieces; i++) { ,NA,NA
"var row = parseInt(localStorage[""halma.piece."" + i + "".row""]); ",NA,NA
"var column = parseInt(localStorage[""halma.piece."" + i + ",NA,NA
""".column""]); ",NA,NA
"gPieces[i] = new Cell(row, column); ",NA,NA
} ,NA,NA
gNumPieces = kNumPieces; ,NA,NA
gSelectedPieceIndex = ,NA,NA
"parseInt(localStorage[""halma.selectedpiece""]); ",NA,NA
gSelectedPieceHasMoved = ,NA,NA
"localStorage[""halma.selectedpiecehasmoved""] == ""true""; ",NA,NA
"gMoveCount = parseInt(localStorage[""halma.movecount""]); ",NA,NA
drawBoard(); ,NA,NA
return true; ,NA,NA
},NA,NA
e most important part of this function is the caveat that I mentioned earlier in this ,NA,NA
"apter, whi I’ll repeat here: ",NA,NA
Data is stored as strings. If you are storing something other ,NA,NA
"than a string, you’ll need to coerce it yourself when you retrieve it.",NA,NA
" For example, the flag for ",NA,NA
whether there is a game in progress (,NA,NA
gGameInProgress,NA,NA
) is a Boolean. In the ,NA,NA
saveGameState(),NA,NA
" function, we just stored it and didn’t worry about the datatype:",NA,NA
"localStorage[""halma.game.in.progress""] = gGameInProgress;",NA,NA
But in the ,NA,NA
resumeGame(),NA,NA
" function, we need to treat the value we got from the local storage ",NA,NA
area as a string and manually construct the proper Boolean value ourselves:,"diveintohtml5.org
  
  THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
"gGameInProgress = (localStorage[""halma.game.in.progress""] ",NA,NA
"== ""true"");",NA,NA
"Similarly, the number of moves is stored in ",NA,NA
gMoveCount,NA,NA
 as an integer. In the ,NA,NA
saveGameState(),NA,NA
" function, we just stored it:",NA,NA
"localStorage[""halma.movecount""] = gMoveCount;",NA,NA
But in the ,NA,NA
resumeGame(),NA,NA
" function, we need to coerce the value to an integer, using ",NA,NA
the ,NA,NA
parseInt(),NA,NA
 function built into JavaScript:,NA,NA
"gMoveCount = parseInt(localStorage[""halma.movecount""]);",NA,NA
❧,NA,NA
BEYOND NAMED KEY-VALUE PAIRS: ,NA,NA
COMPETING VISIONS,NA,NA
While ,NA,NA
the past is liered with has and workarounds,NA,NA
", the present condition of HTML5 ",NA,NA
Storage is surprisingly rosy. A new API has been standardized and implemented across ,NA,NA
"all major browsers, platforms, and devices. As a web developer, that’s just not something ",NA,NA
"you see every day, is it? But there is more to life than “5 megabytes of named key/value ",NA,NA
"pairs,”and the future of persistent local storage is… how shall I put it… well, there are ",NA,NA
competing visions.,NA,NA
"One vision is an acronym that you probably know already: SQL. In 2007, Google launed ",NA,NA
Gears,NA,NA
", an open source cross-browser plugin whi included an embedded database based ",NA,NA
on ,NA,NA
SQLite,NA,NA
. is early prototype later influenced the creation of the ,NA,NA
Web SQL Database ,NA,NA
specification. Web SQL Database (formerly known as “WebDB”) provides a thin wrapper ,NA,NA
"around a SQL database, allowing you to do things like this from JavaScript:","diveintohtml5.org
  
  THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
↶,NA,NA
 actual working code in 4 browsers,NA,NA
"openDatabase('documents', '1.0', 'Local document storage',",NA,NA
"5*1024*1024, function (db) {",NA,NA
"db.changeVersion('', '1.0', function (t) {",NA,NA
"t.executeSql('CREATE TABLE docids (id, name)');",NA,NA
"}, error);",NA,NA
});,NA,NA
"As you can see, most of the action resides in the string you pass to the ",NA,NA
executeSql ,NA,NA
"method. is string can be any supported SQL statement, including ",NA,NA
SELECT,NA,NA
", ",NA,NA
UPDATE,NA,NA
", ",NA,NA
INSERT,NA,NA
", and ",NA,NA
DELETE,NA,NA
" statements. It’s just like baend database programming, except you’re ",NA,NA
doing it from JavaScript! Oh joy!,NA,NA
e Web SQL Database specification has been implemented by four browsers and platforms.,NA,NA
WEB SQL DATABASE SUPPORT,NA,NA
IE,NA,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
·,NA,NA
·,NA,NA
4.0+,NA,NA
4.0+,NA,NA
10.5+,NA,NA
3.0+,NA,NA
2.0+,NA,NA
"Of course, if you’ve used more than one database product in your life, you are aware ",NA,NA
that“SQL” is more of a marketing term than a hard-and-fast standard. (Some would say the ,NA,NA
"same of “HTML5,” but never mind that.) Sure, there is an actual SQL specification (it’s ",NA,NA
called ,NA,NA
SQL-92,NA,NA
"), but there is no database server in the world that conforms to that and only ",NA,NA
that ,NA,NA
"specification. ere’s Oracle’s SQL, Microso’s SQL, MySQL’s SQL, PostgreSQL’s SQL, and ",NA,NA
"SQLite’s SQL. Indeed, ea of these products adds new SQL features over time, so even ",NA,NA
saying “SQLite’s SQL” is not sufficient to pin down exactly what you’re talking about. You ,NA,NA
need to say “the version of SQL that shipped with SQLite version X.Y.Z.”,NA,NA
"All of whi brings us to the following disclaimer, currently residing at the top of the Web ",NA,NA
SQL Database specification:,NA,NA
is specification has reaed an impasse: all interested implementors have used ,NA,NA
"the same SQL baend (Sqlite), but we need multiple independent ",NA,NA
implementations to proceed along a standardisation path. Until another ,NA,NA
"implementor is interested in implementing this spec, the description of the SQL ",NA,NA
dialect has been le as simply,"diveintohtml5.org
  
  THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
"a reference to Sqlite, whi isn't acceptable for a standard.",NA,NA
It is against this badrop that I will introduce you to another competing vision for ,NA,NA
"advanced, persistent, local storage for web applications: ",NA,NA
the Indexed Database API,NA,NA
", ",NA,NA
"formerly known as“WebSimpleDB,” now affectionately known as “IndexedDB.”",NA,NA
e Indexed Database API exposes what’s called an ,NA,NA
object store,NA,NA
. An object store shares ,NA,NA
"many concepts with a SQL database. ere are “databases” with “records,” and ea record ",NA,NA
"has a set number of “fields.” Ea field has a specific datatype, whi is defined when the ",NA,NA
"database is created. You can select a subset of records, then enumerate them with a ",NA,NA
“cursor.” Changes to the object store are handled within “transactions.”,NA,NA
"If you’ve done any SQL database programming, these terms probably sound familiar. e ",NA,NA
primary difference is that the object store has no structured query language. You don’t ,NA,NA
construct a statement like ,NA,NA
"""SELECT * from USERS where ACTIVE = 'Y'""",NA,NA
". Instead, you ",NA,NA
use methods provided by the object store to open a cursor on the database named ,NA,NA
“,NA,NA
USERS,NA,NA
",”enumerate through the records, filter out records for inactive users, and use ",NA,NA
accessor methods to get the values of ea field in the remaining records. ,NA,NA
An early walk-,NA,NA
through of IndexedDB ,NA,NA
"is a good tutorial of how IndexedDB works, giving side-by-side ",NA,NA
comparisons of IndexedDB and Web SQL Database.,NA,NA
"At time of writing, IndexedDB has only been implemented in ",NA,NA
a beta version of Firefox 4,NA,NA
 . (By ,NA,NA
"contrast, Mozilla has stated that ",NA,NA
they will never implement Web SQL Database,NA,NA
 .) Google has ,NA,NA
stated that ,NA,NA
they are considering IndexedDB support,NA,NA
 for Chromium and Google Chrome. And ,NA,NA
even Microso has said that IndexedDB “,NA,NA
is a great solution for the web,NA,NA
 .”,NA,NA
"So what can you, as a web developer, do with IndexedDB? At the moment, virtually ",NA,NA
nothing beyond some tenology demos. A year from now? Maybe something. Che the ,NA,NA
“Further Reading” section for links to some good tutorials to get you started.,NA,NA
❧,NA,NA
FURTHER READING,"diveintohtml5.org THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
HTML5 storage:,NA,NA
HTML5 Storage,NA,NA
 specification ,NA,NA
Introduction to DOM Storage,NA,NA
 on MSDN,NA,NA
"Web Storage: easier, more powerful client-side data storage",NA,NA
 on Opera Developer ,NA,NA
Community ,NA,NA
DOM Storage,NA,NA
 on Mozilla Developer Center. (Note: most of this page is devoted to ,NA,NA
Firefox’s prototype implementation of a ,NA,NA
globalStorage,NA,NA
" object, a non-standard ",NA,NA
precursor to ,NA,NA
localStorage,NA,NA
. Mozilla added support for the standard ,NA,NA
localStorage ,NA,NA
interface in Firefox 3.5.) ,NA,NA
Unlo local storage for mobile Web applications with HTML5,NA,NA
" , a tutorial on IBM ",NA,NA
DeveloperWorks,NA,NA
Early work by Brad Neuberg ,NA,NA
et. al.,NA,NA
 (pre-HTML5):,NA,NA
Internet Explorer Has Native Support for Persistence,NA,NA
⁈⁈,NA,NA
  (about the ,NA,NA
userData,NA,NA
 object ,NA,NA
in IE) ,NA,NA
Dojo Storage,NA,NA
", part of a larger tutorial about the (now-defunct) Dojo Offline library",NA,NA
dojox.storage.manager,NA,NA
 API reference ,NA,NA
dojox.storage,NA,NA
 Subversion repository,NA,NA
Web SQL Database:,NA,NA
Web SQL Database,NA,NA
 ,NA,NA
specification ,NA,NA
Introducing Web SQL ,NA,NA
Databases,NA,NA
Web Database demonstration ,NA,NA
persistence.js,NA,NA
", an “asynronous JavaScript ORM” built on top of Web SQL Database and ",NA,NA
Gears,NA,NA
IndexedDB:,NA,NA
Indexed Database API,NA,NA
 specification ,NA,NA
Beyond HTML5: Database APIs and the Road to ,NA,NA
IndexedDB Firefox 4: An early walk-through of IndexedDB,"diveintohtml5.org THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
❧,NA,NA
"is has been “e Past, Present & Future of Local Storage for Web Applications.” e ",NA,NA
full,NA,NA
table of contents,NA,NA
 has more if you’d like to keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition,NA,NA
directly from O’Reilly,NA,NA
. You’ll get a ,NA,NA
"book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,diveintohtml5.org,NA
powered by Google™,NA,NA
Search,"THE PAST, PRESENT & FUTURE OF LOCAL STORAGE FOR WEB APPLICATIONS",NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
8. ,NA,NA
. ,NA,NA
LET’S TAKE THIS OFFLINE,NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
"hat is an offline web application? At first glance, it sounds like a ",NA,NA
contradiction in terms. Web pages are things you download and render. ,NA,NA
Downloading implies a network connection. How can you download when ,NA,NA
"you’re offline? Of course, you can’t. But you ",NA,NA
can,NA,NA
 download when you’re ,NA,NA
online. And that’s,NA,NA
how HTML5 offline applications work.,NA,NA
"At its simplest, an offline web application is a list of URLs — HTML, CSS, JavaScript, images, ",NA,NA
"or any other kind of resource. e home page of the offline web application points to this list, ",NA,NA
"called a manifest file, whi is just a text file located elsewhere on the web server. A web ",NA,NA
browser that implements HTML5 offline applications will read the list of URLs from the ,NA,NA
"manifest file, download the resources, cae them locally, and automatically keep the local ",NA,NA
copies up to date as they ange. When the time comes that you try to access the web ,NA,NA
"application without a network connection, your web browser will automatically swit over ",NA,NA
to the local copies instead.,NA,NA
"From there, most of the work is up to you, the web developer. ere’s a flag in the DOM that","diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
will tell you whether you’re online or offline. ere are events that fire when your offline ,NA,NA
"status anges (one minute you’re offline and the next minute you’re online, or vice-versa). ",NA,NA
"But that’s prey mu it. If your application creates data or saves state, it’s up to you to ",NA,NA
store that data locally,NA,NA
 while you’re offline and synronize it with the remote server once ,NA,NA
"you’re ba online. In other words, HTML5 can take your web application offline. What you ",NA,NA
do once you’re there is up to you.,NA,NA
OFFLINE SUPPORT,NA,NA
IE,NA,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
·,NA,NA
✓,NA,NA
✓,NA,NA
✓,NA,NA
·,NA,NA
✓,NA,NA
✓,NA,NA
❧,NA,NA
THE CACHE MANIFEST,NA,NA
An offline web application revolves around a cae manifest file. What’s a manifest file? It’s a ,NA,NA
list of all of the resources that your web application might need to access while it’s ,NA,NA
disconnected from the network. In order to bootstrap the process of downloading and ,NA,NA
"caing these resources, you need to point to the manifest file, using a ",NA,NA
manifest,NA,NA
 aribute on ,NA,NA
your ,NA,NA
<html>,NA,NA
 element.,NA,NA
<!DOCTYPE HTML>,NA,NA
"<html manifest=""/cache.manifest"">",NA,NA
<body>,NA,NA
...,NA,NA
</body>,NA,NA
</html>,NA,NA
"Your cae manifest file can be located anywhere on your web server, but it must be served ",NA,NA
with the content type ,NA,NA
text/cache-manifest,NA,NA
. If you are running an Apae-based web ,NA,NA
"server, you can probably just put ",NA,NA
an ,NA,NA
AddType,NA,NA
 directive,NA,NA
 in the ,NA,NA
.htaccess,NA,NA
 file at the root of ,NA,NA
your web directory:,NA,NA
AddType text/cache-manifest .manifest,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
en make sure that the name of your cae manifest file ends with ,NA,NA
.manifest,NA,NA
. If you use a ,NA,NA
"different web server or a different configuration of Apae, consult your server’s ",NA,NA
documentation on controlling the ,NA,NA
Content-Type,NA,NA
 header.,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: My web application spans more than one ,NA,NA
page. Do I need a ,NA,NA
manifest,NA,NA
 aribute in ea,NA,NA
"page, or can I just put it in the home page?",NA,NA
A: Every page of your web application needs a,NA,NA
manifest,NA,NA
 aribute that points to the cae,NA,NA
manifest for the entire application.,NA,NA
"OK, so every one of your HTML pages points to your cae manifest file, and your cae ",NA,NA
manifest file is being served with the proper ,NA,NA
Content-Type,NA,NA
 header. But what goes ,NA,NA
in,NA,NA
 ,NA,NA
the manifest file? is is where things get interesting.,NA,NA
e first line of every cae manifest file is this:,NA,NA
CACHE MANIFEST,NA,NA
"Aer that, all manifest files are divided into three parts: the “explicit” section, the ",NA,NA
"“fallba”section, and the “online whitelist” section. Ea section has a header, on its own ",NA,NA
"line. If the manifest file doesn’t have any section headers, all the listed resources are ",NA,NA
"implicitly in the“explicit” section. Try not to dwell on the terminology, lest your head ",NA,NA
explode.,NA,NA
"Here is a valid manifest file. It lists three resources: a CSS file, a JavaScript file, and a JPEG ",NA,NA
image.,NA,NA
CACHE MANIFEST,NA,NA
/clock.css,NA,NA
/clock.js,NA,NA
/clock-face.jpg,NA,NA
"is cae manifest file has no section headers, so all the listed resources are in the ",NA,NA
“explicit”section by default. Resources in the “explicit” section will get downloaded and ,NA,NA
"caed locally, and will be used in place of their online counterparts whenever you are ",NA,NA
"disconnected from the network. us, upon loading this cae manifest file, your browser ",NA,NA
would download ,NA,NA
clock.css,NA,NA
", ",NA,NA
clock.js,NA,NA
", and ",NA,NA
clock-face.jpg,NA,NA
 from the root directory of your web server.,NA,NA
"en you could unplug your network cable and refresh the page, and all of those ",NA,NA
resources would be available offline.,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Do I need to list my HTML pages in my ,NA,NA
cae manifest?,NA,NA
A: Yes and no. If your entire web application ,NA,NA
is ,NA,NA
"contained in a single page, just make sure ",NA,NA
that ,NA,NA
page points to the cae manifest using the ,NA,NA
manifest,NA,NA
 aribute. When you navigate to an ,NA,NA
HTML page with a ,NA,NA
manifest,NA,NA
" aribute, the ",NA,NA
page itself is assumed to be part of the web ,NA,NA
"application, so you don’t need to list it in the",NA,NA
"manifest file itself. However, if your web ",NA,NA
"application spans multiple pages, you should ",NA,NA
"list all of the HTML pages in the manifest file, ",NA,NA
otherwise the browser would not know that ,NA,NA
there are other HTML pages that need to be ,NA,NA
downloaded and caed.,NA,NA
NETWORK SECTIONS,NA,NA
Here is a slightly more complicated example. Suppose you want your clo application to ,NA,NA
"tra visitors, using a traing.cgi script that is loaded dynamically from an ",NA,NA
<img src> ,NA,NA
"aribute. Caing this resource would defeat the purpose of traing, so this resource ",NA,NA
should never be caed and never be available offline. Here is how you do that:,NA,NA
CACHE MANIFEST,NA,NA
NETWORK: ,NA,NA
/tracking.cgi,NA,NA
CACHE: ,NA,NA
/clock.css ,NA,NA
/clock.js ,NA,NA
/clock-face.jpg,NA,NA
is cae manifest file includes section headers. e line marked ,NA,NA
NETWORK:,NA,NA
 is the beginning of ,NA,NA
the “online whitelist” section. Resources in this section are never caed and are not ,NA,NA
available offline. (Aempting to load them while offline will result in an error.) e line ,NA,NA
marked ,NA,NA
CACHE:,NA,NA
 is the beginning of the “explicit” section. e rest of the cae manifest file is ,NA,NA
the same as the previous example. Ea of the three resources listed will be caed and ,NA,NA
available offline.,NA,NA
FALLBACK SECTIONS,NA,NA
ere is one more type of section in a cae manifest file: a fallba section. In a ,NA,NA
"fallbasection, you can define substitutions for online resources that, for whatever ",NA,NA
"reason, can’t be caed or weren’t caed successfully. e HTML5 specification offers this ",NA,NA
clever example of using a fallba section:,NA,NA
CACHE MANIFEST ,NA,NA
FALLBACK: ,NA,NA
/ /offline.html ,NA,NA
NETWORK: ,NA,NA
*,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
"What does this do? First, consider a site that contains millions of pages, like ",NA,NA
Wikipedia,NA,NA
. You ,NA,NA
"couldn’t possibly download the entire site, nor would you want to. But suppose you could ",NA,NA
make ,NA,NA
part,NA,NA
 of it available offline. But how would you decide whi pages to cae? How ,NA,NA
about this: every page you ever look at on a hypothetical offline-enabled Wikipedia would ,NA,NA
be downloaded and caed. at would include every encyclopedia entry that you ever ,NA,NA
"visited, every talk page (where you can have makeshi discussions about a particular ",NA,NA
"encyclopedia entry), and every edit page (whi you can actually make anges to the ",NA,NA
particular entry).,NA,NA
"at’s what this cae manifest does. Suppose every HTML page (entry, talk page, edit page, ",NA,NA
history page) on Wikipedia pointed to this cae manifest file. When you visit any page that ,NA,NA
"points to a cae manifest, your browser says “hey, this page is part of an offline web ",NA,NA
"application, is it one I know about?” If your browser hasn’t ever downloaded this particular ",NA,NA
"cae manifest file, it will set up a new offline “appcae” (short for “application cae”), ",NA,NA
"download all the resources listed in the cae manifest, and then add the current page to ",NA,NA
"the appcae. If your browser does know about this cae manifest, it will simply add the ",NA,NA
"current page to the existing appcae. Either way, the page you just visited ends up in the ",NA,NA
appcae.,NA,NA
is is important. It means that you can have an offline web application that “lazily” adds ,NA,NA
pages as you visit them. You don’t need to list every single one of your HTML pages in your ,NA,NA
cae manifest.,NA,NA
Now look at the fallba section. e fallba section in this cae manifest only has a single ,NA,NA
line. e first part of the line (before the space) is not a URL. It’s really a URL paern. e ,NA,NA
single aracter (,NA,NA
/,NA,NA
") will mat any page on your site, not just the home page. When you try ",NA,NA
"to visit a page while you’re offline, your browser will look for it in the appcae. If your ",NA,NA
"browser finds the page in the appcae (because you visited it while online, and the page ",NA,NA
"was implicitly added to the appcae at that time), then your browser will display the ",NA,NA
"caed copy of the page. If your browser doesn’t find the page in the appcae, instead of ",NA,NA
"displaying an error message, it will display the page ",NA,NA
/offline.html,NA,NA
", as specified in the ",NA,NA
second half of that line in the fallba section.,NA,NA
"Finally, let’s examine the network section. e network section in this cae manifest also ",NA,NA
"has just a single line, a line that contains just a single aracter (",NA,NA
*,NA,NA
). is aracter has special ,NA,NA
meaning in a network section. It’s called the “online whitelist wildcard flag.” at’s a fancy ,NA,NA
way of saying that anything that isn’t in the appcae can still be downloaded from the ,NA,NA
"original web address, as long as you have an internet connection. is is important for ",NA,NA
"an“open-ended” offline web application. It means that, while you’re browsing this ",NA,NA
hypothetical,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
offline-enabled Wikipedia ,NA,NA
online,NA,NA
", your browser will fet images and videos and other ",NA,NA
"embedded resources normally, even if they are on a different domain. (is is common in ",NA,NA
"large websites, even if they aren’t part of an offline web application. HTML pages are ",NA,NA
"generated and served locally, while images and videos are served from a ",NA,NA
CDN,NA,NA
 on another ,NA,NA
"domain.) Without this wildcard flag, our hypothetical offline-enabled Wikipedia would ",NA,NA
"behave strangely when you were online — specifically, it wouldn’t load any externally-",NA,NA
hosted images or videos!,NA,NA
"Is this example complete? No. Wikipedia is more than HTML files. It uses common CSS, ",NA,NA
"JavaScript, and images on ea page. Ea of these resources would need to be listed ",NA,NA
explicitly in the ,NA,NA
CACHE:,NA,NA
" section of the manifest file, in order for pages to display and ",NA,NA
behave properly offline. But the point of the fallba section is that you can have an “open-,NA,NA
ended”offline web application that extends beyond the resources you’ve listed explicitly in ,NA,NA
the manifest file.,NA,NA
❧,NA,NA
THE FLOW OF EVENTS,NA,NA
"So far, I’ve talked about offline web applications, the cae manifest, and the offline ",NA,NA
"application cae (“appcae”) in vague, semi-magical terms. ings are downloaded, ",NA,NA
"browsers make decisions, and everything Just Works. You know beer than that, right? I ",NA,NA
"mean, this is web development we’re talking about. Nothing ever Just Works.",NA,NA
"First, let’s talk about the flow of events. Specifically, DOM events. When your browser visits ",NA,NA
"a page that points to a cae manifest, it fires off a series of events on the ",NA,NA
window.applicationCache,NA,NA
" object. I know this looks complicated, but trust me, this is the ",NA,NA
simplest version I could come up with that didn’t leave out important information.,NA,NA
1. As soon as it notices a ,NA,NA
manifest,NA,NA
 aribute on the ,NA,NA
<html>,NA,NA
" element, your browser fires ",NA,NA
a ,NA,NA
checking,NA,NA
 event. (All the events listed here are fired on the ,NA,NA
window.applicationCache,NA,NA
 object.) e ,NA,NA
checking,NA,NA
" event is always fired, regardless of ",NA,NA
whether you have previously visited this page or any other page that points to the,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
same cae manifest.,NA,NA
2. If your browser has never seen this cae manifest before…,NA,NA
It will fire a ,NA,NA
downloading,NA,NA
" event, then start to download the resources listed ",NA,NA
in the cae manifest.,NA,NA
"While it’s downloading, your browser will periodically fire ",NA,NA
progress,NA,NA
" events, ",NA,NA
whi contain information on how many files have been downloaded already ,NA,NA
and how many files are still queued to be downloaded.,NA,NA
Aer all resources listed in the cae manifest have been downloaded ,NA,NA
"successfully, the browser fires one final event, ",NA,NA
cached,NA,NA
. is is your signal that the ,NA,NA
offline web application is fully caed and ready to be used offline. at’s it; you’re ,NA,NA
done.,NA,NA
"3. On the other hand, if you have previously visited this page or any other page that ",NA,NA
"points to the same cae manifest, then your browser already knows about this cae ",NA,NA
manifest. It may already have some resources in the appcae. It may have the entire ,NA,NA
"working offline web application in the appcae. So now the question is, has the cae ",NA,NA
manifest anged since the last time your browser eed it?,NA,NA
"If the answer is no, the cae manifest has not anged, your browser will ",NA,NA
immediately fire a ,NA,NA
noupdate,NA,NA
 event. at’s it; you’re done.,NA,NA
"If the answer is yes, the cae manifest ",NA,NA
has,NA,NA
" anged, your browser will fire a ",NA,NA
downloading,NA,NA
 event and start re-downloading every single resource listed in ,NA,NA
the cae manifest.,NA,NA
"While it’s downloading, your browser will periodically fire ",NA,NA
progress,NA,NA
" events, ",NA,NA
whi contain information on how many files have been downloaded already ,NA,NA
and how many files are still queued to be downloaded.,NA,NA
Aer all resources listed in the cae manifest have been re-downloaded ,NA,NA
"successfully, the browser fires one final event, ",NA,NA
updateready,NA,NA
. is is your signal ,NA,NA
that the new version of your offline web application is fully caed and ready to be ,NA,NA
used offline. ,NA,NA
e new version is not yet in use.,NA,NA
  To “hot-swap” to the new version ,NA,NA
"without forcing the user to reload the page, you can manually call the ",NA,NA
window.applicationCache.swapCache(),NA,NA
 function.,NA,NA
"If, at any point in this process, something goes horribly wrong, your browser will fire an ",NA,NA
error,NA,NA
 event and stop. Here is a hopelessly abbreviated list of things that could go ,NA,NA
wrong:,NA,NA
e cae manifest returned an HTTP error 404 (Page Not Found) or 410 ,NA,NA
(Permanently ,NA,NA
Gone).,NA,NA
"e cae manifest was found and hadn’t anged, but the HTML page that pointed to ",NA,NA
the manifest failed to download properly.,NA,NA
e cae manifest anged while the update was being run.,NA,NA
"e cae manifest was found and had anged, but the browser failed to download one ",NA,NA
of the resources listed in the cae manifest.,NA,NA
"THE FINE ART OF DEBUGGING, ",NA,NA
A.K.A. ,NA,NA
“KILL ME! KILL ME NOW!”,NA,NA
"I want to call out two important points here. e first is something you just read, but I bet ",NA,NA
"it didn’t really sink in, so here it is again: if even a single resource listed in your cae ",NA,NA
"manifest file fails to download properly, the entire process of caing your offline web ",NA,NA
application will fail. Your browser will fire the ,NA,NA
error,NA,NA
" event, but there is no indication of ",NA,NA
what the actual problem was. is can make debugging offline web applications even more ,NA,NA
frustrating than usual.,NA,NA
"e second important point is something that is not, tenically speaking, an error, but it will ",NA,NA
look like a serious browser bug until you realize what’s going on. It has to do with exactly ,NA,NA
how your browser es whether a cae manifest file has anged. is is a three-phase ,NA,NA
"process. is is boring but important, so pay aention.",NA,NA
"1. Via normal HTTP semantics, your browser will e whether the cae manifest has ",NA,NA
"expired. Just like any other file being served over HTTP, your web server will typically ",NA,NA
include meta-information about the file in the HTTP response headers. Some of these ,NA,NA
HTTP headers (,NA,NA
Expires,NA,NA
 and ,NA,NA
Cache-Control,NA,NA
) tell your browser how it is allowed to ,NA,NA
cae the file without ever asking the server whether it has anged. is kind of caing ,NA,NA
has nothing to do with offline web applications. It happens for prey muevery ,NA,NA
"HTML page, stylesheet, script, image, or other resource on the web.",NA,NA
"2. If the cae manifest has expired (according to its HTTP headers), then your browser ",NA,NA
"will ask the server whether there is a new version, and if so, the browser will ",NA,NA
download ,NA,NA
"it. To do this, your ",NA,NA
browser issues an HTTP request that includes that last-modified date ,NA,NA
of the cae ,NA,NA
"manifest, whi your web server included in the HTTP response headers ","diveintohtml5.org
  
  LET’S 
 TAKE THIS OFFLINE",NA
the last time your browser downloaded the manifest file. If the web server ,NA,NA
"determines that the manifest file hasn’t anged since that date, it will simply return ",NA,NA
a ,NA,NA
304 (Not Modified),NA,NA
" status. Again, none of this is specific to offline web ",NA,NA
applications. is happens for essentially every kind of resource on the web.,NA,NA
"3. If the web server thinks the manifest file has anged since that date, it will return an ",NA,NA
HTTP ,NA,NA
200 (OK),NA,NA
" status code, followed by the contents of the new file, along with new ",NA,NA
Cache-Control,NA,NA
" headers and a new last-modified date, so that steps 1 and 2 will work ",NA,NA
properly the next time. (HTTP is cool; web servers are always planning for the future. ,NA,NA
"If your web server absolutely must send you a file, it does everything it can to ensure ",NA,NA
that it doesn’t need to send it twice for no reason.) Once it’s downloaded the new cae ,NA,NA
"manifest file, your browser will e the contents against the copy it downloaded last ",NA,NA
"time. If the contents of the cae manifest file are the same as they were last time, your ",NA,NA
browser won’t re-download any of the resources listed in the manifest.,NA,NA
Any one of these steps can trip you up while you’re developing and testing your offline web ,NA,NA
"application. For example, say you deploy one version of your cae manifest file, then 10 ",NA,NA
"minutes later, you realize you need to add another resource to it. No problem, right? Just ",NA,NA
"add another line and redeploy. Bzzt. Here’s what will happen: you reload the page, your ",NA,NA
browser notices the ,NA,NA
manifest,NA,NA
" aribute, it fires the ",NA,NA
checking,NA,NA
" event, and then… nothing. ",NA,NA
"Your browser stubbornly insists that the cae manifest file has not anged. Why? Because, ",NA,NA
"by default, your web server is probably configured to tell browsers to cae static files for a ",NA,NA
"few hours (via HTTP semantics, using ",NA,NA
Cache-Control,NA,NA
 headers). at means your browser ,NA,NA
"will never get past step 1 of that three-phase process. Sure, the web server knows that the ",NA,NA
"file hasanged, but your browser never even gets around to asking the web server. Why? ",NA,NA
"Because the last time your browser downloaded the cae manifest, the web server told it to ",NA,NA
"cae the resource for a few hours (via HTTP semantics, using ",NA,NA
Cache-Control,NA,NA
 headers). ,NA,NA
"And now, 10 minutes later, that’s exactly what your browser is doing.",NA,NA
"To be clear, this is not a bug, it’s a feature. Everything is working exactly the way it’s ",NA,NA
supposed to. If web servers didn’t have a way to tell browsers (and intermediate proxies) ,NA,NA
"to cae things, the web would collapse overnight. But that’s no comfort to you aer you ",NA,NA
spend a few hours trying to figure out why your browser won’t notice your updated cae ,NA,NA
"manifest. (And even beer, if you wait long enough, it will mysteriously starts working ",NA,NA
again! Because the HTTP cae expired! Just like it’s supposed to! Kill me! Kill me now!),NA,NA
So here’s one thing you should absolutely do: reconfigure your web server so that your cae,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
manifest file is not caeable by HTTP semantics. If you’re running an Apae-based web ,NA,NA
"server, these two lines in your ",NA,NA
.htaccess,NA,NA
 file will do the tri:,NA,NA
ExpiresActive On,NA,NA
"ExpiresDefault ""access""",NA,NA
at will actually disable caing for every file in that directory and all subdirectories. at’s ,NA,NA
"probably not what you want in production, so you should either qualify this with a ",NA,NA
<Files> ,NA,NA
"directive so it only affects your cae manifest file, or create a subdirectory that ",NA,NA
contains nothing but this ,NA,NA
.htaccess,NA,NA
" file and your cae manifest file. As usual, ",NA,NA
"configuration details vary by web server, so consult your server’s documentation for how ",NA,NA
to control HTTP caing headers.,NA,NA
"Once you’ve disabled HTTP caing on the cae manifest file itself, you’ll still have times ",NA,NA
"where you’ve anged one of the resources in the appcae, but it’s still at the same URL on ",NA,NA
"your web server. Here, step 2 of the three-phase process will screw you. If your cae ",NA,NA
"manifest file hasn’t anged, the browser will never notice that one of the previously caed ",NA,NA
resources has anged. Consider the following example:,NA,NA
CACHE MANIFEST,NA,NA
# rev 42,NA,NA
clock.js,NA,NA
clock.css,NA,NA
If you ange ,NA,NA
clock.css,NA,NA
" and redeploy it, you won’t see the anges, because the cae ",NA,NA
manifest file itself hasn’t anged. Every time you make a ange to one of the resources in ,NA,NA
"your offline web application, you’ll need to ange the cae manifest file itself. is can be as ",NA,NA
simple as anging a single aracter. e easiest way I’ve found to accomplish this is to ,NA,NA
include a comment line with a revision number. Change the revision number in the ,NA,NA
"comment, then the web server will return the newly anged cae manifest file, your ",NA,NA
"browser will notice that the contents of the file have anged, and it will ki off the process ",NA,NA
to re-download all the resources listed in the manifest.,NA,NA
CACHE MANIFEST,NA,NA
# rev 43,NA,NA
clock.js,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
clock.css,NA,NA
❧,NA,NA
LET’S BUILD ONE!,NA,NA
Remember the Halma game that we introduced in ,NA,NA
the canvas apter,NA,NA
 and later improved ,NA,NA
by ,NA,NA
saving state with persistent local storage,NA,NA
? Let’s take our Halma game offline.,NA,NA
"To do that, we need a manifest that lists all the resources the game needs. Well, there’s ",NA,NA
"the main HMTL page, a single JavaScript file that contains all the game code, and… that’s ",NA,NA
it.,NA,NA
"ere are no images, because all the drawing is done programmatically via the ",NA,NA
canvas API,NA,NA
. ,NA,NA
All the necessary CSS styles are in a ,NA,NA
<style>,NA,NA
 element at the top of the HTML page. So this is ,NA,NA
our cae manifest:,NA,NA
CACHE MANIFEST,NA,NA
halma.html,NA,NA
../halma-localstorage.js,NA,NA
A word about paths. I’ve created an ,NA,NA
offline/,NA,NA
 subdirectory in the ,NA,NA
examples/,NA,NA
" directory, and ",NA,NA
this cae manifest file lives inside the subdirectory. Because the HTML page will need one ,NA,NA
"minor addition to work offline (more on that in a minute), I’ve created a separate copy of ",NA,NA
"the HTML file, whi also lives in the ",NA,NA
offline/,NA,NA
 subdirectory. But because there are no ,NA,NA
anges to the JavaScript code itself since ,NA,NA
we added local storage support,NA,NA
", I’m literally ",NA,NA
reusing the same ,NA,NA
.js,NA,NA
" file, whi lives in the parent directory (",NA,NA
examples/,NA,NA
"). Altogether, the ",NA,NA
files look like this:,NA,NA
/examples/localstorage-halma.html,NA,NA
/examples/halma-localstorage.js,NA,NA
/examples/offline/halma.manifest,NA,NA
/examples/offline/halma.html,NA,NA
In the cae manifest file (,NA,NA
/examples/offline/halma.manifest,NA,NA
"), we want to reference ",NA,NA
"two files. First, the offline version of the HTML file (",NA,NA
/examples/offline/halma.html,NA,NA
). ,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
"two files. First, the offline version of the HTML file (",NA,NA
/examples/offline/halma.html,NA,NA
).,NA,NA
"Since these two files are in the same directory, it is listed in the manifest file without any ",NA,NA
"path prefix. Second, the JavaScript file whi lives in the parent directory ",NA,NA
(,NA,NA
/examples/halma-localstorage.js,NA,NA
). is is listed in the manifest file using relative URL ,NA,NA
notation: ,NA,NA
../halma-localstorage.js,NA,NA
. is is just like you might use a relative URL in an ,NA,NA
<img src>,NA,NA
" aribute. As you’ll see in the next example, you can also use absolute paths (that ",NA,NA
start at the root of the current domain) or even absolute URLs (that point to resources on ,NA,NA
other domains).,NA,NA
"Now, in the HTML file, we need to add the ",NA,NA
manifest,NA,NA
 aribute that points to the cae ,NA,NA
manifest file.,NA,NA
<!DOCTYPE html>,NA,NA
"<html lang=""en"" manifest=""halma.manifest"">",NA,NA
And that’s it! When an offline-capable browser first loads ,NA,NA
the offline-enabled HTML page,NA,NA
", ",NA,NA
it will download the linked cae manifest file and start downloading all the referenced ,NA,NA
"resources and storing them in the offline application cae. From then on, the offline ",NA,NA
application algorithm takes over whenever you revisit the page. You can play the game ,NA,NA
"offline, and since it remembers its state locally, you can leave and come ba as oen as ",NA,NA
you like.,NA,NA
❧,NA,NA
FURTHER READING,NA,NA
Standards:,NA,NA
Offline web applications,NA,NA
 in the HTML5 specification,NA,NA
Browser vendor documentation:,NA,NA
Offline resources in Firefox ,NA,NA
HTML5 offline application cae,NA,NA
", part of the ",NA,NA
Safari client-side storage and ,NA,NA
offline,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
applications programming guide,NA,NA
Tutorials and demos:,NA,NA
Gmail for mobile HTML5 series: using appcae to laun offline - part 1 ,NA,NA
Gmail for mobile HTML5 series: using appcae to laun offline - part 2 ,NA,NA
Gmail for mobile HTML5 series: using appcae to laun offline - part 3 ,NA,NA
Debugging HTML5 offline application cae ,NA,NA
an HTML5 offline image editor and uploader application,NA,NA
❧,NA,NA
is has been “Let’s Take is Offline.” e ,NA,NA
full table of contents,NA,NA
 has more if you’d like to,NA,NA
keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition ,NA,NA
directly from O’Reilly,NA,NA
". You’ll get a book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,"diveintohtml5.org
  
  LET’S TAKE THIS OFFLINE",NA
powered by Google™,NA,NA
Search,LET’S TAKE THIS OFFLINE,NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
9. ,NA,NA
. ,NA,NA
A FORM OF MADNESS,NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
"verybody knows about web forms, right? Make a ",NA,NA
<form>,NA,NA
", a few ",NA,NA
<input ,NA,NA
"type=""text"">",NA,NA
" elements, maybe an ",NA,NA
"<input type=""password"">",NA,NA
", finish it ",NA,NA
off with an ,NA,NA
"<input type=""submit"">",NA,NA
" buon, and you’re done.",NA,NA
You don’t know the half of it. HTML5 defines over a dozen new input types that you can ,NA,NA
"use in your forms. And when I say “use,” I mean you can use them right now — without any ",NA,NA
"shims, has, or workarounds. Now don’t get too excited; I don’t mean to say that all of ",NA,NA
"these exciting new features are actually supported in every browser. Oh goodness no, I ",NA,NA
"don’t mean that at all. In modern browsers, yes, your forms will ki all kinds of ass. But in ",NA,NA
"legacy browsers, your forms will still work, albeit with less ass kiing. Whi is to say, all of ",NA,NA
these features degrade gracefully in every browser. Even IE 6.,NA,NA
❧,NA,NA
PLACEHOLDER TEXT,NA,NA
PLACEHOLDER SUPPORT,NA,NA
IE,NA,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
·,NA,NA
3.7+,NA,NA
4.0+,NA,NA
4.0+,NA,NA
·,NA,NA
4.0+,NA,NA
·,NA,NA
e first improvement HTML5 brings to web forms is the ability to set ,NA,NA
placeholder text in ,NA,NA
an input field,NA,NA
. Placeholder text is displayed inside the input field as long as the field is ,NA,NA
"empty and not focused. As soon as you cli on (or tab to) the input field, the placeholder ",NA,NA
text disappears.,NA,NA
"You’ve probably seen placeholder text before. For example, Mozilla Firefox ",NA,NA
includes placeholder text in the location bar that reads “Sear Bookmarks and ,NA,NA
History”:,NA,NA
"When you cli on (or tab to) the location bar, the placeholder text disappears:",NA,NA
Here’s how you can include placeholder text in your own web forms:,NA,NA
<form>,NA,NA
"<input name=""q"" placeholder=""Search Bookmarks and History"">",NA,NA
"<input type=""submit"" value=""Search"">",NA,NA
</form>,NA,NA
Browsers that don’t support the ,NA,NA
placeholder,NA,NA
" aribute will simply ignore it. No harm, no ",NA,NA
foul. ,NA,NA
See whether your browser supports placeholder text,NA,NA
 .,NA,NA
ASK PROFESSOR MARKUP,diveintohtml5.org,NA
☞,NA,NA
Q: Can I use HTML markup in the,A FORM OF MADNESS,NA
☞,NA,NA
placeholder,NA,NA
 aribute? I want to insert an,NA,NA
"image, or maybe ange the colors.",NA,NA
A: e ,NA,NA
placeholder,NA,NA
 aribute can only,NA,NA
"contain text, not HTML markup. However,",NA,NA
there are ,NA,NA
some vendor-specific CSS extensions,NA,NA
that allow you to style the placeholder text in,NA,NA
some browsers.,NA,NA
❧,NA,NA
AUTOFOCUS FIELDS,NA,NA
AUTOFOCUS SUPPORT,NA,NA
IE,NA,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
·,NA,NA
·,NA,NA
4.0+,NA,NA
3.0+,NA,NA
10.0+,NA,NA
·,NA,NA
·,NA,NA
Web sites can use JavaScript to focus the first input field of a ,NA,NA
"web form automatically. For example, the home page of ",NA,NA
Google.com,NA,NA
 will autofocus the input box so you can type your ,NA,NA
"sear keywords. While this is convenient for most people, it ",NA,NA
can be annoying for power users or people with special needs. ,NA,NA
"If you press the space bar expecting to scroll the page, the ",NA,NA
page will not scroll because the focus is already in a form ,NA,NA
input field. (It types a space in the field instead of scrolling.) If ,NA,NA
"you focus a different input field while the page is still loading, ",NA,NA
the site’s,NA,NA
autofocus script may “helpfully” move the focus ba to the,NA,NA
"original input field, disrupting your flow and causing you to type in the wrong place.",NA,NA
"Because the autofocusing is done with JavaScript, it can be triy to handle all of these edge",NA,NA
"cases, and there is lile recourse for people who don’t want a web page to “steal” the focus.","diveintohtml5.org
  
  A FORM OF MADNESS",NA
"To solve this problem, HTML5 introduces ",NA,NA
an ,NA,NA
autofocus,NA,NA
 aribute on all web form ,NA,NA
controls,NA,NA
.e ,NA,NA
autofocus,NA,NA
 aribute does exactly what it says on the tin: as soon as the page ,NA,NA
"loads, it moves the input focus to a particular input field. But because it’s just markup ",NA,NA
"instead of script, the behavior will be consistent across all web sites. Also, browser vendors ",NA,NA
(or extension authors) can offer users a way to disable the autofocusing behavior.,NA,NA
Here’s how you can set a form field to autofocus:,NA,NA
<form>,NA,NA
"<input name=""q"" autofocus>",NA,NA
"<input type=""submit"" value=""Search""> ",NA,NA
</form>,NA,NA
Browsers that don’t support the ,NA,NA
autofocus,NA,NA
 aribute will simply ignore it. ,NA,NA
See whether ,NA,NA
your browser supports autofocus fields,NA,NA
.,NA,NA
"What’s that? You say you want your autofocus fields to work in all browsers, not just ",NA,NA
these fancy-pants HTML5 browsers? You can keep your current autofocus script. Just ,NA,NA
make two small anges:,NA,NA
1. Add the ,NA,NA
autofocus,NA,NA
 aribute to your HTML markup ,NA,NA
2. ,NA,NA
Detect whether the browser supports the ,NA,NA
autofocus,NA,NA
 aribute,NA,NA
", and only run your ",NA,NA
own ,NA,NA
autofocus script if the browser doesn’t support autofocus natively.,NA,NA
↶,NA,NA
 Autofocus with fallback,NA,NA
"<form name=""f"">",NA,NA
"<input id=""q"" autofocus>",NA,NA
<script>,NA,NA
"if (!(""autofocus"" in document.createElement(""input""))) {",NA,NA
"document.getElementById(""q"").focus(); } ",NA,NA
</script> ,NA,NA
"<input type=""submit"" value=""Go""> ",NA,NA
</form>,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
…,NA,NA
See an example of ,NA,NA
autofocus,NA,NA
 with fallba,NA,NA
.,NA,NA
SETTING FOCUS AS EARLY AS POSSIBLE,NA,NA
Lots of web pages wait until ,NA,NA
window.onload,NA,NA
 fires to set focus. But the ,NA,NA
window.onload ,NA,NA
event doesn’t fire until ,NA,NA
aer,NA,NA
" all your images have loaded. If your page has a lot of images, ",NA,NA
su a naive script could potentially re-focus the field aer the user has started interacting ,NA,NA
with another part of your page. is is why power users hate autofocus scripts.,NA,NA
e example in the previous section placed the auto-focus script immediately aer the form ,NA,NA
"field that it references. is is the optimal solution, but it may offend your sensibilities to put ",NA,NA
"a blo of JavaScript code in the middle of your page. (Or, more mundanely, your ba-end ",NA,NA
"systems may just not be that flexible.) If you can’t insert a script in the middle of your page, ",NA,NA
you should set focus during a custom event like jery’s ,NA,NA
$(document).ready(),NA,NA
 instead of ,NA,NA
window.onload,NA,NA
.,NA,NA
↶,NA,NA
 Autofocus with jQuery fallback,NA,NA
<head> ,NA,NA
<script src=jquery.min.js></script> ,NA,NA
<script>,NA,NA
$(document).ready(function() {,NA,NA
"if (!(""autofocus"" in document.createElement(""input""))) { ",NA,NA
"$(""#q"").focus(); ",NA,NA
} ,NA,NA
}); ,NA,NA
</script> ,NA,NA
</head> ,NA,NA
<body> ,NA,NA
"<form name=""f""> ",NA,NA
"<input id=""q"" autofocus> ",NA,NA
"<input type=""submit"" value=""Go""> ",NA,NA
</form>,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
See an example of ,NA,NA
autofocus,NA,NA
 with jery fallba,NA,NA
.,NA,NA
jery fires its custom ,NA,NA
ready,NA,NA
" event as soon as the page DOM is available — that is, it waits ",NA,NA
"until the page text is loaded, but it doesn’t wait until all the images are loaded. is is not an ",NA,NA
optimal approa — if the page is unusually large or the network connection is unusually ,NA,NA
"slow, a user could still start interacting with the page before your focus script executes. But ",NA,NA
it is still far beer than waiting until the ,NA,NA
window.onload,NA,NA
 event fires.,NA,NA
"If you are willing and able to insert a single script statement in your page markup, there is ",NA,NA
a middle ground that is less offensive than the first option and more optimal than the ,NA,NA
"second. You can use jery’s custom events to define your own event, say ",NA,NA
autofocus_ready,NA,NA
". en you can trigger this event manually, immediately aer the ",NA,NA
autofocus form field is available.,NA,NA
anks to E. M. Sternberg for teaing me about this ,NA,NA
tenique.,NA,NA
↶,NA,NA
 Autofocus with a custom event ,NA,NA
fallback,NA,NA
<head> ,NA,NA
<script src=jquery.min.js></script> ,NA,NA
<script>,NA,NA
"$(document).bind('autofocus_ready', function() {",NA,NA
"if (!(""autofocus"" in document.createElement(""input""))) { ",NA,NA
"$(""#q"").focus(); ",NA,NA
} ,NA,NA
}); ,NA,NA
</script> ,NA,NA
</head> ,NA,NA
<body> ,NA,NA
"<form name=""f""> ",NA,NA
"<input id=""q"" autofocus>",NA,NA
<script>$(document).trigger('autofocus_ready');</script>,NA,NA
"<input type=""submit"" value=""Go""> ",NA,NA
</form>,NA,NA
See an example of ,NA,NA
autofocus,NA,NA
 with a custom event fallba,NA,NA
.,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
is is as optimal as the first approa; it will set focus to the form field as soon as ,NA,NA
"tenically possible, while the text of the page is still loading. But it transfers the bulk of ",NA,NA
your application logic (focusing the form field) out of the body of the page and into the ,NA,NA
head.,NA,NA
"is example relies on jery, but the concept of custom events is not unique to jery. ",NA,NA
Other JavaScript libraries like YUI and Dojo offer similar capabilities.,NA,NA
To sum up:,NA,NA
Seing focus properly is important.,NA,NA
"If at all possible, let the browser do it by seing the ",NA,NA
autofocus,NA,NA
 aribute on the form ,NA,NA
field you want to have focus.,NA,NA
"If you code a fallba for older browsers, detect support for the ",NA,NA
autofocus,NA,NA
 aribute to ,NA,NA
make sure your fallba is ,NA,NA
only,NA,NA
 executed in older browsers.,NA,NA
Set focus as early as possible. Insert the focus script into your markup immediately ,NA,NA
aer ,NA,NA
"the form field. If that offends you, use a JavaScript library that supports custom ",NA,NA
"events, ",NA,NA
and trigger a custom event immediately aer the form field markup. If that’s ,NA,NA
not ,NA,NA
"possible, use something like jery’s ",NA,NA
$(document).ready(),NA,NA
 event.,NA,NA
Under no circumstances should you wait until ,NA,NA
window.onload,NA,NA
 to set focus.,NA,NA
❧,NA,NA
EMAIL ADDRESSES,NA,NA
"For over a decade, web forms comprised just a few kinds of fields. e most common kinds ",NA,NA
were,NA,NA
Field Type,NA,NA
HTML Code,NA,NA
Notes,NA,NA
ebox ,NA,NA
"<input type=""checkbox"">",NA,NA
 can be toggled on or off,NA,NA
radio buon ,NA,NA
"<input type=""radio""> ",NA,NA
can be grouped with other inputs,NA,NA
password field ,NA,NA
"<input type=""password"">",NA,NA
 eos dots instead of aracters as you type,NA,NA
drop-down lists,NA,NA
 <select><option>…,NA,NA
file pier,NA,NA
"<input type=""file"">",NA,NA
pops up an “open file” dialog,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
submit buon,NA,NA
"<input type=""submit"">",NA,NA
the ,NA,NA
type,NA,NA
 aribute can be omied,NA,NA
plain text,NA,NA
"<input type=""text"">",NA,NA
All of these input types still work in HTML5. If you’re “upgrading to HTML5” (perhaps ,NA,NA
by,NA,NA
anging your DOCTYPE,NA,NA
"), you don’t need to make a single ange to your web forms. ",NA,NA
Hooray for baward compatibility!,NA,NA
"However, HTML5 defines 13 new field types, and for reasons that will become clear in ",NA,NA
"a moment, there is no reason ",NA,NA
not,NA,NA
 to start using them.,NA,NA
e first of these new input types is for ,NA,NA
email addresses,NA,NA
. It looks like this:,NA,NA
<form>,NA,NA
"<input type=""email"">",NA,NA
"<input type=""submit"" value=""Go"">",NA,NA
</form>,NA,NA
I was about to write a sentence that started with “in browsers that don’t support ,NA,NA
"type=""email""",NA,NA
…” but I stopped myself. Why? Because I’m not sure what it would mean to ,NA,NA
say that a browser doesn’t support ,NA,NA
"type=""email""",NA,NA
. All browsers “support” ,NA,NA
"type=""email""",NA,NA
.ey may not do anything special with it (you’ll see a few examples of ,NA,NA
"special treatment in a moment), but browsers that don’t recognize ",NA,NA
"type=""email""",NA,NA
 will ,NA,NA
treat it as ,NA,NA
"type=""text"" ",NA,NA
and render it as a plain text field.,NA,NA
I can not emphasize how important this is. e web has millions of forms that ask you to ,NA,NA
"enter an email address, and all of them use ",NA,NA
"<input type=""text"">",NA,NA
". You see a text box, you ",NA,NA
"type your email address in the text box, and that’s that. Along comes HTML5, whidefines ",NA,NA
"type=""email""",NA,NA
. Do browsers freak out? No. Every single browser on Earth treats an ,NA,NA
unknown ,NA,NA
type,NA,NA
 aribute as ,NA,NA
"type=""text""",NA,NA
 — even IE 6. So you can “upgrade” your web ,NA,NA
forms to use ,NA,NA
"type=""email""",NA,NA
 right now.,NA,NA
What would it mean to say that a browser ,NA,NA
DID,NA,NA
 support ,NA,NA
"type=""email""",NA,NA
"? Well, it can mean ",NA,NA
any number of things. e HTML5 specification doesn’t mandate any particular user ,NA,NA
interface for the new input types. Opera styles the form field with a small email icon. Other ,NA,NA
HTML5 browsers like Safari and Chrome simply render it as a text box — exactly like ,NA,NA
"type=""text""",NA,NA
— so your users will never know the difference (unless they view-source).,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
And then there’s the iPhone.,NA,NA
e iPhone does not have a physical keyboard. All “typing” is done by tapping on an on-,NA,NA
"screen keyboard that pops up at appropriate times, like when you focus a form field in a ",NA,NA
web page. Apple did something clever in the iPhone’s web browser. It recognizes several of ,NA,NA
"the new HTML5 input types, and ",NA,NA
dynamically anges the on-screen keyboard,NA,NA
  to optimize ,NA,NA
for that kind of input.,NA,NA
"For example, email addresses are text, right? Sure, but they’re a special kind of text. For ",NA,NA
"example, virtually all email addresses contain the ",NA,NA
@,NA,NA
 sign and at least one period (,NA,NA
.,NA,NA
"), but ",NA,NA
they’re unlikely to contain any spaces. So when you use an iPhone and focus an ,NA,NA
<input ,NA,NA
"type=""email"">",NA,NA
" element, you get an on-screen keyboard that contains a smaller-than-",NA,NA
"usual space bar, plus dedicated keys for the ",NA,NA
@,NA,NA
 and ,NA,NA
.,NA,NA
 aracters.,NA,NA
Test ,NA,NA
"type=""email""",NA,NA
 for yourself.,NA,NA
To sum up: there’s no downside to converting all your email address form fields to ,NA,NA
"type=""email""",NA,NA
" immediately. Virtually no one will even notice, except iPhone users, who ",NA,NA
probably won’t notice either. But the ones who do notice will smile quietly and thank you ,NA,NA
for making their web experience just a lile easier.,NA,NA
❧,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
WEB ADDRESSES,NA,NA
"Web addresses — whi standards wonks call URLs, except for a few ",NA,NA
pedants,NA,NA
 whi call them ,NA,NA
URIs — are another type of specialized text. e syntax of a web address is constrained by ,NA,NA
"the relevant Internet standards. If someone asks you to enter a web address into a form, ",NA,NA
they’re expecting something like “,NA,NA
http://www.google.com/,NA,NA
"”, not “125 Farwood Road.” ",NA,NA
Forward slashes are common — even Google’s home page has three of them. Periods are ,NA,NA
"also common, but spaces are forbidden. And every web address has a domain suffix like ",NA,NA
“.com” or “.org”.,NA,NA
Behold… (drum roll please)… ,NA,NA
"<input type=""url"">",NA,NA
". On the iPhone, it looks like this:",NA,NA
Test ,NA,NA
"type=""url""",NA,NA
 for yourself.,NA,NA
"e iPhone altered its virtual keyboard, just like it did for ",NA,NA
email addresses,NA,NA
", but now ",NA,NA
optimized for web addresses instead. e space bar has been completely replaced with three ,NA,NA
"virtual keys: a period, a forward slash, and a “.com” buon. (You can long-press the “.com” ",NA,NA
buon tooose other common suffixes like “.org” or “.net”.),NA,NA
Browsers that don’t support HTML5 will treat ,NA,NA
"type=""url""",NA,NA
 exactly like ,NA,NA
"type=""text""",NA,NA
", so ",NA,NA
there’s no downside to using it for all your web-address-inpuing needs.,NA,NA
❧,NA,NA
NUMBERS AS SPINBOXES,NA,NA
Next up: numbers. Asking for a number is triier than asking for an email address or ,NA,NA
"web address. First of all, numbers are more complicated than you might think. i: pi a ",NA,NA
"number. -1? No, I meant a number between 1 and 10. 7½? No no, not a fraction, silly. ",NA,NA
π,NA,NA
? ,NA,NA
Now you’re just being irrational.,NA,NA
"My point is, you don’t oen ask for “just a number.” It’s more likely that you’ll ask for a ",NA,NA
number in a particular range. You may only want certain kinds of numbers within that ,NA,NA
"range— maybe whole numbers but not fractions or decimals, or something more esoteric ",NA,NA
like numbers divisible by 10. HTML5 has you covered.,NA,NA
↶,NA,NA
" Pick a number, (almost) any number",NA,NA
"<input type=""number""",NA,NA
"min=""0""",NA,NA
"max=""10""",NA,NA
"step=""2""",NA,NA
"value=""6"">",NA,NA
Let’s take that one aribute at a time. (You can ,NA,NA
follow along with a live example,NA,NA
  if you like.),NA,NA
"type=""number""",NA,NA
 means that this is a number field.,NA,NA
"min=""0""",NA,NA
 specifies the minimum acceptable value for this ,NA,NA
field. ,NA,NA
"max=""10""",NA,NA
 is the maximum acceptable value.,NA,NA
"step=""2""",NA,NA
", combined with the ",NA,NA
min,NA,NA
" value, defines the acceptable numbers in the range: ",NA,NA
0,NA,NA
", ",NA,NA
2,NA,NA
", ",NA,NA
4,NA,NA
", and so on, up to the ",NA,NA
max,NA,NA
 value.,NA,NA
"value=""6""",NA,NA
 is the default value. is should look familiar. It’s the same aribute name ,NA,NA
you’ve always used to specify values for form fields. (I mention it here to drive home ,NA,NA
the point that HTML5 builds on previous versions of HTML. You don’t need to relearn ,NA,NA
how to do stuff you’re already doing.),"diveintohtml5.org
  
  A FORM OF MADNESS",NA
at’s the markup side of a number field. Keep in mind that all of those aributes are ,NA,NA
"optional. If you have a minimum but no maximum, you can specify a ",NA,NA
min,NA,NA
 aribute but no ,NA,NA
max,NA,NA
" aribute. e default step value is 1, and you can omit the ",NA,NA
step,NA,NA
 aribute unless you ,NA,NA
"need a different step value. If there’s no default value, then the ",NA,NA
value,NA,NA
 aribute can be ,NA,NA
the empty string or even omied altogether.,NA,NA
"But HTML5 doesn’t stop there. For the same low, low price of free, you get these ",NA,NA
handy JavaScript methods as well:,NA,NA
input.stepUp(n),NA,NA
 increases the field’s value by ,NA,NA
n,NA,NA
.,NA,NA
input.stepDown(n),NA,NA
 decreases the field’s value by ,NA,NA
n,NA,NA
.,NA,NA
input.valueAsNumber,NA,NA
 returns the current value as a floating point number. (e ,NA,NA
input.value,NA,NA
 property is always a string.),NA,NA
"Having trouble visualizing it? Well, the exact interface of a number control is up to your ",NA,NA
"browser, and different browser vendors have implemented support in different ways. On ",NA,NA
"the iPhone, where input is difficult to begin with, the browser ",NA,NA
onceagain,NA,NA
 optimizes the ,NA,NA
virtual keyboard for numeric input.,NA,NA
"In the desktop version of Opera, the same ",NA,NA
"type=""number""",NA,NA
 field is rendered as a ,NA,NA
"“spinbox”control, with lile up and down arrows that you can cli to ange the value.","diveintohtml5.org
  
  A FORM OF MADNESS",NA
Opera respects the ,NA,NA
min,NA,NA
", ",NA,NA
max,NA,NA
", and ",NA,NA
step,NA,NA
" aributes, so you’ll always end up with an acceptable ",NA,NA
"numeric value. If you bump up the value to the maximum, the up arrow in the spinbox is ",NA,NA
greyed out.,NA,NA
"As with all the other input types I’ve discussed in this apter, browsers that don’t support ",NA,NA
"type=""number""",NA,NA
 will treat it as ,NA,NA
"type=""text""",NA,NA
. e default value will show up in the field ,NA,NA
(since it’s stored in the ,NA,NA
value,NA,NA
" aribute), but the other aributes like ",NA,NA
min,NA,NA
 and ,NA,NA
max,NA,NA
 will be ,NA,NA
"ignored. You’re free to implement them yourself, or you could reuse a JavaScript framework ",NA,NA
that has already implemented spinbox controls. Just ,NA,NA
e for the native HTML5 support,NA,NA
" first, ",NA,NA
like this:,NA,NA
if (!,NA,NA
Modernizr,NA,NA
.inputtypes.number) {,NA,NA
// no native support for type=number fields,NA,NA
// maybe try Dojo or some other JavaScript framework,NA,NA
},NA,NA
❧,NA,NA
NUMBERS AS SLIDERS,NA,NA
Spinboxes,NA,NA
 are not the only way to represent numeric input. You’ve probably also seen ,NA,NA
“slider”controls that look like this:,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
Test ,NA,NA
"type=""range""",NA,NA
 for yourself.,NA,NA
"You can now have slider controls in your web forms, too. e markup looks eerily similar to ",NA,NA
spinbox controls,NA,NA
:,NA,NA
↶,NA,NA
 The spitting image,NA,NA
"<input type=""range""",NA,NA
"min=""0""",NA,NA
"max=""10""",NA,NA
"step=""2""",NA,NA
"value=""6"">",NA,NA
All the available aributes are the same as ,NA,NA
"type=""number""",NA,NA
 — ,NA,NA
min,NA,NA
", ",NA,NA
max,NA,NA
", ",NA,NA
step,NA,NA
", ",NA,NA
value,NA,NA
 —and ,NA,NA
they mean the same thing. e only difference is the user interface. Instead of a field for ,NA,NA
"typing, browsers are expected to render ",NA,NA
"type=""range""",NA,NA
 as a slider control. At time of ,NA,NA
"writing, the latest versions of Safari, Chrome, and Opera all do this. (Sadly, the iPhone ",NA,NA
renders it as a simple text box. It doesn’t even optimize its on-screen keyboard for numeric ,NA,NA
input.) All other browsers simply treat the field as ,NA,NA
"type=""text""",NA,NA
", so there’s no reason you ",NA,NA
can’t start using it immediately.,NA,NA
❧,NA,NA
DATE PICKERS,NA,NA
HTML 4 did not include a date pier control. JavaScript frameworks have pied up the ,NA,NA
sla(,NA,NA
Dojo,NA,NA
", ",NA,NA
jery UI,NA,NA
", ",NA,NA
YUI,NA,NA
", ",NA,NA
Closure Library,NA,NA
"), but of course ea of these solutions requires ",NA,NA
“buying into” the framework on whi the date pier is built.,NA,NA
HTML5 finally defines a way to include a native date pier control without having to ,NA,NA
"script it yourself. In fact, it defines six: date, month, week, time, date + time, and date + ",NA,NA
time -,NA,NA
timezone.,NA,NA
"So far, support is… sparse.",NA,NA
DATE PICKER SUPPORT,NA,NA
INPUT TYPE,NA,NA
OPERA,NA,NA
EVERY OTHER BROWSER,NA,NA
"type=""date""",NA,NA
9.0+,NA,NA
·,NA,NA
"type=""month""",NA,NA
9.0+,NA,NA
·,NA,NA
"type=""week""",NA,NA
9.0+,NA,NA
·,NA,NA
"type=""time""",NA,NA
9.0+,NA,NA
·,NA,NA
"type=""datetime""",NA,NA
9.0+,NA,NA
·,NA,NA
"type=""datetime-local""",NA,NA
9.0+,NA,NA
·,NA,NA
is is how Opera renders ,NA,NA
"<input type=""date"">",NA,NA
:,NA,NA
"If you need a time to go with that date, Opera also supports ",NA,NA
"<input type=""datetime"">",NA,NA
:,NA,NA
"If you only need a month + year (perhaps a credit card expiration date), Opera can render a",NA,NA
"<input type=""month"">",NA,NA
:,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
"Less common, but also available, is the ability to pi a specific week of a year with ",NA,NA
<input ,NA,NA
"type=""week"">",NA,NA
:,NA,NA
"Last but not least, you can pi a time with ",NA,NA
"<input type=""time"">",NA,NA
:,NA,NA
It’s likely that other browsers will eventually support these input types. But just like ,NA,NA
"type=""email""",NA,NA
" and the other input types, these form fields will be rendered as plain text ",NA,NA
boxes in browsers that don’t recognize ,NA,NA
"type=""date""",NA,NA
" and the other variants. If you like, ",NA,NA
you can simply use ,NA,NA
"<input type=""date"">",NA,NA
" and friends, make Opera users happy, and wait ",NA,NA
"for other browsers to cat up. More realistically, you can use ",NA,NA
"<input type=""date"">",NA,NA
", ",NA,NA
detect whether the browser has native support for date piers,NA,NA
", and fall ba to a scripted ",NA,NA
solution of your oice (,NA,NA
Dojo,NA,NA
", ",NA,NA
jery UI,NA,NA
", ",NA,NA
YUI,NA,NA
", ",NA,NA
Closure Library,NA,NA
", or some other solution).",NA,NA
↶,NA,NA
 Date picker with fallback,NA,NA
<form>,NA,NA
"<input type=""date"">",NA,NA
</form> ,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
...,NA,NA
<script> ,NA,NA
"var i = document.createElement(""input""); ",NA,NA
"i.setAttribute(""type"", ""date""); ",NA,NA
"if (i.type == ""text"") { ",NA,NA
// No native date picker support :( ,NA,NA
"// Use Dojo/jQueryUI/YUI/Closure to create one, // ",NA,NA
then dynamically replace that <input> element.,NA,NA
} ,NA,NA
</script>,NA,NA
❧,NA,NA
SEARCH BOXES,NA,NA
"OK, this one is subtle. Well, the idea is simple enough, but the implementations may ",NA,NA
require some explanation. Here goes…,NA,NA
"Sear. Not just Google Sear or Yahoo Sear. (Well, those too.) ink of any sear box, on ",NA,NA
"any page, on any site. Amazon has a sear box. Newegg has a sear box. Most blogs have a ",NA,NA
sear box. How are they marked up? ,NA,NA
"<input type=""text"">",NA,NA
", just like every other text box ",NA,NA
on the web. Let’s fix that.,NA,NA
<form> ,NA,NA
"<input name=""q"" type=""search"">",NA,NA
"<input type=""submit"" value=""Find""> ",NA,NA
</form>,NA,NA
⇜,NA,NA
 New-age search,NA,NA
box,NA,NA
Test ,NA,NA
"<input type=""search"">",NA,NA
 in your own browser,NA,NA
". In some browsers, you won’t notice ",NA,NA
"any difference from a regular text box. But if you’re using Safari on Mac OS X, it will look ",NA,NA
like this:,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
"Can you spot the difference? e input box has rounded corners! I know, I know, you can ",NA,NA
"hardly contain your excitement. But wait, there’s more! When you actually start typing ",NA,NA
into the ,NA,NA
"type=""search""",NA,NA
" box, Safari inserts a small “x” buon on the right side of the ",NA,NA
box.,NA,NA
"Cliing the “x” clears the contents of the field. (Google Chrome, whi shares ",NA,NA
"mutenology with Safari under the hood, also exhibits this behavior.) Both of these ",NA,NA
small tweaks are done to mat the look and feel of native sear boxes in iTunes and ,NA,NA
other Mac OS X client applications.,NA,NA
Apple.com,NA,NA
 uses ,NA,NA
"<input type=""search"">",NA,NA
" for their site-sear box, to help give their site ",NA,NA
"a“Mac-like” feel. But there’s nothing Mac-specific about it. It’s just markup, so ea browser ",NA,NA
on ea platform can oose to render it according to platform-specific conventions. As with ,NA,NA
"all the other new input types, browsers that don’t recognize ",NA,NA
"type=""search""",NA,NA
 will treat it ,NA,NA
like ,NA,NA
"type=""text""",NA,NA
", so there is absolutely no reason not to start using ",NA,NA
"type=""search""",NA,NA
 for all ,NA,NA
your sear boxes today.,NA,NA
PROFESSOR MARKUP SAYS,NA,NA
"By default, Safari will not apply even the ",NA,NA
most ,NA,NA
basic CSS styles to ,NA,NA
<input ,NA,NA
"type=""search"">",NA,NA
 fields. If you want to force ,NA,NA
Safari to treat your sear field like a normal ,NA,NA
text field (so you can apply your own CSS ,NA,NA
"styles), add this rule to your stylesheet:","diveintohtml5.org
  
  A FORM OF 
 MADNESS",NA
"input[type=""search""]",NA,NA
{,NA,NA
-webkit-appearance: ,NA,NA
textfield; ,NA,NA
},NA,NA
anks to John Lein for teaing me this tri.,NA,NA
❧,NA,NA
COLOR PICKERS,NA,NA
HTML5 also defines ,NA,NA
"<input type=""color"">",NA,NA
", whi lets you pi a color and returns the",NA,NA
"color’s hexadecimal representation. No browser supports it yet, whi is a shame, because ",NA,NA
I’ve,NA,NA
always loved ,NA,NA
the Mac OS color pier,NA,NA
. Maybe someday.,NA,NA
❧,NA,NA
FORM VALIDATION,NA,NA
FORM VALIDATION SUPPORT,NA,NA
IE,NA,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
·,NA,NA
4.0+,NA,NA
5.0+,NA,NA
6.0+,NA,NA
9.0+,NA,NA
·,NA,NA
·,NA,NA
"In this apter, I’ve talked about new input types and new features like auto-focus form ",NA,NA
"fields,",NA,NA
but I haven’t mentioned what is perhaps the most exciting part of HTML5 forms: automatic,NA,NA
input validation. Consider the common problem of entering an email address into a web,"diveintohtml5.org
  
  A FORM OF MADNESS",NA
"form. You probably have some client-side validation in JavaScript, followed by server-side ",NA,NA
validation in PHP or Python or some other server-side scripting language. HTML5 can ,NA,NA
"never replace your server-side validation, but it might someday replace your client-side ",NA,NA
validation.,NA,NA
ere are two big problems with validating email addresses in JavaScript:,NA,NA
1. A surprising number of your visitors (probably around 10%) won’t have ,NA,NA
JavaScript ,NA,NA
enabled ,NA,NA
2. You’ll get it wrong,NA,NA
"Seriously, you’ll get it wrong. Determining whether a random string of aracters is a valid ",NA,NA
email address ,NA,NA
is unbelievably complicated,NA,NA
". e harder you look, ",NA,NA
the more complicated it ,NA,NA
gets,NA,NA
.,NA,NA
Did I mention it’s ,NA,NA
"really, really complicated",NA,NA
? Wouldn’t it be easier to offload the ,NA,NA
entire headae to your browser?,NA,NA
Opera validates type=“email” ,NA,NA
↷,NA,NA
"at screenshot is from Opera 10, although the functionality has been present since Opera ",NA,NA
9.e only markup involved is ,NA,NA
seing the ,NA,NA
type,NA,NA
 aribute to ,NA,NA
"""email""",NA,NA
. When an Opera user ,NA,NA
tries to submit a form with an ,NA,NA
"<input type=""email"">",NA,NA
" field, Opera automatically offers ",NA,NA
"RFC-compliant email validation, even if scripting is disabled.",NA,NA
HTML5 also offers validation of web addresses entered into ,NA,NA
"<input type=""url"">",NA,NA
" fields, ",NA,NA
and numbers in ,NA,NA
"<input type=""number"">",NA,NA
 fields. e validation of numbers even takes into ,NA,NA
account the ,NA,NA
min,NA,NA
 and ,NA,NA
max,NA,NA
" aributes, so browsers will not let you submit the form if you enter ",NA,NA
a number that is too large.,NA,NA
ere is no markup required to activate HTML5 form validation; it is on by default. To turn ,NA,NA
"it off, use the ",NA,NA
novalidate,NA,NA
 aribute.,NA,NA
Don’t validate me ,NA,NA
↷,NA,NA
<form novalidate>,NA,NA
"<input type=""email"" id=""addr"">",NA,NA
"<input type=""submit"" value=""Subscribe"">",NA,NA
</form>,NA,NA
Browsers are slowly implementing support for HTML5 form validation. ,NA,NA
Firefox 4 will have ,NA,NA
complete support,NA,NA
". Unfortunately, Safari and Chrome have shipped an incomplete ",NA,NA
"implementation that may trip you up: they validate form controls, but they don’t offer any ",NA,NA
"visible feedba when a form field fails validation. In other words, if you enter an invalid ",NA,NA
(or improperly formaed) date in a ,NA,NA
"type=""date""",NA,NA
" field, Safari and Chrome will not submit ",NA,NA
"the form, but they won’t tell you why they didn’t submit the form. (ey will set focus to the ",NA,NA
"field that contains the invalid value, but they don’t display an error message like Opera or ",NA,NA
Firefox 4.),NA,NA
❧,NA,NA
REQUIRED FIELDS,NA,NA
<INPUT REQUIRED> SUPPORT,NA,NA
IE,NA,NA
FIREFOX,NA,NA
SAFARI,NA,NA
CHROME,NA,NA
OPERA,NA,NA
IPHONE,NA,NA
ANDROID,NA,NA
·,NA,NA
4.0+,NA,NA
·,NA,NA
·,NA,NA
9.0+,NA,NA
·,NA,NA
·,NA,NA
HTML5 form validation,NA,NA
 isn’t limited to the type of ea field. You can also specify that ,NA,NA
certain fields are required. Required fields must have a value before you can submit the ,NA,NA
form.,NA,NA
e markup for required fields is as simple as can be:,NA,NA
<form>,NA,NA
"<input id=""q"" required>",NA,NA
"<input type=""submit"" value=""Search"">",NA,NA
</form>,NA,NA
Test ,NA,NA
<input required>,NA,NA
 in your own browser,NA,NA
. Browsers may alter the default appearance,NA,NA
"of required fields. For example, this is what a required field looks like in Mozilla Firefox 4.0:",NA,NA
"Furthermore, if you aempt to submit the form without filling in the required value, Firefox",NA,NA
will pop up an infobar telling you that the field is mandatory and can not be le blank.,NA,NA
❧,NA,NA
FURTHER READING,NA,NA
Specifications and standards:,NA,NA
<input>,NA,NA
 types,NA,NA
JavaScript libraries:,NA,NA
Modernizr,NA,NA
", an HTML5 detection library",NA,NA
Useful articles:,NA,NA
the ,NA,NA
<input placeholder>,NA,NA
 aribute ,NA,NA
the ,NA,NA
<input autofocus>,NA,NA
 aribute ,NA,NA
the ,NA,NA
<form novalidate>,NA,NA
 aributee ,NA,NA
<input required>,NA,NA
 aribute HTML5 ,NA,NA
Forms in Mozilla Firefox 4.0+,NA,NA
Forward inking Form Validation,NA,NA
❧,NA,NA
is has been “A Form of Madness.” e ,NA,NA
full table of contents,NA,NA
 has more if you’d like to keep,NA,NA
reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your ,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition,NA,NA
directly from O’Reilly,NA,NA
. You’ll get a ,NA,NA
"book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,diveintohtml5.org,NA
powered by Google™,NA,NA
Search,A FORM OF MADNESS,NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
№,NA,NA
10 ,NA,NA
10,NA,NA
. ,NA,NA
. ,NA,NA
"“DISTRIBUTED,”",NA,NA
"“EXTENSIBILITY,”",NA,NA
& ,NA,NA
OTHER FANCY WORDS,NA,NA
show table of contents,NA,NA
❧,NA,NA
DIVING IN,NA,NA
here are ,NA,NA
over 100 elements,NA,NA
 in HTML5. Some are ,NA,NA
purely semantic,NA,NA
", others are ",NA,NA
just containers for scripted APIs,NA,NA
. roughout ,NA,NA
the history of HTML,NA,NA
", standards ",NA,NA
wonks have argued about whi elements should be included in the ,NA,NA
language.,NA,NA
Should HTML include a ,NA,NA
<figure>,NA,NA
 element? A ,NA,NA
<person>,NA,NA
 element? How,NA,NA
about a ,NA,NA
<rant>,NA,NA
" element? Decisions are made, specs are wrien, authors author, ",NA,NA
"implementors implement, and the web lures ever forward.",NA,NA
"Of course, HTML can’t please everyone. No standard can. Some ideas don’t make the cut. For ",NA,NA
"example, there is no ",NA,NA
<person>,NA,NA
 element in HTML5. (ere’s no ,NA,NA
<rant>,NA,NA
" element either, damn ",NA,NA
it!) ere’s nothing stopping you from including a ,NA,NA
<person>,NA,NA
" element in a web page, but ",NA,NA
it ,NA,NA
won’t validate,NA,NA
", ",NA,NA
it won’t work consistently across browsers,NA,NA
", and it might conflict with future ","diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
HTML specs if we want to add it later.,NA,NA
"Right, so if making up your own elements isn’t the answer, what’s a semantically inclined ",NA,NA
web author to do? ere have been aempts to extend previous versions of HTML. e most ,NA,NA
popular method is ,NA,NA
microformats,NA,NA
", whi uses the ",NA,NA
class,NA,NA
 and ,NA,NA
rel,NA,NA
 aributes in HTML 4.,NA,NA
Another option is ,NA,NA
RDFa,NA,NA
", whi was originally designed to be used in ",NA,NA
XHTML,NA,NA
 but is now ,NA,NA
being ported to HTML,NA,NA
 as well.,NA,NA
Microformats and RDFa ea have their strengths and weaknesses. ey take radically ,NA,NA
different approaes towards the same goal: extending web pages with additional ,NA,NA
semantics that are not part of the core HTML language. I don’t intend to turn this apter ,NA,NA
into a format flamewar. (at would definitely require a ,NA,NA
<rant>,NA,NA
" element!) Instead, I want to ",NA,NA
"focus on a third option whi is part of, and tightly integrated into, HTML5 itself: microdata.",NA,NA
❧,NA,NA
WHAT IS MICRODATA?,NA,NA
"Ea word in the following sentence is important, so pay aention.",NA,NA
PROFESSOR MARKUP SAYS,NA,NA
Microdata annotates the DOM with scoped name/value pairs,NA,NA
from custom vocabularies.,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
Now what does that mean? Let’s start from the end and work bawards. Microdata centers ,NA,NA
around custom vocabularies. ink of “the set of all HTML5 elements” as one vocabulary. is ,NA,NA
vocabulary includes elements to represent ,NA,NA
a section or an article,NA,NA
" , but it doesn’t include ",NA,NA
elements to represent a person or an event. If you want to represent a person on a web ,NA,NA
"page, you’ll need to define your own vocabulary. Microdata lets you do this. Anyone can ",NA,NA
define a microdata vocabulary and start embedding custom properties in their own web ,NA,NA
pages.,NA,NA
e next thing to know about microdata is that it works with name/value pairs. Every ,NA,NA
"microdata vocabulary defines a set of named properties. For example, a Person vocabulary ",NA,NA
could define properties like ,NA,NA
name,NA,NA
 and ,NA,NA
photo,NA,NA
. To include a specific microdata property on ,NA,NA
"your web page, you provide the property name in a specific place. Depending on where ",NA,NA
"you declare the property name, microdata has rules about how to extract the property ",NA,NA
value. (More on this in the next section.),NA,NA
"Along with named properties, microdata relies heavily on the concept of “scoping.” e ",NA,NA
simplest way to think of microdata scoping is to think about the natural parent-ild ,NA,NA
relationship of elements in the DOM. e ,NA,NA
<html>,NA,NA
" element usually contains two ildren, ",NA,NA
<head>,NA,NA
 and ,NA,NA
<body>,NA,NA
. e ,NA,NA
<body>,NA,NA
" element usually contains multiple ildren, ea of whimay ",NA,NA
"have ild elements of their own. For example, your page might include an ",NA,NA
<h1> ,NA,NA
element ,NA,NA
within an ,NA,NA
<hgroup>,NA,NA
 element within a ,NA,NA
<header>,NA,NA
 element within the ,NA,NA
<body> ,NA,NA
element. A data ,NA,NA
table might contain ,NA,NA
<td>,NA,NA
 within ,NA,NA
<tr>,NA,NA
 within ,NA,NA
<table>,NA,NA
 (within ,NA,NA
<body>,NA,NA
). Microdata re-uses ,NA,NA
the hierarical structure of the DOM itself to provide a way to say “all the properties within ,NA,NA
this,NA,NA
 element are taken from ,NA,NA
this,NA,NA
 vocabulary.” is allows you to use more than one microdata ,NA,NA
vocabulary on the same page. You can even nest microdata vocabularies within other ,NA,NA
"vocabularies, all by re-using the natural structure of the DOM. (I’ll show multiple examples ",NA,NA
of nested vocabularies throughout this apter.),NA,NA
"Now, I’ve already toued on the DOM, but let me elaborate on that. Microdata is about ",NA,NA
applying additional semantics to ,NA,NA
data that’s already visible on your web page,NA,NA
 . Microdata is ,NA,NA
not designed to be a standalone data format. It’s a complement to HTML. As you’ll see in ,NA,NA
"the next section, microdata works best when you’re already using HTML correctly, but the ",NA,NA
HTML vocabulary isn’t quite expressive enough. Microdata is great for fine-tuning the ,NA,NA
semantics of data that’s already in the DOM. If the data you’re semanti-fying isn’t in the ,NA,NA
"DOM, you should step ba and re-evaluate whether microdata is the right solution.",NA,NA
Does this sentence make more sense now? “Microdata annotates the DOM with scoped,NA,NA
name/value pairs from custom vocabularies.” I hope so. Let’s see it in action.,NA,NA
❧,NA,NA
THE MICRODATA DATA MODEL,NA,NA
"Defining your own microdata vocabulary is easy. First, you need a namespace, whi is just ",NA,NA
"a URL. e namespace URL could actually point to a working web page, although that’s not ",NA,NA
strictly required. Let’s say I want to create a microdata vocabulary that describes a person. ,NA,NA
If I own the ,NA,NA
data-vocabulary.org,NA,NA
" domain, I’ll use the URL ",NA,NA
http://data-,NA,NA
vocabulary.org/Person,NA,NA
 as the namespace for my microdata vocabulary. at’s an easy ,NA,NA
way to create a globally unique identifier: pi a URL on a domain that you control.,NA,NA
"In this vocabulary, I need to define some named properties. Let’s start with three ",NA,NA
basic properties:,NA,NA
name,NA,NA
 (your full name),NA,NA
photo,NA,NA
 (a link to a picture of you),NA,NA
url,NA,NA
" (a link to a site associated with you, like a weblog or a Google profile)",NA,NA
"Some of these properties are URLs, others are plain text. Ea of them lends itself to a natural ",NA,NA
"form of markup, even before you start thinking about microdata or vocabularies or whatnot. ",NA,NA
Imagine that you have a profile page or an “about” page. Your name is probably marked up ,NA,NA
"as a heading, like an ",NA,NA
<h1>,NA,NA
 element. Your photo is probably an ,NA,NA
<img>,NA,NA
" element, since you ",NA,NA
want people to see it. And any URLs associated your profile are probably already marked up ,NA,NA
"as hyperlinks, because you want people to be able to cli them. For the sake of discussion, ",NA,NA
let’s say your entire profile is also wrapped in a ,NA,NA
<section>,NA,NA
 element to separate it from the ,NA,NA
rest of the page content. us:,NA,NA
↶,NA,NA
 It’s all about me,NA,NA
<section>,NA,NA
<h1>Mark Pilgrim</h1>,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"<p><img src=""http://www.example.com/photo.jpg"" alt=""[me smiling]""></p>",NA,NA
"<p><a href=""http://diveintomark.org/"">weblog</a></p>",NA,NA
</section>,NA,NA
Microdata’s data model is name/value pairs. A microdata property name (like ,NA,NA
name,NA,NA
 or ,NA,NA
photo ,NA,NA
or ,NA,NA
url,NA,NA
 in this example) is always declared on an HTML element. e corresponding ,NA,NA
"property value is then taken from the element’s DOM. For most HTML elements, the ",NA,NA
property value is simply the text content of the element. But there are a handful of ,NA,NA
exceptions.,NA,NA
WHERE DO MICRODATA PROPERTY VALUES COME FROM?,NA,NA
Element ,NA,NA
Value,NA,NA
<meta> ,NA,NA
content,NA,NA
 aribute,NA,NA
<audio> ,NA,NA
src,NA,NA
 ,NA,NA
aribute ,NA,NA
<embed> ,NA,NA
<iframe> ,NA,NA
<img> ,NA,NA
<source> ,NA,NA
<video>,NA,NA
<a> ,NA,NA
href,NA,NA
 ,NA,NA
aribute ,NA,NA
<area> ,NA,NA
<link>,NA,NA
<object> ,NA,NA
data,NA,NA
 aribute,NA,NA
<time> ,NA,NA
datetime,NA,NA
 aribute ,NA,NA
all other elements ,NA,NA
text content,NA,NA
“Adding microdata” to your page is a maer of adding a few aributes to the HTML ,NA,NA
elements you already have. e first thing you always do is declare whi microdata ,NA,NA
"vocabulary you’re using, by adding an ",NA,NA
itemtype,NA,NA
 aribute. e second thing you always do ,NA,NA
"is declare the scope of the vocabulary, using an ",NA,NA
itemscope,NA,NA
" aribute. In this example, all ",NA,NA
the data we want to semanti-fy is in a ,NA,NA
<section>,NA,NA
" element, so we’ll declare the ",NA,NA
itemtype,NA,NA
 ,NA,NA
and ,NA,NA
itemscope,NA,NA
 aributes on the ,NA,NA
<section>,NA,NA
 element.,NA,NA
"<section itemscope itemtype=""http://data-vocabulary.org/Person"">",NA,NA
Your name is the first bit of data within the ,NA,NA
<section>,NA,NA
 element. It’s wrapped in an ,NA,NA
<h1> ,NA,NA
element. e ,NA,NA
<h1>,NA,NA
 element doesn’t have any special processing in the ,NA,NA
HTML5 microdata data ,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
model,NA,NA
", so it falls under the “all other elements” rule where the microdata property value ",NA,NA
is simply the text content of an element. (is would work equally well if your name was ,NA,NA
wrapped in a ,NA,NA
<p>,NA,NA
", ",NA,NA
<div>,NA,NA
", or ",NA,NA
<span>,NA,NA
 element.),NA,NA
"<h1 itemprop=""name"">Mark Pilgrim</h1>",NA,NA
"In English, this says “here is the ",NA,NA
name,NA,NA
 property of the ,NA,NA
http://data-,NA,NA
vocabulary.org/Person,NA,NA
" vocabulary, and the value of the property is ",NA,NA
Mark Pilgrim,NA,NA
.”,NA,NA
Next up: the ,NA,NA
photo,NA,NA
 property. is is supposed to be a URL. According to the ,NA,NA
HTML5 ,NA,NA
microdata data model,NA,NA
", the “value” of an ",NA,NA
<img>,NA,NA
 element is its ,NA,NA
src,NA,NA
" aribute. Hey look, the ",NA,NA
URL of your profile photo is already in an ,NA,NA
<img src>,NA,NA
 aribute. All you need to do is ,NA,NA
declare that the ,NA,NA
<img>,NA,NA
 element is the ,NA,NA
photo,NA,NA
 property.,NA,NA
"<p><img itemprop=""photo""",NA,NA
"src=""http://www.example.com/photo.jpg""",NA,NA
"alt=""[me smiling]""></p>",NA,NA
"In English, this says “here is the ",NA,NA
photo,NA,NA
 property of the ,NA,NA
http://data-,NA,NA
vocabulary.org/Person,NA,NA
" vocabulary, and the value of the property is ",NA,NA
http://www.example.com/photo.jpg,NA,NA
.,NA,NA
"Finally, the ",NA,NA
url,NA,NA
 property is also a URL. According to the ,NA,NA
HTML5 microdata data model,NA,NA
", ",NA,NA
the“value” of an ,NA,NA
<a>,NA,NA
 element is its ,NA,NA
href,NA,NA
" aribute. And once again, this fits perfectly with ",NA,NA
your existing markup. All you need to do is say that your existing ,NA,NA
<a>,NA,NA
 element is the ,NA,NA
url ,NA,NA
property:,NA,NA
"<a itemprop=""url"" href=""http://diveintomark.org/"">dive into mark</a>",NA,NA
"In English, this says “here is the ",NA,NA
url,NA,NA
 property of the ,NA,NA
http://data-,NA,NA
vocabulary.org/Person,NA,NA
" vocabulary, and the value of the property is ",NA,NA
http://diveintomark.org/,NA,NA
.,NA,NA
"Of course, if your markup looks a lile different, that’s not a problem. You can add ",NA,NA
"microdata properties and values to any HTML markup, even really gnarly 20th-century-",NA,NA
"era, tables-for-layout, Oh-God-why-did-I-agree-to-maintain-this markup. While I don’t ",NA,NA
recommend this kind,NA,NA
"of markup, it is still common, and you can still add microdata to it.",NA,NA
↶,NA,NA
" For the love of God, don’t do this",NA,NA
<TABLE> ,NA,NA
<TR><TD>Name<TD>Mark Pilgrim ,NA,NA
<TR><TD>Link<TD> ,NA,NA
<A href=# onclick=goExternalLink()>http://diveintomark.org/</A> ,NA,NA
</TABLE>,NA,NA
For marking up the ,NA,NA
name,NA,NA
" property, just add an ",NA,NA
itemprop,NA,NA
 aribute on the table cell that ,NA,NA
"contains the name. Table cells have no special rules in the microdata property value table, ",NA,NA
"so they get the default value, “the microdata property is the text content.”",NA,NA
"<TR><TD>Name<TD itemprop=""name"">Mark Pilgrim",NA,NA
Adding the ,NA,NA
url,NA,NA
 property looks triier. is markup doesn’t use the ,NA,NA
<a>,NA,NA
 element ,NA,NA
properly. Instead of puing the link target in the ,NA,NA
href,NA,NA
" aribute, it has nothing useful in ",NA,NA
the ,NA,NA
href ,NA,NA
aribute and uses Javascript in the ,NA,NA
onclick,NA,NA
 aribute to call a function (not ,NA,NA
"shown) that extracts the URL and navigates to it. For extra “holy fu, please stop doing ",NA,NA
"that” bonus points, let’s pretend that the function also opens the link in a tiny popup ",NA,NA
window with no scroll bars. Wasn’t the internet fun last century?,NA,NA
"Anyway, you can still convert this into a microdata property, you just need to be a lile ",NA,NA
creative. Using the ,NA,NA
<a>,NA,NA
 element directly is out of the question. e link target isn’t in the ,NA,NA
href,NA,NA
 ,NA,NA
"aribute, and there’s no way to override the rule that says “in an ",NA,NA
<a>,NA,NA
" element, look for the ",NA,NA
microdata property value in the ,NA,NA
href,NA,NA
 aribute.” But you ,NA,NA
can,NA,NA
 add a wrapper element around ,NA,NA
"the entire mess, and use that to add the ",NA,NA
url,NA,NA
 microdata property.,NA,NA
↶,NA,NA
 This is what you get for subverting ,NA,NA
HTML,NA,NA
"<TABLE itemscope itemtype=""http://data-vocabulary.org/Person""> ",NA,NA
<TR><TD>Name<TD>Mark Pilgrim ,NA,NA
<TR><TD>Link<TD>,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"<span itemprop=""url"">",NA,NA
<A href=# onclick=goExternalLink()>http://diveintomark.org/</A>,NA,NA
</span>,NA,NA
</TABLE>,NA,NA
Since the ,NA,NA
<span>,NA,NA
" element has no special processing, it uses the default rule, “the microdata ",NA,NA
property is the text content.” “Text content” doesn’t mean “all the markup inside this ,NA,NA
"element”(like you would get with, say, the ",NA,NA
innerHTML,NA,NA
 DOM property). It means “just the ,NA,NA
"text, ma’am.” In this case, ",NA,NA
http://diveintomark.org/,NA,NA
", the text content of the ",NA,NA
<a>,NA,NA
 ,NA,NA
element inside the ,NA,NA
<span>,NA,NA
 element.,NA,NA
To sum up: you can add microdata properties to any markup. If you’re using HTML ,NA,NA
"correctly, you’ll find it easier to add microdata than if your HTML markup sus, but it can ",NA,NA
always be done.,NA,NA
❧,NA,NA
MARKING UP PEOPLE,NA,NA
"By the way, the starter examples in the previous section weren’t completely made up. ere ",NA,NA
"really is a microdata vocabulary for marking up information about people, and it really is ",NA,NA
that easy. Let’s take a closer look.,NA,NA
e easiest way to integrate microdata into a personal website is on your “about” page. ,NA,NA
You ,NA,NA
do,NA,NA
" have an “about” page, don’t you? If not, you can follow along as I extend ",NA,NA
this ,NA,NA
sample“about” page,NA,NA
 with additional semantics. e final result is here: ,NA,NA
person-plus-,NA,NA
microdata.html,NA,NA
.,NA,NA
"Let’s look at the raw markup first, before any microdata properties have been added:",NA,NA
<section>,NA,NA
"<img width=""204"" height=""250""",NA,NA
"src=""http://diveintohtml5.org/examples/2000_05_mark.jpg""",NA,NA
"alt=""[Mark Pilgrim, circa 2000]"">",NA,NA
<h1>Contact Information</h1> ,NA,NA
<dl> ,NA,NA
<dt>Name</dt> ,NA,NA
<dd>Mark Pilgrim</dd>,NA,NA
<dt>Position</dt> ,NA,NA
"<dd>Developer advocate for Google, Inc.</dd>",NA,NA
<dt>Mailing address</dt> ,NA,NA
<dd> ,NA,NA
100 Main Street<br> ,NA,NA
"Anytown, PA 19999<br> ",NA,NA
USA ,NA,NA
</dd> ,NA,NA
</dl> ,NA,NA
<h1>My Digital Footprints</h1> ,NA,NA
<ul> ,NA,NA
"<li><a href=""http://diveintomark.org/"">weblog</a></li> ",NA,NA
"<li><a href=""http://www.google.com/profiles/pilgrim"">Google ",NA,NA
profile</a></li> ,NA,NA
"<li><a href=""http://www.reddit.com/user/MarkPilgrim"">Reddit.com ",NA,NA
profile</a></li> ,NA,NA
"<li><a href=""http://www.twitter.com/diveintomark"">Twitter</a></li> ",NA,NA
</ul> ,NA,NA
</section> ,NA,NA
"e first thing you always need to do is declare the vocabulary you’re using, and the scope ",NA,NA
of the properties you want to add. You do this by adding the ,NA,NA
itemtype,NA,NA
 and ,NA,NA
itemscope ,NA,NA
aributes on the outermost element that contains the other elements that contain the ,NA,NA
"actual data. In this case, that’s a ",NA,NA
<section>,NA,NA
 element.,NA,NA
"<section itemscope itemtype=""http://data-vocabulary.org/Person"">","[Follow along! Before: 
 person.html
 , aer: 
 person-plus-microdata.html
 ]",NA
Now you can start defining microdata properties from the ,NA,NA
http://data-,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
vocabulary.org/Person,NA,NA
" vocabulary. But what are those properties? As it happens, you ",NA,NA
can see the list of properties by navigating to ,NA,NA
data-vocabulary.org/Person,NA,NA
 in your browser. ,NA,NA
"e microdata specification does not require this, but I’d say it’s certainly a “best practice.” ",NA,NA
"Aer all, if you want developers to actually ",NA,NA
use,NA,NA
" your microdata vocabulary, you need to ",NA,NA
document it. And where beer to put your documentation than the vocabulary URL itself?,NA,NA
PERSON VOCABULARY,NA,NA
Property Description,NA,NA
name ,NA,NA
Name ,NA,NA
nickname ,NA,NA
Niname ,NA,NA
photo ,NA,NA
An image link ,NA,NA
title,NA,NA
"e person’s title (for example, “Financial Manager”) ",NA,NA
role,NA,NA
"e person’s role (for example, “Accountant”) ",NA,NA
url ,NA,NA
"Link to a web page, su as the person’s home page ",NA,NA
affiliation,NA,NA
e name of an organization with whi the person is associated (for ,NA,NA
"example, an employer) ",NA,NA
friend ,NA,NA
Identifies a social relationship between the person described and another person ,NA,NA
contact ,NA,NA
Identifies a social relationship between the person described and another ,NA,NA
person ,NA,NA
acquaintance,NA,NA
 Identifies a social relationship between the person described and another ,NA,NA
person ,NA,NA
address,NA,NA
e location of the person. Can have the subproperties ,NA,NA
street-address,NA,NA
", ",NA,NA
locality,NA,NA
", ",NA,NA
region,NA,NA
", ",NA,NA
postal-code,NA,NA
", and ",NA,NA
country-name,NA,NA
.,NA,NA
e first thing in ,NA,NA
this sample “about” page,NA,NA
"  is a picture of me. Naturally, it’s marked up with ",NA,NA
an ,NA,NA
<img>,NA,NA
 element. To declare that this ,NA,NA
<img>,NA,NA
" element is my profile picture, all we need to ",NA,NA
do is add ,NA,NA
"itemprop=""photo""",NA,NA
 to the ,NA,NA
<img>,NA,NA
 element.,NA,NA
"<img itemprop=""photo"" width=""204"" height=""250""",NA,NA
"src=""http://diveintohtml5.org/examples/2000_05_mark.jpg""",NA,NA
"alt=""[Mark Pilgrim, circa 2000]"">","[Follow along! Before: 
 person.html
 , aer: 
 person-plus-microdata.html
 ]",NA
"Where’s the microdata property value? It’s already there, in the ",NA,NA
src,NA,NA
 aribute. If you recall,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
from the ,NA,NA
HTML5 microdata data model,NA,NA
", the “value” of an ",NA,NA
<img>,NA,NA
 element is its ,NA,NA
src,NA,NA
 aribute. ,NA,NA
Every ,NA,NA
<img>,NA,NA
 element has a ,NA,NA
src,NA,NA
 aribute — otherwise it would just be a broken image —,NA,NA
and the ,NA,NA
src,NA,NA
" is always a URL. See? If you’re using HTML correctly, microdata is easy.",NA,NA
"Furthermore, this ",NA,NA
<img>,NA,NA
 element isn’t alone on the page. It’s a ild element of the ,NA,NA
<section>,NA,NA
" element, the one we just declared with the ",NA,NA
itemscope,NA,NA
 aribute. Microdata ,NA,NA
reuses the parent-ild relationship of elements on the page to define the scoping of ,NA,NA
"microdata properties. In plain English, we’re saying, “is ",NA,NA
<section>,NA,NA
 element represents a ,NA,NA
person. Any microdata properties you might find on the ildren of the ,NA,NA
<section>,NA,NA
 element ,NA,NA
are ,NA,NA
"properties of that person.” If it helps, you can think of the ",NA,NA
<section>,NA,NA
 element has the ,NA,NA
subject of a sentence. e ,NA,NA
itemprop,NA,NA
" aribute represents the verb of the sentence, something ",NA,NA
like “is pictured at.” e microdata property value represents the object of the sentence.,NA,NA
"is person [explicit, from ",NA,NA
"<section itemscope itemtype=""..."">",NA,NA
],NA,NA
"is pictured at [explicit, from ",NA,NA
"<img itemprop=""photo"">",NA,NA
],NA,NA
http://diveintohtml5.org/examples/2000_05_mark.jpg,NA,NA
" [implicit, from ",NA,NA
<img src>,NA,NA
 aribute],NA,NA
"e subject only needs to be defined once, by puing ",NA,NA
itemscope,NA,NA
 and ,NA,NA
itemtype,NA,NA
 aributes ,NA,NA
on the outermost ,NA,NA
<section>,NA,NA
 element. e verb is defined by puing the ,NA,NA
"itemprop=""photo""",NA,NA
 aribute on the ,NA,NA
<img>,NA,NA
 element. e object of the sentence doesn’t need ,NA,NA
"any special markup at all, because the ",NA,NA
HTML5 microdata data model,NA,NA
 says that the property ,NA,NA
value of an ,NA,NA
<img>,NA,NA
 element is its ,NA,NA
src,NA,NA
 aribute.,NA,NA
"Moving on to the next bit of markup, we see an ",NA,NA
<h1>,NA,NA
 header and the beginnings of a ,NA,NA
<dl> ,NA,NA
list. Neither the ,NA,NA
<h1>,NA,NA
 nor the ,NA,NA
<dl>,NA,NA
 need to be marked up with microdata. Not every piece of ,NA,NA
"HTML needs to be a microdata property. Microdata is about the properties themselves, not ",NA,NA
the markup or headers surrounding the properties. is ,NA,NA
<h1>,NA,NA
 isn’t a property; it’s just a ,NA,NA
"header. Similarly, the ",NA,NA
<dt>,NA,NA
 that says “Name” isn’t a property; it’s just a label.,NA,NA
↶,NA,NA
 Boring,NA,NA
Boring ,NA,NA
⇝,NA,NA
<h1>Contact Information</h1>,NA,NA
<dl>,"“DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
Boring ,NA,NA
⇝,NA,NA
<dt>Name</dt> ,NA,NA
<dd>Mark Pilgrim</dd>,NA,NA
So where is the real information? It’s in the ,NA,NA
<dd>,NA,NA
" element, so that’s where we need to put ",NA,NA
the ,NA,NA
itemprop,NA,NA
 aribute. Whi property is it? It’s the ,NA,NA
name,NA,NA
 property. Where is the property ,NA,NA
value? It’s the text within the ,NA,NA
<dd>,NA,NA
 element. Does that need to be marked up? the ,NA,NA
HTML5 ,NA,NA
microdata data model,NA,NA
" says no, ",NA,NA
<dd>,NA,NA
" elements have no special processing, so the property ",NA,NA
value is just the text within the element.,NA,NA
↶,NA,NA
" That’s my name, don’t wear it out ",NA,NA
"<dd itemprop=""name"">Mark Pilgrim</dd>","[Follow along! Before: 
 person.html
 , aer: 
 person-plus-microdata.html
 ]",NA
"What did we just say, in English? “is person’s name is Mark Pilgrim.” Well OK then. ",NA,NA
Onward.,NA,NA
"e next two properties are a lile triy. is is the markup, pre-microdata:",NA,NA
<dt>Position</dt>,NA,NA
"<dd>Developer advocate for Google, Inc.</dd>",NA,NA
"If you look at the definition of the Person vocabulary, the text “Developer advocate for ",NA,NA
"Google, Inc.” actually encompasses ",NA,NA
two,NA,NA
 properties: ,NA,NA
title,NA,NA
 (“Developer advocate”) and ,NA,NA
affiliation,NA,NA
" (“Google, Inc.”). How can you express that in microdata? e short answer is, ",NA,NA
you can’t. Microdata doesn’t have a way to break up runs of text into separate properties. ,NA,NA
"You can’t say “the first 18 aracters of this text is one microdata property, and the last ",NA,NA
12aracters of this text is another microdata property.”,NA,NA
But all is not lost. Imagine that you wanted to style the text “Developer advocate” in a ,NA,NA
"different font from the text “Google, Inc.” CSS can’t do that either. So what would you do? ",NA,NA
"You would first need to wrap the different bits of text in dummy elements, like ",NA,NA
<span>,NA,NA
", ",NA,NA
then apply different CSS rules to ea ,NA,NA
<span>,NA,NA
 element.,NA,NA
is tenique is also useful for microdata. ere are two distinct pieces of information here:,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
a ,NA,NA
title,NA,NA
 and an ,NA,NA
affiliation,NA,NA
. If you wrap ea piece in a dummy ,NA,NA
<span>,NA,NA
" element, you ",NA,NA
can declare that ea ,NA,NA
<span>,NA,NA
 is a separate microdata property.,NA,NA
<dt>Position</dt>,NA,NA
"<span itemprop=""affiliation"">Google, Inc.<span></dd>",NA,NA
"<dd><span itemprop=""title"">Developer advocate</span> for","[Follow along! Before: 
 person.html
 , aer: 
 person-plus-microdata.html
 ]",NA
"Tada! “is person’s title is 'Developer advocate.' is person is employed by Google, Inc.” ",NA,NA
"Two sentences, two microdata properties. A lile more markup, but a worthwhile tradeoff.",NA,NA
e same tenique is useful for marking up street addresses. e Person vocabulary defines ,NA,NA
an ,NA,NA
address,NA,NA
" property, whi itself is a microdata item. at means the address has its own ",NA,NA
vocabulary (,NA,NA
http://data-vocabulary.org/Address,NA,NA
) and defines its own properties. e ,NA,NA
Address vocabulary defines 5 properties: ,NA,NA
street-address,NA,NA
", ",NA,NA
locality,NA,NA
", ",NA,NA
region,NA,NA
", ",NA,NA
postal-,NA,NA
code,NA,NA
", and ",NA,NA
country-name,NA,NA
.,NA,NA
"If you’re a programmer, you are probably familiar with dot notation to define objects ",NA,NA
and their properties. ink of the relationship like this:,NA,NA
Person,NA,NA
Person.address,NA,NA
Person.address.country-name,NA,NA
"In this example, the entire street address is contained in a single ",NA,NA
<dd>,NA,NA
 element. (Once ,NA,NA
"again, the ",NA,NA
<dt>,NA,NA
" element is just a label, so it plays no role in adding semantics with ",NA,NA
microdata.) Notating the ,NA,NA
address,NA,NA
 property is easy. Just add an ,NA,NA
itemprop,NA,NA
 aribute on the ,NA,NA
<dd> ,NA,NA
element.,NA,NA
<dt>Mailing address</dt>,NA,NA
"<dd itemprop=""address"">","diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
Person.address.street-address ,NA,NA
Person.address.locality ,NA,NA
Person.address.region ,NA,NA
Person.address.postal-code,NA,NA
"But remember, the address property is itself a microdata item. at means we need to add ",NA,NA
the ,NA,NA
itemscope,NA,NA
 and ,NA,NA
itemtype,NA,NA
 aributes too.,NA,NA
<dt>Mailing address</dt>,NA,NA
"<dd itemprop=""address"" ",NA,NA
itemscope,NA,NA
"itemtype=""http://data-vocabulary.org/Address"">","[Follow along! Before: 
 person.html
 , aer: 
 person-plus-microdata.html
 ]",NA
"We’ve seen all of this before, but only for top-level items. A ",NA,NA
<section>,NA,NA
 element defines ,NA,NA
itemtype,NA,NA
 and ,NA,NA
itemscope,NA,NA
", and all the elements within the ",NA,NA
<section>,NA,NA
 element that define ,NA,NA
microdata properties are “scoped” within that specific vocabulary. But this is the first time ,NA,NA
we’ve seen ,NA,NA
nested,NA,NA
 scopes — defining a new ,NA,NA
itemtype,NA,NA
 and ,NA,NA
itemscope,NA,NA
 (on the ,NA,NA
<dd> ,NA,NA
element) within an existing one (on the ,NA,NA
<section>,NA,NA
 element). is nested scope works ,NA,NA
exactly like the HTML DOM. e ,NA,NA
<dd>,NA,NA
" element has a certain number of ild elements, all of ",NA,NA
whi are scoped to the vocabulary defined on the ,NA,NA
<dd>,NA,NA
 element. Once the ,NA,NA
<dd>,NA,NA
 element is ,NA,NA
closed with a corresponding ,NA,NA
</dd>,NA,NA
" tag, the scope reverts to the vocabulary defined by the ",NA,NA
parent element (,NA,NA
<section>,NA,NA
", in this case).",NA,NA
e properties of the Address suffer the same problem we encountered with ,NA,NA
the ,NA,NA
title,NA,NA
 and ,NA,NA
affiliation,NA,NA
 properties,NA,NA
". ere’s just one long run of text, but we want to break it up into ",NA,NA
five separate microdata properties. e solution is the same: wrap ea distinct piece of ,NA,NA
information in a dummy ,NA,NA
<span>,NA,NA
" element, then declare microdata properties on ea ",NA,NA
<span> ,NA,NA
element.,NA,NA
"<dd itemprop=""address"" itemscope",NA,NA
"itemtype=""http://data-vocabulary.org/Address"">",NA,NA
"<span itemprop=""region"">PA</span> ",NA,NA
"<span itemprop=""postal-code"">19999</span> ",NA,NA
"<span itemprop=""country-name"">USA</span>",NA,NA
In English: “is person has a mailing address. e street address part of the mailing address ,NA,NA
is '100 Main Street.' e locality part is 'Anytown.' e region is 'PA.' e postal code is ,NA,NA
'19999.'e country name is 'USA.'” Easy peasy.,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
Q: Is this mailing address format US-,NA,NA
specific? A: No. e properties of the Address,NA,NA
vocabulary are generic enough that they can ,NA,NA
describe most mailing addresses in the ,NA,NA
world. ,NA,NA
Not all addresses will have values for every ,NA,NA
"property, but that’s OK. Some addresses ",NA,NA
might ,NA,NA
require fiing more than one “line” into a ,NA,NA
"single property, but that’s OK too. For ",NA,NA
"example, if your mailing address has a street ",NA,NA
"address and a suite number, they would both ",NA,NA
go into the ,NA,NA
street-address,NA,NA
 subproperty:,NA,NA
"<p itemprop=""address"" itemscope",NA,NA
"itemtype=""http://data-",NA,NA
"vocabulary.org/Address"">",NA,NA
"<span itemprop=""street-address"">",NA,NA
100 Main Street ,NA,NA
Suite 415,NA,NA
</span> ,NA,NA
...,NA,NA
</p>,NA,NA
ere’s one more thing on this sample “about” page: a list of URLs. e Person vocabulary has ,NA,NA
"a property for this, called ",NA,NA
url,NA,NA
. A ,NA,NA
url,NA,NA
" property can be anything, really. (Well, it has to be ","diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"a URL, but you probably guessed that.) What I mean is that the ",NA,NA
url,NA,NA
 property is loosely ,NA,NA
defined. e property can be any sort of URL that you want to associate with a Person: a ,NA,NA
"weblog, a photo gallery, or a profile on another site like Facebook or Twier.",NA,NA
e other important thing to note here is that a single Person can have multiple ,NA,NA
url ,NA,NA
"properties. Tenically, any property can appear more than once, but until now, we haven’t ",NA,NA
"taken advantage of that. For example, you could have two ",NA,NA
photo,NA,NA
" properties, ea pointing ",NA,NA
"to a different image URL. Here, I want to list four different URLs: my weblog, my Google ",NA,NA
"profile page, my user profile on Reddit, and my Twier account. In HTML, that’s a list of ",NA,NA
links: four ,NA,NA
<a>,NA,NA
" elements, ea in their own ",NA,NA
<li>,NA,NA
" element. In microdata, ea ",NA,NA
<a>,NA,NA
 element ,NA,NA
gets an ,NA,NA
"itemprop=""url""",NA,NA
 aribute.,NA,NA
<h1>My Digital Footprints</h1>,NA,NA
<ul>,NA,NA
"<li><a href=""http://diveintomark.org/""",NA,NA
"itemprop=""url"">weblog</a></li>",NA,NA
"<li><a href=""http://www.google.com/profiles/pilgrim""",NA,NA
"itemprop=""url"">Google profile</a></li>",NA,NA
"<li><a href=""http://www.reddit.com/user/MarkPilgrim""",NA,NA
"itemprop=""url"">Reddit.com profile</a></li>",NA,NA
"<li><a href=""http://www.twitter.com/diveintomark""",NA,NA
"itemprop=""url"">Twitter</a></li>",NA,NA
</ul>,NA,NA
According to the ,NA,NA
HTML5 microdata data model,NA,NA
", ",NA,NA
<a>,NA,NA
 elements have special processing. e ,NA,NA
microdata property value is the ,NA,NA
href,NA,NA
" aribute, not the ild text content. e text of ",NA,NA
"ealink is actually ignored by a microdata processor. us, in English, this says “is person ",NA,NA
has a URL at ,NA,NA
http://diveintomark.org/,NA,NA
. is person has another URL at ,NA,NA
http://www.google.com/profiles/pilgrim,NA,NA
. is person has another URL at ,NA,NA
http://www.reddit.com/user/MarkPilgrim,NA,NA
. is person has another URL at ,NA,NA
http://www.twitter.com/diveintomark,NA,NA
.”,NA,NA
INTRODUCING GOOGLE RICH SNIPPETS,NA,NA
"I want to step ba for just a moment and ask, “Why are we doing this?” Are we adding","diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
semantics just for the sake of adding semantics? Don’t get me wrong; I enjoy fiddling ,NA,NA
with angle braets as mu as the next webhead. But why microdata? Why bother?,NA,NA
"ere are two major classes of applications that consume HTML, and by extension, HTML5 ",NA,NA
microdata:,NA,NA
1. Web browsers ,NA,NA
2. Sear engines,NA,NA
"For browsers, HTML5 defines ",NA,NA
a set of DOM APIs,NA,NA
" for extracting microdata items, properties, ",NA,NA
"and property values from a web page. As I write this, no browser supports this API. Not a ",NA,NA
"single one. So that’s… kind of a dead end, at least until browsers cat up and implement ",NA,NA
the client-side APIs.,NA,NA
e other major consumer of HTML is sear engines. What could a sear engine do with ,NA,NA
microdata properties about a person? Imagine this: instead of simply displaying the page ,NA,NA
"title and an excerpt of text, the sear engine could integrate some of that structured ",NA,NA
"information and display it. Full name, job title, employer, address, maybe even a lile ",NA,NA
thumbnail of a profile photo. Would that cat your aention? It would cat mine.,NA,NA
Google supports microdata as part of their ,NA,NA
Ri Snippets,NA,NA
 program. When Google’s web ,NA,NA
crawler parses your page and finds microdata properties that conform to the ,NA,NA
http://data-vocabulary.org/Person,NA,NA
" vocabulary, it parses out those properties and ",NA,NA
stores them alongside the rest of the page data. Google even provides ,NA,NA
a handy tool to see ,NA,NA
how Google“sees” your microdata properties,NA,NA
. Testing it against our ,NA,NA
sample microdata-,NA,NA
enabled “about”page,NA,NA
 yields this output:,NA,NA
Item,NA,NA
Type,NA,NA
: http://data-vocabulary.org/person,NA,NA
photo = http://diveintohtml5.org/examples/2000_05_mark.jpg ,NA,NA
name = Mark Pilgrim ,NA,NA
title = Developer advocate ,NA,NA
"affiliation = Google, Inc. ",NA,NA
address = Item( 1 ) ,NA,NA
url = http://diveintomark.org/ ,NA,NA
url = http://www.google.com/profiles/pilgrim ,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
url = http://www.reddit.com/user/MarkPilgrim ,NA,NA
url = http://www.twitter.com/diveintomark ,NA,NA
Item 1 ,NA,NA
Type,NA,NA
: http://data-vocabulary.org/address ,NA,NA
street-address = 100 Main Street ,NA,NA
locality = Anytown ,NA,NA
region = PA ,NA,NA
postal-code = 19999 ,NA,NA
country-name = USA,NA,NA
It’s all there: the ,NA,NA
photo,NA,NA
 property from the ,NA,NA
<img src>,NA,NA
" aribute, all four URLs from the list ",NA,NA
of ,NA,NA
<a href>,NA,NA
" aributes, even the address object (listed as “Item 1”) and all five of its ",NA,NA
subproperties.,NA,NA
And how does Google use all of this information? at depends. ere’s no hard and fast rules ,NA,NA
"about how microdata properties should be displayed, whi ones should be displayed, or ",NA,NA
"whether they should be displayed at all. If someone seares for “Mark Pilgrim,” ",NA,NA
and,NA,NA
 Google ,NA,NA
"determines that this “about” page should rank in the results, ",NA,NA
and,NA,NA
 Google decides that the ,NA,NA
"microdata properties it originally found on that page are worth displaying, then the ",NA,NA
searresult listing might look something like this:,"About Mark Pilgrim 
  
 Anytown PA - Developer advocate - Google, Inc.
  
 Excerpt from the page will show up here.
  
 Excerpt from the page will show up here.
  
 diveintohtml5.org/examples/person-plus-microdata.html
  - 
 Cached
  - 
 Similar pages",NA
"e first line, “About Mark Pilgrim,” is actually the title of the page, given in the ",NA,NA
<title> ,NA,NA
element. at’s not terribly exciting; Google does that for every page. But the second line ,NA,NA
is full of information taken directly from the microdata annotations we added to the ,NA,NA
page.,NA,NA
“Anytown PA” was part of the ,NA,NA
mailing address,NA,NA
", marked up with the ",NA,NA
http://data-,NA,NA
vocabulary.org/Address,NA,NA
" vocabulary. “Developer advocate” and “Google, Inc.” were ",NA,NA
two properties from the ,NA,NA
http://data-vocabulary.org/Person,NA,NA
 vocabulary (,NA,NA
title,NA,NA
 and ,NA,NA
affiliation,NA,NA
", respectively).",NA,NA
is is really quite amazing. You don’t need to be a large corporation making special deals ,NA,NA
with sear engine vendors to customize your sear result listings. Just take ten minutes and ,NA,NA
add a couple of HTML aributes to annotate the data you were already publishing anyway. ,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
add a couple of HTML aributes to annotate the data you were already publishing anyway.,NA,NA
ASK PROFESSOR MARKUP,NA,NA
☞,NA,NA
"Q: I did everything you said, but my Google ",NA,NA
sear result listing doesn’t look any different.,NA,NA
What gives?,NA,NA
A: “,NA,NA
Google does not guarantee,NA,NA
 that markup ,NA,NA
on ,NA,NA
any given page or site will be used in sear,NA,NA
results.” But even if Google decides not to use ,NA,NA
"your microdata annotations, another sear",NA,NA
"engine might. Like the rest of HTML5, ",NA,NA
microdata is an open standard that anyone ,NA,NA
can implement. It’s your job to provide as ,NA,NA
mudata as possible. Let the rest of the ,NA,NA
world ,NA,NA
decide what to do with it. ey might surprise ,NA,NA
you!,NA,NA
❧,NA,NA
MARKING UP ORGANIZATIONS,NA,NA
"Microdata isn’t limited to a single vocabulary. “About” pages are nice, but you probably ",NA,NA
only have one of them. Still hungry for more? Let’s learn how to mark up organizations ,NA,NA
and businesses.,NA,NA
Here is a sample page of business listings,NA,NA
". Let’s look at the original HTML markup, without ",NA,NA
microdata.,NA,NA
<article>,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"<h1>Google, Inc.</h1> ",NA,NA
<p> ,NA,NA
1600 Amphitheatre Parkway<br> ,NA,NA
"Mountain View, CA 94043<br> ",NA,NA
USA ,NA,NA
</p> ,NA,NA
<p>650-253-0000</p> ,NA,NA
"<p><a href=""http://www.google.com/"">Google.com</a></p> ",NA,NA
</article>,"[Follow along! Before: 
 organization.html
 , aer: 
 organization-plus-microdata.html
 ]",NA
Short and sweet. All the information about the organization is contained within ,NA,NA
the ,NA,NA
<article>,NA,NA
" element, so let’s start there.",NA,NA
"<article itemscope itemtype=""http://data-vocabulary.org/Organization""",NA,NA
>,NA,NA
As with ,NA,NA
marking up people,NA,NA
", you need to set the ",NA,NA
itemscope,NA,NA
 and ,NA,NA
itemtype,NA,NA
 aributes on the ,NA,NA
"outermost element. In this case, the outermost element is an ",NA,NA
<article>,NA,NA
 element. e ,NA,NA
itemtype,NA,NA
" aribute declares the microdata vocabulary you’re using (in this case, ",NA,NA
http://data-vocabulary.org/Organization,NA,NA
"), and the ",NA,NA
itemscope,NA,NA
 aribute declares ,NA,NA
that all of the properties you set on ild elements relate to this vocabulary.,NA,NA
"So what’s in the Organization vocabulary? It’s simple and straightforward. In fact, some of ",NA,NA
it should already look familiar.,NA,NA
ORGANIZATION VOCABULARY,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
e first bit of markup within the outermost ,NA,NA
<article>,NA,NA
 element is an ,NA,NA
<h1>,NA,NA
. is ,NA,NA
<h1> ,NA,NA
"element contains the name of a business, so we’ll put an ",NA,NA
"itemprop=""name""",NA,NA
 aribute ,NA,NA
directly on the ,NA,NA
<h1>,NA,NA
 element.,NA,NA
"<h1 itemprop=""name"">Google, Inc.</h1>","[Follow along! Before: 
 organization.html
 , aer: 
 organization-plus-microdata.html
 ]",NA
According to the ,NA,NA
HTML5 microdata data model,NA,NA
", ",NA,NA
<h1>,NA,NA
 elements don’t need any special ,NA,NA
processing. e microdata property value is simply the text content of the ,NA,NA
<h1>,NA,NA
 element. In ,NA,NA
"English, we just said “the name of the Organization is 'Google, Inc.'”",NA,NA
Next up is a street address. Marking up the address of an Organization works exactly the ,NA,NA
same way as ,NA,NA
marking up the address of a Person,NA,NA
". First, add an ",NA,NA
"itemprop=""address"" ",NA,NA
"aribute to the outermost element of the street address (in this case, a ",NA,NA
<p>,NA,NA
 element). at ,NA,NA
states that this is the ,NA,NA
address,NA,NA
 property of the Organization. But what about the properties ,NA,NA
of the address itself? We also need to define the ,NA,NA
itemtype,NA,NA
 and ,NA,NA
itemscope,NA,NA
 aributes to say ,NA,NA
that this is an Address item that has its own properties.,NA,NA
<p ,NA,NA
"itemprop=""address""",NA,NA
 ,NA,NA
itemscope,NA,NA
"itemtype=""http://data-vocabulary.org/Address"">","[Follow along! Before: 
 organization.html
 , aer: 
 organization-plus-microdata.html
 ]",NA
"Finally, we need to wrap ea distinct piece of information in a dummy ",NA,NA
<span>,NA,NA
 element so ,NA,NA
we can add the appropriate microdata property name (,NA,NA
street-address,NA,NA
", ",NA,NA
locality,NA,NA
", ",NA,NA
region,NA,NA
", ",NA,NA
postal-code,NA,NA
", and ",NA,NA
country-name,NA,NA
) on ea ,NA,NA
<span>,NA,NA
 element.,NA,NA
"<p itemprop=""address"" itemscope",NA,NA
"itemtype=""http://data-vocabulary.org/Address"">",NA,NA
"<span itemprop=""region"">CA</span> ",NA,NA
"<span itemprop=""postal-code"">94043</span><br> ",NA,NA
"<span itemprop=""country-name"">USA</span>",NA,NA
"In English, we just said “is organization has an address. e street address part is ",NA,NA
'1600 Amphitheatre Parkway'. e locality is 'Mountain View'. e region part is 'CA'. e ,NA,NA
postal code is '94043'. e name of the country is 'USA'.”,NA,NA
Next up: a telephone number for the Organization. Telephone numbers are notoriously ,NA,NA
"triy, and the exact syntax is country-specific. (And if you want to call another country, it’s ",NA,NA
"even worse.) In this example, we have a United States telephone number, in a format ",NA,NA
suitable for calling from elsewhere in the United States.,NA,NA
"<p itemprop=""tel"">650-253-0000</p>","[Follow along! Before: 
 organization.html
 , aer: 
 organization-plus-microdata.html
 ]",NA
"(Hey, in case you didn’t notice, the Address vocabulary went out of scope when its ",NA,NA
<p> ,NA,NA
element was closed. Now we’re ba to defining properties in the Organization ,NA,NA
vocabulary.),NA,NA
If you want to list more than one telephone number — maybe one for United States ,NA,NA
customers and one for international customers — you can do that. Any microdata property ,NA,NA
"can be repeated. Just make sure ea telephone number is in its own HTML element, ",NA,NA
separate from any label you may give it.,NA,NA
<p>,NA,NA
"UK customers: <span itemprop=""tel"">00 + 1* + 6502530000</span>",NA,NA
"US customers: <span itemprop=""tel"">650-253-0000</span><br>",NA,NA
</p>,NA,NA
According to the ,NA,NA
HTML5 microdata data model,NA,NA
", neither the ",NA,NA
<p>,NA,NA
 element nor the ,NA,NA
<span> ,NA,NA
element have special processing. e value of the microdata ,NA,NA
tel,NA,NA
 property is simply the text ,NA,NA
content. e Organization microdata vocabulary makes no aempt to subdivide the different ,NA,NA
parts of a telephone number. e entire ,NA,NA
tel,NA,NA
 property is just free-form text. If you want to put ,NA,NA
"the area code in parentheses, or use spaces instead of dashes to separate the numbers, you ",NA,NA
"can do that. If a microdata-consuming client wants to parse the telephone number, that’s ",NA,NA
entirely up to them.,NA,NA
"Next, we have another familiar property: ",NA,NA
url,NA,NA
. Just like ,NA,NA
associating a URL with a Person,NA,NA
", you ",NA,NA
"can associate a URL with an Organization. is could be the company’s home page, a contact ",NA,NA
"page, product page, or anything else. If it’s a URL about, from, or belonging to the ",NA,NA
"Organization, mark it up with an ",NA,NA
"itemprop=""url""",NA,NA
 aribute.,NA,NA
"<p><a itemprop=""url"" href=""http://www.google.com/"">Google.com</a></p>","[Follow along! Before: 
 organization.html
 , aer: 
 organization-plus-microdata.html
 ]",NA
According to the ,NA,NA
HTML5 microdata data model,NA,NA
", the ",NA,NA
<a>,NA,NA
 element has special processing. e ,NA,NA
microdata property value is the value of the ,NA,NA
href,NA,NA
" aribute, not the link text. In English, ",NA,NA
this says “this organization is associated with the URL ,NA,NA
http://www.google.com/,NA,NA
.” It ,NA,NA
"doesn’t say anything more specific about the association, and it doesn’t include the link ",NA,NA
text“Google.com.”,NA,NA
"Finally, I want to talk about geolocation. No, not ",NA,NA
the W3C Geolocation API,NA,NA
. is is about ,NA,NA
"how to mark up the physical location for an Organization, using microdata.",NA,NA
"To date, all of our examples have focused on marking up ",NA,NA
visible,NA,NA
" data. at is, you have an ",NA,NA
<h1>,NA,NA
" with a company name, so you add an ",NA,NA
itemprop,NA,NA
 aribute to the ,NA,NA
<h1>,NA,NA
 element to ,NA,NA
"declare that the (visible) header text is, in fact, the name of an Organization. Or you have ",NA,NA
an ,NA,NA
<img>,NA,NA
" element that points to a photo, so you add an ",NA,NA
itemprop,NA,NA
 aribute to the ,NA,NA
<img> ,NA,NA
element to declare that the (visible) image is a photo of a Person.,NA,NA
"In this example, geolocation information isn’t like that. ere is no visible text that gives the ",NA,NA
"exact latitude and longitude (to four decimal places!) of the Organization. In fact, the ",NA,NA
organization.html,NA,NA
 example (without microdata) has no geolocation information at all. It ,NA,NA
"has a link to Google Maps, but even the URL of that link does not contain latitude and ",NA,NA
longitude coordinates. (It contains similar information in a Google-specific format.) But ,NA,NA
even if we had a link to a hypothetical online mapping service that did take latitude and ,NA,NA
longitude ,NA,NA
"coordinates as URL parameters, microdata has no way of separating out the different parts ",NA,NA
of a URL. You can’t declare that the first URL query parameter is the latitude and the ,NA,NA
second URL query parameter is the longitude and the rest of the query parameters are ,NA,NA
irrelevant.,NA,NA
"To handle edge cases like this, HTML5 provides a way to annotate ",NA,NA
invisible,NA,NA
 data. is ,NA,NA
tenique should only be used as a last resort. If there is a way to display or render the ,NA,NA
"data you care about, you should do so. Invisible data that only maines can read tends to ",NA,NA
“go,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"stale” quily. at is, someone will come along later and update the visible text but forget to ",NA,NA
"update the invisible data. is happens more oen than you think, and it ",NA,NA
will,NA,NA
 happen to you ,NA,NA
too.,NA,NA
"Still, there are cases where invisible data is unavoidable. Perhaps your boss ",NA,NA
really,NA,NA
 wants ,NA,NA
maine-readable geolocation information but doesn’t want to cluer up the interface with ,NA,NA
pairs of incomprehensible six-digit numbers. Invisible data is the only option. e only saving ,NA,NA
grace here is that you can put the invisible data immediately aer the visible text that it ,NA,NA
"describes, whi may help remind the person who comes along later and updates the visible ",NA,NA
text that they need to update the invisible data right aer it.,NA,NA
"In this example, we can create a dummy ",NA,NA
<span>,NA,NA
 element within the same ,NA,NA
<article> ,NA,NA
"element as all the other Organization properties, then put the invisible geolocation data ",NA,NA
inside the ,NA,NA
<span>,NA,NA
 element.,NA,NA
<span ,NA,NA
"itemprop=""geo""",NA,NA
 ,NA,NA
itemscope,NA,NA
"itemtype=""http://data-vocabulary.org/Geo"">",NA,NA
"<meta itemprop=""latitude"" content=""37.4149"" />",NA,NA
"<meta itemprop=""longitude"" content=""-122.078"" />",NA,NA
</span>,NA,NA
</article>,"[Follow along! Before: 
 organization.html
 , aer: 
 organization-plus-microdata.html
 ]",NA
"Geolocation information is defined in its own vocabulary, like ",NA,NA
the address of a Person ,NA,NA
or Organization,NA,NA
". erefore, this ",NA,NA
<span>,NA,NA
 element needs three aributes:,NA,NA
1. ,NA,NA
"itemprop=""geo""",NA,NA
 says that this element represents the ,NA,NA
geo,NA,NA
 property of the ,NA,NA
surrounding ,NA,NA
Organization ,NA,NA
2. ,NA,NA
"itemtype=""http://data-vocabulary.org/Geo""",NA,NA
 says whi microdata vocabulary ,NA,NA
this element’s properties conform to ,NA,NA
3. ,NA,NA
itemscope,NA,NA
 says that this element is the enclosing element for a microdata item with ,NA,NA
its own vocabulary (given in the ,NA,NA
itemtype,NA,NA
 aribute). All the properties within this ,NA,NA
element are properties of ,NA,NA
http://data-vocabulary.org/Geo,NA,NA
", not the surrounding ",NA,NA
http://data-vocabulary.org/Organization,NA,NA
.,NA,NA
"e next big question that this example answers is, “How do you annotate invisible data?”","diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
You use the ,NA,NA
<meta>,NA,NA
" element. In previous versions of HTML, you could only use the ",NA,NA
<meta> ,NA,NA
element within ,NA,NA
the ,NA,NA
<head>,NA,NA
 of your page,NA,NA
". In HTML5, you can use the ",NA,NA
<meta>,NA,NA
 element ,NA,NA
anywhere. And that’s exactly what we’re doing here.,NA,NA
"<meta itemprop=""latitude"" content=""37.4149"" />","[Follow along! Before: 
 organization.html
 , aer: 
 organization-plus-microdata.html
 ]",NA
According to the ,NA,NA
HTML5 microdata data model,NA,NA
", the ",NA,NA
<meta>,NA,NA
 element has special ,NA,NA
processing.e microdata property value is the ,NA,NA
content,NA,NA
 aribute. Since this aribute is ,NA,NA
"never visibly displayed, we have the perfect setup for unlimited quantities of invisible ",NA,NA
"data. With great power comes great responsibility. In this case, the responsibility is on ",NA,NA
you to ensure that this invisible data stays in sync with the visible text around it.,NA,NA
"ere is no direct support for the Organization vocabulary in Google Ri Snippets, so I don’t ",NA,NA
have any prey sample sear result listings to show you. But organizations feature heavily ,NA,NA
"in the next two case studies: events and reviews, and those ",NA,NA
are,NA,NA
 supported by Google ,NA,NA
RiSnippets.,NA,NA
❧,NA,NA
MARKING UP EVENTS,NA,NA
Shit happens. Some shit happens at pre-determined times. Wouldn’t it be nice if you could ,NA,NA
tell sear engines exactly when shit was about to happen? ere’s an angle braet for that.,NA,NA
Let’s start by looking at ,NA,NA
a sample sedule of my speaking engagements,NA,NA
.,NA,NA
<article>,NA,NA
<h1>Google Developer Day 2009</h1>,NA,NA
"<img width=""300"" height=""200""",NA,NA
"src=""http://diveintohtml5.org/examples/gdd-2009-prague-pilgrim.jpg""",NA,NA
"alt=""[Mark Pilgrim at podium]"">",NA,NA
<p>,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
Google Developer Days are a chance to learn about Google ,NA,NA
developer products from the engineers who built them. This ,NA,NA
one-day conference includes seminars and “office hours”on ,NA,NA
"web technologies like Google Maps, OpenSocial, Android, AJAX ",NA,NA
"APIs, Chrome, and Google Web Toolkit.",NA,NA
</p> ,NA,NA
<p> ,NA,NA
"<time datetime=""2009-11-06T08:30+01:00"">2009 November 6, 8:30</time> ",NA,NA
&ndash; ,NA,NA
"<time datetime=""2009-11-06T20:30+01:00"">20:30</time> ",NA,NA
</p> ,NA,NA
<p> ,NA,NA
Congress Center<br> ,NA,NA
5th května 65<br> ,NA,NA
140 21 Praha 4<br> ,NA,NA
Czech Republic ,NA,NA
</p> ,NA,NA
<p><a ,NA,NA
"href=""http://code.google.com/intl/cs/events/developerday/2009/home.htm ",NA,NA
"l"">GDD/Prague home page</a></p> ",NA,NA
</article>,"[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
All the information about the event is contained within the ,NA,NA
<article>,NA,NA
" element, so that’s ",NA,NA
where we need to put the ,NA,NA
itemtype,NA,NA
 and ,NA,NA
itemscope,NA,NA
 aributes.,NA,NA
"<article itemscope itemtype=""http://data-vocabulary.org/Event"">","[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
e URL for the Event vocabulary is ,NA,NA
http://data-vocabulary.org/Event,NA,NA
", whi also ",NA,NA
happens to contain a nice lile art describing the vocabulary’s properties. And what are ,NA,NA
those properties?,NA,NA
EVENT VOCABULARY,NA,NA
Property ,NA,NA
Description,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY 
 WORDS",NA
summary,NA,NA
e name of the event ,NA,NA
url ,NA,NA
Link to the event details page ,NA,NA
location,NA,NA
e location or venue of the event. Can optionally be represented by a ,NA,NA
nested ,NA,NA
Organization,NA,NA
 or ,NA,NA
Address,NA,NA
.,NA,NA
description,NA,NA
 A description of the event ,NA,NA
startDate,NA,NA
e starting date and time of the event in ,NA,NA
ISO date format ,NA,NA
endDate,NA,NA
e ending date and time of the event in ,NA,NA
ISO date format ,NA,NA
duration,NA,NA
e duration date of the event in ,NA,NA
ISO duration format ,NA,NA
eventType,NA,NA
"e category of the event (for example, “Concert” or “Lecture”). is is a ",NA,NA
"freeform string, not an enumerated aribute.",NA,NA
geo ,NA,NA
Specifies the geographical coordinates of the location. Always contains ,NA,NA
two ,NA,NA
"subproperties, ",NA,NA
latitude,NA,NA
 and ,NA,NA
longitude,NA,NA
.,NA,NA
photo ,NA,NA
A link to a photo or image related to the event,NA,NA
e event’s name is in an ,NA,NA
<h1>,NA,NA
 element. According to the ,NA,NA
HTML5 microdata data model,NA,NA
", ",NA,NA
<h1>,NA,NA
 ,NA,NA
elements have no special processing. e microdata property value is simply the text content ,NA,NA
of the ,NA,NA
<h1>,NA,NA
 element. All we need to do is add the ,NA,NA
itemprop,NA,NA
 aribute to declare that this ,NA,NA
<h1>,NA,NA
 element contains the name of the event.,NA,NA
"<h1 itemprop=""summary"">Google Developer Day 2009</h1>","[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
"In English, this says, “e name of this event is Google Developer Day 2009.”",NA,NA
"is event listing has a photo, whi can be marked up with the ",NA,NA
photo,NA,NA
 property. As you would ,NA,NA
"expect, the photo is already marked up with an ",NA,NA
<img>,NA,NA
 element. Like ,NA,NA
the ,NA,NA
photo ,NA,NA
property in ,NA,NA
the Person vocabulary,NA,NA
", an Event photo is a URL. Since the ",NA,NA
HTML5 microdata data model,NA,NA
 ,NA,NA
says that the property value of an ,NA,NA
<img>,NA,NA
 element is its ,NA,NA
src,NA,NA
" aribute, the only thing we need ",NA,NA
to do is add the ,NA,NA
itemprop,NA,NA
 aribute to the ,NA,NA
<img>,NA,NA
 element.,NA,NA
"<img itemprop=""photo"" width=""300"" height=""200""",NA,NA
"src=""http://diveintohtml5.org/examples/gdd-2009-prague-pilgrim.jpg""",NA,NA
"alt=""[Mark Pilgrim at podium]"">","[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]
  
 diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"In English, this says, “e photo for this event is at ",NA,NA
http://diveintohtml5.org/examples/gdd-2009-prague-pilgrim.jpg,NA,NA
.”,NA,NA
"Next up is a longer description of the event, whi is just a pargaraph of freeform text.",NA,NA
"<p itemprop=""description"">Google Developer Days are a chance to",NA,NA
learn about Google developer products from the engineers who built ,NA,NA
them. This one-day conference includes seminars and “office ,NA,NA
"hours” on web technologies like Google Maps, OpenSocial, ",NA,NA
"Android, AJAX APIs, Chrome, and Google Web Toolkit.</p>","[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
e next bit is something new. Events generally occur on specific dates and start and end at ,NA,NA
"specific times. In HTML5, dates and times should be marked up with ",NA,NA
the ,NA,NA
<time>,NA,NA
 element,NA,NA
", ",NA,NA
"and we are already doing that here. So the question becomes, how do we add microdata ",NA,NA
propeties to these ,NA,NA
<time>,NA,NA
 elements? Looking ba at the ,NA,NA
HTML5 microdata data model,NA,NA
", we ",NA,NA
see that the ,NA,NA
<time>,NA,NA
 element has special processing. e value of a microdata property on a ,NA,NA
<time>,NA,NA
 element is the value of the ,NA,NA
datetime,NA,NA
" aribute. And hey, the ",NA,NA
startDate,NA,NA
 and ,NA,NA
endDate,NA,NA
" properties of the Event vocabulary take an ISO-style date, just like the ",NA,NA
datetime ,NA,NA
property of a ,NA,NA
<time>,NA,NA
" element. Once again, the semantics of the core HTML vocabulary ",NA,NA
dovetail nicely with semantics of our custom microdata vocabulary. Marking up start and ,NA,NA
end dates with microdata is as simple as,NA,NA
1. Using HTML correctly in the first place (using ,NA,NA
<time>,NA,NA
 elements to mark up dates and ,NA,NA
"times), and ",NA,NA
2. Adding a single ,NA,NA
itemprop,NA,NA
 aribute,NA,NA
<p>,NA,NA
"<time itemprop=""startDate"" datetime=""2009-11-06T08:30+01:00"">2009",NA,NA
"November 6, 8:30</time> ",NA,NA
&ndash;,NA,NA
"<time itemprop=""endDate"" datetime=""2009-11-",NA,NA
"06T20:30+01:00"">20:30</time> ",NA,NA
</p>,"[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]
  
 diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"In English, this says, “is event starts on November 6, 2009, at 8:30 in the morning, and ",NA,NA
"goes until November 6, 2009, at 20:30 (times local to Prague, GMT+1).”",NA,NA
Next up is the ,NA,NA
location,NA,NA
 property. e ,NA,NA
definition of the Event vocabulary,NA,NA
  says that this can ,NA,NA
"be either an Organization or an Address. In this case, the event is being held at a venue that ",NA,NA
"specializes in conferences, the Congress Center in Prague. Marking it up as an Organization ",NA,NA
allows us to include the name of the venue as well as its address.,NA,NA
"First, let’s declare that the ",NA,NA
<p>,NA,NA
 element that contains the address is the ,NA,NA
location,NA,NA
 property ,NA,NA
"of the Event, and that this element is also its own microdata item that conforms to the ",NA,NA
http://data-vocabulary.org/Organization,NA,NA
 vocabulary.,NA,NA
<p ,NA,NA
"itemprop=""location""",NA,NA
 ,NA,NA
itemscope,NA,NA
"itemtype=""http://data-vocabulary.org/Organization"">","[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
"Next, mark up the name of the Organization by wrapping the name in a dummy ",NA,NA
<span> ,NA,NA
element and adding an ,NA,NA
itemprop,NA,NA
 aribute to the ,NA,NA
<span>,NA,NA
 element.,NA,NA
"<span itemprop=""name"">Congress Center</span><br>","[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
"Due to the microdata scoping rules, this ",NA,NA
"itemprop=""name""",NA,NA
 is defining a property in the ,NA,NA
"Organization vocabulary, not the Event vocabulary. e ",NA,NA
<p>,NA,NA
 element defined the beginning of ,NA,NA
"the scope of the Organization properties, and that ",NA,NA
<p>,NA,NA
 element hasn’t yet been closed with ,NA,NA
an ,NA,NA
</p>,NA,NA
 tag. Any microdata properties we define here are properties of the most-recently-,NA,NA
scoped vocabulary. Nested vocabularies are like a ,NA,NA
sta,NA,NA
". We haven’t yet popped the sta, so ",NA,NA
we’re still talking about properties of the Organization.,NA,NA
"In fact, we’re going to add a third vocabulary onto the sta: an Address for the ",NA,NA
Organization for the Event.,NA,NA
"<span itemprop=""address"" itemscope","“DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
"itemtype=""http://data-vocabulary.org/Address"">","[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
"Once again, we want to mark up every piece of the address as a separate microdata ",NA,NA
"property, so we need a slew of dummy ",NA,NA
<span>,NA,NA
 elements to hang our ,NA,NA
itemprop,NA,NA
 aributes ,NA,NA
"onto. (If I’m going too fast for you here, go ba and read about ",NA,NA
marking up the address of a ,NA,NA
Person ,NA,NA
and ,NA,NA
marking up the address of an Organization,NA,NA
.),NA,NA
"<span itemprop=""locality"">Praha 4</span><br> ",NA,NA
"<span itemprop=""country-name"">Czech Republic</span>",NA,NA
"<meta itemprop=""longitude"" content=""14.4491"" />",NA,NA
</span>,"[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
And we’ve closed the ,NA,NA
<span>,NA,NA
" that contained the Geo properties, so we’re ba to defining ",NA,NA
properties on the Event. e last property is the ,NA,NA
url,NA,NA
" property, whi should look familiar. ",NA,NA
Associating a URL with an Event works the same way as ,NA,NA
associating a URL with a Person ,NA,NA
and ,NA,NA
associating a URL with an Organization,NA,NA
. If you’re using HTML correctly (marking up ,NA,NA
hyperlinks with ,NA,NA
<a href>,NA,NA
"), then declaring that the hyperlink is a microdata ",NA,NA
url,NA,NA
 property ,NA,NA
is simply a maer of adding the ,NA,NA
itemprop,NA,NA
 aribute.,NA,NA
<p>,NA,NA
"<a itemprop=""url""",NA,NA
"href=""http://code.google.com/intl/cs/events/developerday/2009/home.htm ",NA,NA
"l""> ",NA,NA
GDD/Prague home page ,NA,NA
</a> ,NA,NA
</p> ,NA,NA
</article>,"[Follow along! Before: 
 event.html
 , aer: 
 event-plus-microdata.html
 ]",NA
e ,NA,NA
sample event page,NA,NA
" also lists a second event, my speaking engagement at the ConFoo ",NA,NA
"conference in Montréal. For brevity, I’m not going to go through that markup line by line. ",NA,NA
It’s essentially the same as the event in Prague: an Event item with nested Geo and Address ,NA,NA
"items. I just mention it in passing to reiterate that a single page can have multiple events, ",NA,NA
ea marked up with microdata.,NA,NA
THE RETURN OF GOOGLE RICH SNIPPETS,NA,NA
According to Google’s Ri Snippets Testing Tool,NA,NA
", this is the information that Google’s ",NA,NA
crawlers will glean from ,NA,NA
our sample event listing page,NA,NA
:,NA,NA
Item ,NA,NA
Type:,NA,NA
 http://data-vocabulary.org/Event ,NA,NA
summary = Google Developer Day 2009 ,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
eventType = conference ,NA,NA
photo = http://diveintohtml5.org/examples/gdd-2009-prague-pilgrim.jpg ,NA,NA
description = Google Developer Days are a chance to learn about Google ,NA,NA
developer products from the engineers who built them. This one-day ,NA,NA
conference includes seminars and office hours on web technologies like ,NA,NA
Goo... ,NA,NA
startDate = 2009-11-06T08:30+01:00 ,NA,NA
endDate = 2009-11-06T20:30+01:00 ,NA,NA
location = Item(__1) ,NA,NA
geo = Item(__3) ,NA,NA
url = ,NA,NA
http://code.google.com/intl/cs/events/developerday/2009/home.html ,NA,NA
Item ,NA,NA
Id: __1 ,NA,NA
Type:,NA,NA
 http://data-vocabulary.org/Organization ,NA,NA
name = Congress Center ,NA,NA
address = Item(__2) ,NA,NA
Item ,NA,NA
Id: __2 ,NA,NA
Type:,NA,NA
 http://data-vocabulary.org/Address ,NA,NA
street-address = 5th května 65 ,NA,NA
postal-code = 140 21 ,NA,NA
locality = Praha 4 ,NA,NA
country-name = Czech Republic ,NA,NA
Item ,NA,NA
Id: __3 ,NA,NA
Type:,NA,NA
 http://data-vocabulary.org/Geo ,NA,NA
latitude = 50.047893 ,NA,NA
longitude = 14.4491,NA,NA
"As you can see, all the information we added in microdata is there. Properties that are ",NA,NA
separate microdata items are given internal IDs (,NA,NA
Item(__1),NA,NA
", ",NA,NA
Item(__2),NA,NA
 and so on). is is ,NA,NA
not part of the microdata specification. It’s just a convention that Google’s testing tool uses ,NA,NA
to,NA,NA
linearize the sample output and show you the grouping of nested items and their properties.,NA,NA
"Here is how Google might oose to represent this sample page in its sear results. (Again, I ",NA,NA
have to preface this with the disclaimer that this is just an example. Google may ange the ,NA,NA
"format of their sear results at any time, and there is no guarantee that Google will even pay ",NA,NA
"aention to your microdata markup. Sorry to sound like a broken record, but our lawyers ",NA,NA
make me say these things.),"Mark Pilgrim’s event calendar 
  
 Excerpt from the page will show up here. 
  
 Excerpt from the page will show up here.
  
 Google Developer Day 2009
  
 Fri, Nov 6
  
 Congress Center, Praha 4, Czech Republic
  
 ConFoo.ca 2010
  
 Wed, Mar 10
  
 Hilton Montreal Bonaventure, Montréal, Québec, Canada
  
 diveintohtml5.org/examples/event-plus-microdata.html
  - 
 Cached
  - 
 Similar pages",NA
"Aer the page title and auto-generated excerpt text, Google starts using the microdata ",NA,NA
"markup we added to the page to display a lile table of events. Note the date format: “Fri, ",NA,NA
Nov 6.”at is not a string that appeared anywhere in our HTML or microdata markup. We ,NA,NA
"used two fully qualified ISO-formaed strings, ",NA,NA
2009-11-06T08:30+01:00,NA,NA
 and ,NA,NA
2009-11-,NA,NA
06T20:30+01:00,NA,NA
". Google took those two dates, figured out that they were on the same ",NA,NA
"day, and decided to display a single date in a more friendly format.",NA,NA
Now look at the physical addresses. Google ose to display just the venue name + locality + ,NA,NA
"country, not the exact street address. is is made possible by the fact that we split up the ",NA,NA
address into five subproperties — ,NA,NA
name,NA,NA
", ",NA,NA
street-address,NA,NA
", ",NA,NA
region,NA,NA
", ",NA,NA
locality,NA,NA
", and ",NA,NA
country-name,NA,NA
 — and marked up ea part of the address as a different microdata ,NA,NA
property. Google takes advantage of that to show an abbreviated address. Other ,NA,NA
consumers of the same microdata markup might make different oices about what to ,NA,NA
display or how to display it.ere’s no right or wrong oice here. It’s up to you to provide as ,NA,NA
"mu data as possible, as accurately as possible. It’s up to the rest of the world to interpret ",NA,NA
it.,NA,NA
❧,NA,NA
MARKING UP REVIEWS,NA,NA
Here’s another example of making the web (and possibly sear result listings) beer ,NA,NA
through,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
markup: business and product reviews.,NA,NA
is is a short review I wrote of my favorite pizza place near my house. (is is a real ,NA,NA
"restaurant, by the way. If you’re ever in Apex, NC, I highly recommend it.) Let’s look at ",NA,NA
the ,NA,NA
original markup,NA,NA
:,NA,NA
<article> ,NA,NA
<h1>Anna’s Pizzeria</h1> ,NA,NA
<p>,NA,NA
★★★★☆,NA,NA
 (4 stars out of 5)</p> ,NA,NA
<p>New York-style pizza right in historic downtown Apex</p> <p> ,NA,NA
Food is top-notch. Atmosphere is just right for a “neighborhood ,NA,NA
pizza joint.” The restaurant itself is a bit cramped; if you’re ,NA,NA
"overweight, you may have difficulty getting in and out of your ",NA,NA
seat and navigating between other tables. Used to give free garlic ,NA,NA
knots when you sat down; now they give you plain bread and you ,NA,NA
"have to pay for the good stuff. Overall, it’s a winner.",NA,NA
</p> ,NA,NA
<p> ,NA,NA
100 North Salem Street<br> ,NA,NA
"Apex, NC 27502<br> ",NA,NA
USA ,NA,NA
</p> ,NA,NA
"<p>— reviewed by Mark Pilgrim, last updated March 31, 2010</p> ",NA,NA
</article>,"[Follow along! Before: 
 review.html
 , aer: 
 review-plus-microdata.html
 ]",NA
is review is contained in an ,NA,NA
<article>,NA,NA
" element, so that’s where we’ll put the ",NA,NA
itemtype ,NA,NA
and ,NA,NA
itemscope,NA,NA
 aributes. e namespace URL for this vocabulary is ,NA,NA
http://data-,NA,NA
vocabulary.org/Review,NA,NA
.,NA,NA
"<article itemscope itemtype=""http://data-vocabulary.org/Review"">","[Follow along! Before: 
 review.html
 , aer: 
 review-plus-microdata.html
 ]",NA
What are the available properties in the Review vocabulary? I’m glad you asked.,"diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
REVIEW VOCABULARY,NA,NA
Property Description,NA,NA
itemreviewed,NA,NA
" e name of the item being reviewed. Can be a product, service, business, ",NA,NA
&,NA,NA
c.,NA,NA
rating ,NA,NA
"A numerical quality rating for the item, on a scale from 1 to 5. Can also be a ",NA,NA
nested ,NA,NA
http://data-vocabulary.org/Rating,NA,NA
 vocabulary to use a nonstandard scale.,NA,NA
reviewer,NA,NA
e name of the author who wrote the review ,NA,NA
dtreviewed,NA,NA
e date that the item was reviewed in ,NA,NA
ISO date format ,NA,NA
summary ,NA,NA
A short summary of the review ,NA,NA
description,NA,NA
e body of the review,NA,NA
e first property is simple: ,NA,NA
itemreviewed,NA,NA
" is just text, and here it’s contained in an ",NA,NA
<h1> ,NA,NA
"element, so that’s where we should put the ",NA,NA
itemprop,NA,NA
 aribute.,NA,NA
"<h1 itemprop=""itemreviewed"">Anna’s Pizzeria</h1>","[Follow along! Before: 
 review.html
 , aer: 
 review-plus-microdata.html
 ]",NA
I’m going to skip over the actual rating and come ba to that at the end.,NA,NA
e next two properties are also straightforward. e ,NA,NA
summary,NA,NA
 property is a short description ,NA,NA
"of what you’re reviewing, and the ",NA,NA
description,NA,NA
 property is the body of the review.,NA,NA
"<p itemprop=""summary"">New York-style pizza right in historic downtown",NA,NA
Apex</p>,NA,NA
"<p itemprop=""description"">",NA,NA
Food is top-notch. Atmosphere is just right for a “neighborhood ,NA,NA
pizza joint.” The restaurant itself is a bit cramped; if you’re ,NA,NA
"overweight, you may have difficulty getting in and out of your ",NA,NA
seat and navigating between other tables. Used to give free garlic ,NA,NA
knots when you sat down; now they give you plain bread and you ,NA,NA
"have to pay for the good stuff. Overall, it’s a winner.",NA,NA
</p>,"[Follow along! Before: 
 review.html
 , aer: 
 review-plus-microdata.html
 ]
  
 diveintohtml5.org
  
  “DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
e ,NA,NA
location,NA,NA
 and ,NA,NA
geo,NA,NA
 properties aren’t anything we haven’t taled before. (If you’re just ,NA,NA
"tuning in, e out ",NA,NA
marking up the address of a Person,NA,NA
", ",NA,NA
marking up the address of an ,NA,NA
Organization,NA,NA
", and ",NA,NA
marking up geolocation information,NA,NA
 from earlier in this apter.),NA,NA
<p ,NA,NA
"itemprop=""location""",NA,NA
 ,NA,NA
itemscope,NA,NA
<span ,NA,NA
<span ,NA,NA
<span ,NA,NA
<span ,NA,NA
"/span>, ",NA,NA
n> ,NA,NA
502</span><br> ,NA,NA
SA</span>,NA,NA
"itemprop=""locality""",NA,NA
"OK, let’s talk ratings. e triiest part of marking up a review is the rating. By default, ",NA,NA
"ratings in the Review vocabulary are on a scale of 1–5, 1 being “terrible” and 5 ",NA,NA
"being“awesome.” If you want to use a different scale, you can definitely do that. But ",NA,NA
let’s talk about the default scale first.,NA,NA
<p>,NA,NA
★★★★☆,NA,NA
" (<span itemprop=""rating"">4</span> stars out of 5)</p>","[Follow along! Before: 
 review.html
 , aer: 
 review-plus-microdata.html
 ]",NA
"If you’re using the default 1–5 scale, the only property you need to mark up is the rating ",NA,NA
"itself (4, in this case). But what if you want to use a different scale? You can do that; you ",NA,NA
"just need to declare the limits of the scale you’re using. For example, if you wanted to use a ",NA,NA
"0–10 point scale, you would still declare the ",NA,NA
"itemprop=""rating""",NA,NA
" property, but instead of ",NA,NA
"giving the rating value directly, you would use a nested vocabulary of ",NA,NA
http://data-,NA,NA
vocabulary.org/Rating,NA,NA
 to declare the worst and best values in your custom scale and ,NA,NA
the actual rating value within that scale.,NA,NA
<p ,NA,NA
"itemprop=""rating""",NA,NA
 ,NA,NA
itemscope,NA,NA
"itemtype=""http://data-vocabulary.org/Rating"">",NA,NA
★★★★★★★★★☆,NA,NA
"<span itemprop=""worst"">0</span> to ",NA,NA
"<span itemprop=""best"">10</span>)",NA,NA
description = Food is top-notch. Atmosphere is just right ...,NA,NA
address = Item(__1) ,NA,NA
geo = Item(__2) ,NA,NA
reviewer = Mark Pilgrim ,NA,NA
dtreviewed = 2010-03-31 ,NA,NA
Item ,NA,NA
Id: __1 ,NA,NA
Type:,NA,NA
 http://data-vocabulary.org/Organization ,NA,NA
street-address = 100 North Salem Street ,NA,NA
locality = Apex ,NA,NA
region = NC ,NA,NA
postal-code = 27502 ,NA,NA
country-name = USA ,NA,NA
Item ,NA,NA
Id: __2 ,NA,NA
Type:,NA,NA
 http://data-vocabulary.org/Geo ,NA,NA
latitude = 35.730796 ,NA,NA
longitude = -78.851426,NA,NA
"And here (modulo the whims of Google, the phase of the moon, and so on and so forth) is ",NA,NA
what my review might look like in a sear result listing:,"Anna’s Pizzeria: review
  
 ★★★★☆
  Review by Mark Pilgrim - Mar 31, 2010 
  
 Excerpt from the page will show up here.
  
 Excerpt from the page will show up here.
  
 diveintohtml5.org/examples/review-plus-microdata.html
  - 
 Cached
  - 
 Similar pages",NA
"Angle braets don’t impress me mu, but I have to admit, that’s prey cool.",NA,NA
❧,NA,NA
FURTHER READING,NA,NA
Microdata resources:,NA,NA
Live microdata playground,NA,NA
HTML5 microdata specification,NA,NA
Google Ri Snippets resources:,NA,NA
About ri snippets and structured data ,NA,NA
Marking up contact and social networking ,NA,NA
information Businesses ,NA,NA
&,NA,NA
 organizations ,NA,NA
Events ,NA,NA
Reviews,NA,NA
Review ratings,NA,NA
Google Ri Snippets Testing Tool ,NA,NA
Google Ri Snippets Tips and Tris,NA,NA
❧,NA,NA
"is has been ‘“Distributed,” “Extensibility,” & Other Fancy Words.’ e ",NA,NA
full table of contents,NA,NA
has more if you’d like to keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is apter is included in the paid ,NA,NA
edition.,NA,NA
If you liked this apter and want to show your ,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & ,NA,NA
Running”with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic ,NA,NA
edition directly from O’Reilly,NA,NA
". You’ll get a book, and ",NA,NA
I’ll get a,NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,diveintohtml5.org,NA
powered by Google™,NA,NA
Search,"“DISTRIBUTED,” “EXTENSIBILITY,” & OTHER FANCY WORDS",NA
You are here: ,NA,NA
Home,NA,NA
‣,NA,NA
Dive Into HTML5,NA,NA
‣,NA,NA
APPENDIX A: ,NA,NA
THE ALL-IN-ONE ,NA,NA
ALMOST-ALPHABETICAL ,NA,NA
NO-BULLSHIT GUIDE TO ,NA,NA
DETECTING EVERYTHING,NA,NA
❧,NA,NA
(Confused? Read ,NA,NA
Detecting HTML5 Features,NA,NA
 for a conceptual introduction. Want an all-in-,NA,NA
one library instead? Try ,NA,NA
Modernizr,NA,NA
.),NA,NA
<audio>,NA,NA
# ,NA,NA
return !!document.createElement('audio').canPlayType;,NA,NA
<audio>,NA,NA
 in MP3 format# ,NA,NA
var a = document.createElement('audio'); ,NA,NA
return !!(a.canPlayType && ,NA,NA
"a.canPlayType('audio/mpeg;').replace(/no/, ''));",NA,NA
<audio>,NA,NA
 in Vorbis format# ,NA,NA
var a = document.createElement('audio'); ,NA,NA
return !!(a.canPlayType && a.canPlayType('audio/ogg; ,NA,NA
"codecs=""vorbis""').replace(/no/, ''));",NA,NA
<audio>,NA,NA
 in WAV format# ,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
var a = document.createElement('audio'); ,NA,NA
return !!(a.canPlayType && a.canPlayType('audio/wav; ,NA,NA
"codecs=""1""').replace(/no/, ''));",NA,NA
<audio>,NA,NA
 in AAC format# ,NA,NA
var a = document.createElement('audio'); ,NA,NA
return !!(a.canPlayType && a.canPlayType('audio/mp4; ,NA,NA
"codecs=""mp4a.40.2""').replace(/no/, ''));",NA,NA
<canvas>,NA,NA
# ,NA,NA
return !!document.createElement('canvas').getContext;,NA,NA
<canvas>,NA,NA
 text API# ,NA,NA
var c = document.createElement('canvas'); ,NA,NA
return c.getContext && typeof c.getContext('2d').fillText == ,NA,NA
'function';,NA,NA
<command>,NA,NA
# ,NA,NA
return 'type' in document.createElement('command');,NA,NA
<datalist>,NA,NA
# ,NA,NA
return 'options' in document.createElement('datalist');,NA,NA
<details>,NA,NA
# ,NA,NA
return 'open' in document.createElement('details');,NA,NA
<device>,NA,NA
# ,NA,NA
return 'type' in document.createElement('device');,NA,NA
<form>,NA,NA
 constraint validation# ,NA,NA
return 'noValidate' in document.createElement('form');,NA,NA
<iframe sandbox>,NA,NA
# ,NA,NA
return 'sandbox' in document.createElement('iframe');,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
<iframe srcdoc>,NA,NA
# ,NA,NA
return 'srcdoc' in document.createElement('iframe');,NA,NA
<input autofocus>,NA,NA
# ,NA,NA
return 'autofocus' in document.createElement('input');,NA,NA
<input placeholder>,NA,NA
# ,NA,NA
return 'placeholder' in document.createElement('input');,NA,NA
<textarea placeholder>,NA,NA
# ,NA,NA
return 'placeholder' in document.createElement('textarea');,NA,NA
"<input type=""color"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'color'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""email"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'email'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""number"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'number'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""range"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'range'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""search"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'search');",diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
return i.type !== 'text';,NA,NA
"<input type=""tel"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'tel'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""url"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'url'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""date"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'date'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""time"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'time'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""datetime"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'datetime'); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""datetime-local"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'datetime-local); ",NA,NA
return i.type !== 'text';,NA,NA
"<input type=""month"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'month'); ",NA,NA
return i.type !== 'text'; ,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
"<input type=""week"">",NA,NA
# ,NA,NA
var i = document.createElement('input'); ,NA,NA
"i.setAttribute('type', 'week'); ",NA,NA
return i.type !== 'text';,NA,NA
<meter>,NA,NA
# ,NA,NA
return 'value' in document.createElement('meter');,NA,NA
<output>,NA,NA
# ,NA,NA
return 'value' in document.createElement('output');,NA,NA
<progress>,NA,NA
# ,NA,NA
return 'value' in document.createElement('progress');,NA,NA
<time>,NA,NA
# ,NA,NA
return 'valueAsDate' in document.createElement('time');,NA,NA
<video>,NA,NA
# ,NA,NA
return !!document.createElement('video').canPlayType;,NA,NA
<video>,NA,NA
 captions# ,NA,NA
return 'src' in document.createElement('track');,NA,NA
<video poster>,NA,NA
# ,NA,NA
return 'poster' in document.createElement('video');,NA,NA
<video>,NA,NA
 in WebM format# ,NA,NA
var v = document.createElement('video'); ,NA,NA
"return !!(v.canPlayType && v.canPlayType('video/webm; codecs=""vp8, ",NA,NA
"vorbis""').replace(/no/, ''));",NA,NA
<video>,NA,NA
 in H.264 format# ,NA,NA
var v = document.createElement('video'); ,NA,NA
return !!(v.canPlayType && v.canPlayType('video/mp4;,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
"codecs=""avc1.42E01E, mp4a.40.2""').replace(/no/, ''));",NA,NA
<video>,NA,NA
 in eora format# ,NA,NA
var v = document.createElement('video'); ,NA,NA
return !!(v.canPlayType && v.canPlayType('video/ogg; ,NA,NA
"codecs=""theora""').replace(/no/, ''));",NA,NA
contentEditable,NA,NA
# ,NA,NA
return 'isContentEditable' in document.createElement('span');,NA,NA
Cross-document messaging# ,NA,NA
return !!window.postMessage;,NA,NA
Drag-and-drop# ,NA,NA
return 'draggable' in document.createElement('span');,NA,NA
File API# ,NA,NA
return typeof FileReader != 'undefined';,NA,NA
Geolocation# ,NA,NA
return !!navigator.geolocation;,NA,NA
History# ,NA,NA
return !!(window.history && window.history.pushState);,NA,NA
Local storage# ,NA,NA
try { ,NA,NA
return 'localStorage' in window && window['localStorage'] !== ,NA,NA
null; ,NA,NA
} catch(e) { ,NA,NA
return false; ,NA,NA
},NA,NA
Microdata# ,NA,NA
return !!document.getItems;,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
Offline web applications# ,NA,NA
return !!window.applicationCache;,NA,NA
Server-sent events# ,NA,NA
return typeof EventSource !== 'undefined';,NA,NA
Session storage# ,NA,NA
try { ,NA,NA
return 'sessionStorage' in window && window['sessionStorage'] !== ,NA,NA
null; ,NA,NA
} catch(e) { ,NA,NA
return false; ,NA,NA
},NA,NA
SVG# ,NA,NA
return !!(document.createElementNS && ,NA,NA
"document.createElementNS('http://www.w3.org/2000/svg', ",NA,NA
'svg').createSVGRect);,NA,NA
SVG in ,NA,NA
text/html,NA,NA
# ,NA,NA
var e = document.createElement('div'); ,NA,NA
e.innerHTML = '<svg></svg>'; ,NA,NA
return !!(window.SVGSVGElement && e.firstChild instanceof ,NA,NA
window.SVGSVGElement);,NA,NA
Undo# ,NA,NA
return typeof UndoManager !== 'undefined';,NA,NA
IndexedDB# ,NA,NA
return !!window.indexedDB;,NA,NA
Web Soets# ,NA,NA
return !!window.WebSocket;,NA,NA
Web SQL Database# ,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
return !!window.openDatabase;,NA,NA
Web Workers# ,NA,NA
return !!window.Worker;,NA,NA
Widgets,NA,NA
: am I in one?,NA,NA
# ,NA,NA
return typeof widget !== 'undefined';,NA,NA
XMLHpRequest: cross-domain requests# ,NA,NA
"return ""withCredentials"" in new XMLHttpRequest;",NA,NA
XMLHpRequest: send as form data# ,NA,NA
return !!window.FormData;,NA,NA
XMLHpRequest: upload progress events# ,NA,NA
"return ""upload"" in new XMLHttpRequest;",NA,NA
❧,NA,NA
FURTHER READING,NA,NA
Specifications and standards:,NA,NA
HTML5 ,NA,NA
Geolocation ,NA,NA
Server-Sent Events ,NA,NA
WebSimpleDB ,NA,NA
Web Soets ,NA,NA
Web SQL Database,NA,NA
Web Storage,NA,NA
Web Workers,NA,NA
Widgets ,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
XMLHpRequest Level 2,NA,NA
JavaScript libraries:,NA,NA
Modernizr,NA,NA
", an HTML5 detection library",NA,NA
❧,NA,NA
is has been “e All-In-One Almost-Alphabetical No-Bullshit Guide to Detecting,NA,NA
Everything.” e ,NA,NA
full table of contents,NA,NA
 has more if you’d like to keep reading.,NA,NA
DID YOU KNOW?,NA,NA
"In association with Google Press, O’Reilly is ",NA,NA
"distributing this book in a variety of formats, ",NA,NA
"including paper, ePub, Mobi, and DRM-free PDF. e ",NA,NA
paid ,NA,NA
"edition is called “HTML5: Up & Running,” and it is ",NA,NA
available now. is appendix is included in the paid ,NA,NA
edition.,NA,NA
If you liked this appendix and want to show your,NA,NA
"appreciation, you can ",NA,NA
buy “HTML5: Up & Running”,NA,NA
with this affiliate link,NA,NA
 or ,NA,NA
buy an electronic edition ,NA,NA
directly from O’Reilly,NA,NA
". You’ll get a book, and I’ll get a",NA,NA
bu. I do not currently accept direct donations.,NA,NA
Copyright MMIX–MMX Mark Pilgrim,NA,NA
powered by Google™,NA,NA
Search,diveintohtml5.org THE ALL-IN-ONE ALMOST-ALPHABETICAL NO-BULLSHIT GUIDE TO DETECTING EVERYTHING,NA
"HTML5 Peeks, Pokes and Pointers","Common abbreviations (you’ll see these throughout this chart): 
  
 $new
 =document.createElement 
 $bool
 =function(any){return!(any==""no""||!any)} 
  
 Most new features can be detected in JavaScript. To test for HTML5 video support, create a 
 <video>
  element and check for a property in its DOM: 
 if(""canPlayType"" in $new(""video"")){...}
  See Chapter 2: Detecting HTML5 Features
 .",NA
New elements,NA,NA
Forms,"5 > 2
  
  
 See Chapter 3: What Does It All Mean?
  
 Backward-compatible with HTML 4. See Chapter 9: A Form of Madness.
  
 Test for support
  
 ""type"" in $new(""command"")
  
 Test for support
  
 <command>
  
 Validation
  
 ""noValidate"" in $new(""form"")
  
 <datalist>
  
 ""options"" in $new(""datalist"")
  
 Regex constraint
  
 ""pattern"" in $new(""input"")
  
 <details>
  
 ""open"" in $new(""details"")
  
 Placeholder text
  
 ""placeholder"" in $new(""input"")
  
 <output>
  
 ""value"" in $new(""output"")
  
 Autofocus
  
 ""autofocus"" in $new(""input"")
  
 <progress>
  
 ""value"" in $new(""progress"")
  
 Required
  
 ""required"" in $new(""input"")
  
 <meter>
  
 ""value"" in $new(""meter"")
  
 New input types
 Browsers may customize style or input
  
 methods.
  
 <time>
  
 ""valueAsDate"" in $new(""time"")
  
 type=""search""
  
 search box
  
 Text annotations
  
 <ruby>, <rt>, <rp>
  
 type=""number""
  
 spinbox
  
 Semantics
 Usable in all browsers. IE < 9 requires a
  
 type=""range""
  
 slider
  
 shim.
  
 <article>, <aside>, <header>, <hgroup>, <footer>,
  
 type=""color""
  
 color picker
  
 <section>, <nav>, <figure>, <figcaption>, <mark>,
  
 type=""tel""
  
 telephone number
  
 <summary>
  
 type=""url""
  
 web address
  
 Newly
  
 <embed>, <keygen>, <wbr>
  
 type=""email""
  
 email address
  
 documented
  
 Obsolete
 Still supported, but won’t validate. 
 <basefont>, 
 <big>, <center>, <font>, <s>, <strike>,
  
  
 type=""date""/""time""/""month""/""week""/""datetime"" 
  
 Test for new input types
 All tests follow the same pattern.
  
 <frame>, <frameset>, <noframes>, <applet>, function() {
  
 <dir>,
  
 <isindex>, <tt>, <u>, <acronym> (use <abbr>)
  
  var i = $new(""input"");
  
  i.setAttribute(""type"", ""
 search
 "");
  
 Always quote your attribute values unless you’re a 
 rockstar. Keep your trailing slashes if you like.
  
 Validation is still cool: 
 html5.validator.nu
  
   
  return i.type !== ""text""; 
  
  
 } 
  
 Some browers claim to “support” an input type but offer no default user interface. 
 Modernizr can detect this.",NA
Multimedia ,"look ma, no plugins
  
 Encode video with Firefogg (Theora), HandBrake (H.264), or Miro Video Encoder (multiple). See Chapter 5: Video on the Web.
  
 <audio> support
  ""canPlayType"" in $new(""audio"")
  
 Vorbis 
  
 $bool($new(""audio"").canPlayType('audio/ogg; codecs=""vorbis""'))
  
 MP3 
  
 $bool($new(""audio"").canPlayType('audio/mpeg;'))
  
 AAC 
  
 $bool($new(""audio"").canPlayType('audio/mp4; codecs=""mp4a.40.2""'))
  
 <video> support
  ""canPlayType"" in $new(""video"")
  
 WebM 
  
 $bool($new(""video"").canPlayType('video/webm; codecs=""vp8, vorbis""'))
  
 Theora 
  
 $bool($new(""video"").canPlayType('video/ogg; codecs=""theora""'))
  
 H.264 
  
 $bool($new(""video"").canPlayType('video/mp4; codecs=""avc1.42E01E, mp4a.40.2""'))
  
 Properties 
  
 These apply to both 
 <audio>
  and 
 <video>
  elements.
  
 src 
  
 string currentSrc 
  
 string, read-only
  
 preload 
  
 string tracks 
  
 array of TimedTrack objects
  
 currentTime 
  
 in seconds buffered 
  
 TimeRanges object, read-only
  
 initialTime 
  
 in seconds, read-only played 
  
 TimeRanges object, read-only
  
 duration 
  
 in seconds, read-only seekable 
  
 TimeRanges object, read-only
  
 startOffsetTime 
  
 datetime, read-only networkState 
  
 enumerated, read-only
  
 paused 
  
 boolean readyState 
  
 enumerated, read-only
  
 ended 
  
 boolean, read-only error.code 
  
 enumerated, read-only
  
 autoplay 
  
 boolean
  
 loop 
  
 boolean List multiple <source> elements in an <audio> or <video>.
  
 diveintohtml5.org 
  
 HTML5 Peeks, Pokes and Pointers",NA
Offline ,See Chapter 8: Let’s Take This Offline.,NA
Geolocation,"IsGeolocationPartOfHTML5.com
  
 Location sharing is always opt-in. See Chapter 6: You Are Here.
  
 Test for support
  
 window.applicationCache
  
 Test for support
  
 navigator.geolocation
  
 <html manifest>
  Links to cache manifest. 
 Cache 
 manifest sections
  
 Functions 
  
  
 Position getCurrentPosition(callback, 
 err, opt
 ); 
  
 long watchPosition(callback, 
 err, opt
 ); 
  
  
 void clearWatch(watchId); 
  
  
 void callback(position); 
 Called on success 
  
  
 void err(positionError); 
 Called on error 
  
 PositionOptions object
  
 CACHE:
  
 Always cached. No wildcards.
  
 NETWORK:
  
 Never cached. ""*"" wildcards.
  
 FALLBACK:
  
 Pairs; second is used offline.
  
 Events
  
 First four are most common.
  
 checking
  
 always first
  
 downloading
  
 found manifest, fetching stuff
  
 timeout
  
 in milliseconds
  
 progress
  
 still fetching stuff
  
 maximumAge
  
 also milliseconds
  
 cached
  
 all resources cached
  
 enableHighAccuracy true or false 
  
 Position object (in callback) has 
 timestamp
  and 
 coords
 . 
 Coordinates object
 Unsupported properties will be 
 null
 .
  
 noupdate
  
 manifest hasn't changed
  
 updateready
  
 call swapCache() to activate
  
 obsolete
  
 manifest is 404 (or 410)
  
 latitude
  
 in decimal degrees
  
 error
  
 it all went wrong somewhere
  
 longitude
  
 also decimal degrees
  
 HTTP semantics still apply to resources listed in
  
 altitude
  
 meters above the reference ellipsoid
  
 accuracy
  
 in meters
  
  
 the cache manifest, so check your Expires and Cache-
 Control headers. Manifest must be served as text/cache-
 manifest, so check your Content-Type headers too. If 
 any
  
 required resource fails to load, application will not work 
 offline.
  
  
 altitudeAccuracy 
  
 also in meters 
  
  
 heading 
  
 degrees CCW from true north 
  
  
 speed 
  
 in meters/second 
  
 PositionError object (in err callback) has 
 message
  and 
 code
 : 
  
 TIMEOUT, POSITION_UNAVAILABLE, 
  
  
 PERMISSION_DENIED, or UNKNOWN_ERROR",NA
Canvas ,"Math is hard. Let’s go shopping!
  
 Paths are like tracing in pencil; nothing is drawn until 
 fill()
  or 
 stroke()
 ! See Chapter 4: Let’s Call It A Draw(ing) Surface .
  
 Basic support 
  
 ""getContext"" in $new(""canvas"")
  
 Text support 
  
 typeof $new(""canvas"").fillText==""function""
  
 Functions 
  
 Root path is implicit; subpaths must be explicit. 
 drawImage()
  can also draw video or canvas.
  
 beginPath(); 
  
 drawImage(image,dx,dy,
 dw,dh
 ); quadraticCurveTo(cpx,cpy,x,y);
  
 closePath(); 
  
 rotate(angle); bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);
  
 moveTo(x,y); 
  
 translate(x,y); arc(x,y,radius,startAngle,endAngle,anticlockwise);
  
 lineTo(x,y); 
  
 arcTo(x1,y1,x2,y2,radius); getImageData(sx,sy,sw,sh);
  
 rect(x,y,w,h); 
  
 isPointInPath(x,y); putImageData(imagedata,dx,dy,x,y,w,h);
  
 fill(); 
  
 fillRect(x,y,w,h); fillText(text,x,y,
 maxWidth
 );
  
 stroke(); 
  
 strokeRect(x,y,w,h); strokeText(text,x,y,
 maxWidth
 );
  
 clip(); 
  
 clearRect(x,y,w,h); measureText(text);
  
 save(); 
  
 setTransform(a,b,c,d,e,f); createLinearGradient(x0,y0,x1,y1);
  
 restore(); 
  
 transform(a,b,c,d,e,f); createRadialGradient(x0,y0,r0,x1,y1,r1);
  
 scale(x,y); 
  
 createImageData(sw,sh); createPattern(image,repetition);
  
 Properties 
  
 All properties are read/write. 
 fillStyle
  and 
 strokeStyle
  can also be a gradient or pattern.
  
 fillStyle 
  
 CSS color, default = ""black"" shadowColor 
  
 CSS color, default = ""black""
  
 strokeStyle 
  
 CSS color, default = ""black"" shadowOffsetX 
  
 in pixels, default = 0
  
 font 
  
 CSS font, default = ""10px sans-shadowOffsetY 
  
 in pixels, default = 0
  
 serif""
  
 textAlign
  
 enumerated, default = ""start""
  
 shadowBlur
  
 in pixels, default = 0
  
 textBaseline
  
 enumerated, default = ""alphabetic""
  
 Learn about states! A canvas state includes the clipping path,
  
 globalAlpha
  
 0.0 (transparent) to 1.0 (opaque)
  
 lineWidth
  
 in pixels, default = 1
  
 all properties, and all transformations. save() pushes a state
  
 lineCap
  
 enumerated, default = ""butt""
  
 onto the stack and restore() pops it off.
  
 lineJoin
  
 enumerated, default = ""miter""
  
 miterLimit
  
 float, default = 10",NA
Bits & Bytes,"diveintohtml5.org 
  
 HTML5 Peeks, Pokes and Pointers",NA
Credits,"return window.SVGSVGElement && e.firstChild instanceof window.SVGSVGElement}
  
 Serial Number 100930
  
 Writing 
  
 Code 
  
 Typography
  
 Mark Pilgrim
  
 References
  
 HTML5, HTML-diff, HTML vs. XHTML
  
 Modernizr (Paul Irish 
 et. al.
 )
  
 Inspiration
  
 Beagle Bros
  
 Chunk, Latin Modern
  
 License
  
 CC-BY-3.0
  
 diveintohtml5.org
  
 HTML5 Peeks, Pokes and Pointers",NA
